(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Kc(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Pt={},ar=[],sn=()=>{},fv=()=>!1,_a=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),qc=e=>e.startsWith("onUpdate:"),we=Object.assign,Wc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},dv=Object.prototype.hasOwnProperty,St=(e,t)=>dv.call(e,t),ht=Array.isArray,lr=e=>Ni(e)==="[object Map]",ya=e=>Ni(e)==="[object Set]",Jh=e=>Ni(e)==="[object Date]",mt=e=>typeof e=="function",Kt=e=>typeof e=="string",fn=e=>typeof e=="symbol",Lt=e=>e!==null&&typeof e=="object",Dp=e=>(Lt(e)||mt(e))&&mt(e.then)&&mt(e.catch),Pp=Object.prototype.toString,Ni=e=>Pp.call(e),pv=e=>Ni(e).slice(8,-1),Op=e=>Ni(e)==="[object Object]",zc=e=>Kt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,oi=Kc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),va=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},mv=/-(\w)/g,Yn=va(e=>e.replace(mv,(t,n)=>n?n.toUpperCase():"")),gv=/\B([A-Z])/g,as=va(e=>e.replace(gv,"-$1").toLowerCase()),Np=va(e=>e.charAt(0).toUpperCase()+e.slice(1)),El=va(e=>e?`on${Np(e)}`:""),Kn=(e,t)=>!Object.is(e,t),Ro=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Vp=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},jo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Zh;const Ea=()=>Zh||(Zh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vi(e){if(ht(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=Kt(s)?Ev(s):vi(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(Kt(e)||Lt(e))return e}const _v=/;(?![^(]*\))/g,yv=/:([^]+)/,vv=/\/\*[^]*?\*\//g;function Ev(e){const t={};return e.replace(vv,"").split(_v).forEach(n=>{if(n){const s=n.split(yv);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ta(e){let t="";if(Kt(e))t=e;else if(ht(e))for(let n=0;n<e.length;n++){const s=Ta(e[n]);s&&(t+=s+" ")}else if(Lt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Tv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wv=Kc(Tv);function xp(e){return!!e||e===""}function Av(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=wa(e[s],t[s]);return n}function wa(e,t){if(e===t)return!0;let n=Jh(e),s=Jh(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=fn(e),s=fn(t),n||s)return e===t;if(n=ht(e),s=ht(t),n||s)return n&&s?Av(e,t):!1;if(n=Lt(e),s=Lt(t),n||s){if(!n||!s)return!1;const r=Object.keys(e).length,i=Object.keys(t).length;if(r!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!wa(e[a],t[a]))return!1}}return String(e)===String(t)}function bv(e,t){return e.findIndex(n=>wa(n,t))}const Mp=e=>!!(e&&e.__v_isRef===!0),De=e=>Kt(e)?e:e==null?"":ht(e)||Lt(e)&&(e.toString===Pp||!mt(e.toString))?Mp(e)?De(e.value):JSON.stringify(e,Lp,2):String(e),Lp=(e,t)=>Mp(t)?Lp(e,t.value):lr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],i)=>(n[Tl(s,i)+" =>"]=r,n),{})}:ya(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Tl(n))}:fn(t)?Tl(t):Lt(t)&&!ht(t)&&!Op(t)?String(t):t,Tl=(e,t="")=>{var n;return fn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Oe;class Iv{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Oe,!t&&Oe&&(this.index=(Oe.scopes||(Oe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Oe;try{return Oe=this,t()}finally{Oe=n}}}on(){Oe=this}off(){Oe=this.parent}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Sv(){return Oe}let xt;const wl=new WeakSet;class kp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Oe&&Oe.active&&Oe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wl.has(this)&&(wl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tf(this),Up(this);const t=xt,n=Ye;xt=this,Ye=!0;try{return this.fn()}finally{Bp(this),xt=t,Ye=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Yc(t);this.deps=this.depsTail=void 0,tf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rc(this)&&this.run()}get dirty(){return rc(this)}}let $p=0,ai,li;function Fp(e,t=!1){if(e.flags|=8,t){e.next=li,li=e;return}e.next=ai,ai=e}function Gc(){$p++}function Qc(){if(--$p>0)return;if(li){let t=li;for(li=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ai;){let t=ai;for(ai=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Up(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bp(e){let t,n=e.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Yc(s),Cv(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}e.deps=t,e.depsTail=n}function rc(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(jp(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function jp(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ei))return;e.globalVersion=Ei;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!rc(e)){e.flags&=-3;return}const n=xt,s=Ye;xt=e,Ye=!0;try{Up(e);const r=e.fn(e._value);(t.version===0||Kn(r,e._value))&&(e._value=r,t.version++)}catch(r){throw t.version++,r}finally{xt=n,Ye=s,Bp(e),e.flags&=-3}}function Yc(e,t=!1){const{dep:n,prevSub:s,nextSub:r}=e;if(s&&(s.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Yc(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Cv(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ye=!0;const Hp=[];function ls(){Hp.push(Ye),Ye=!1}function cs(){const e=Hp.pop();Ye=e===void 0?!0:e}function tf(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=xt;xt=void 0;try{t()}finally{xt=n}}}let Ei=0;class Rv{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Xc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!xt||!Ye||xt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xt)n=this.activeLink=new Rv(xt,this),xt.deps?(n.prevDep=xt.depsTail,xt.depsTail.nextDep=n,xt.depsTail=n):xt.deps=xt.depsTail=n,Kp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=xt.depsTail,n.nextDep=void 0,xt.depsTail.nextDep=n,xt.depsTail=n,xt.deps===n&&(xt.deps=s)}return n}trigger(t){this.version++,Ei++,this.notify(t)}notify(t){Gc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Qc()}}}function Kp(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Kp(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ic=new WeakMap,Ps=Symbol(""),oc=Symbol(""),Ti=Symbol("");function he(e,t,n){if(Ye&&xt){let s=ic.get(e);s||ic.set(e,s=new Map);let r=s.get(n);r||(s.set(n,r=new Xc),r.map=s,r.key=n),r.track()}}function wn(e,t,n,s,r,i){const a=ic.get(e);if(!a){Ei++;return}const l=c=>{c&&c.trigger()};if(Gc(),t==="clear")a.forEach(l);else{const c=ht(e),h=c&&zc(n);if(c&&n==="length"){const d=Number(s);a.forEach((m,v)=>{(v==="length"||v===Ti||!fn(v)&&v>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),h&&l(a.get(Ti)),t){case"add":c?h&&l(a.get("length")):(l(a.get(Ps)),lr(e)&&l(a.get(oc)));break;case"delete":c||(l(a.get(Ps)),lr(e)&&l(a.get(oc)));break;case"set":lr(e)&&l(a.get(Ps));break}}Qc()}function Qs(e){const t=It(e);return t===e?t:(he(t,"iterate",Ti),Ke(e)?t:t.map(fe))}function Aa(e){return he(e=It(e),"iterate",Ti),e}const Dv={__proto__:null,[Symbol.iterator](){return Al(this,Symbol.iterator,fe)},concat(...e){return Qs(this).concat(...e.map(t=>ht(t)?Qs(t):t))},entries(){return Al(this,"entries",e=>(e[1]=fe(e[1]),e))},every(e,t){return En(this,"every",e,t,void 0,arguments)},filter(e,t){return En(this,"filter",e,t,n=>n.map(fe),arguments)},find(e,t){return En(this,"find",e,t,fe,arguments)},findIndex(e,t){return En(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return En(this,"findLast",e,t,fe,arguments)},findLastIndex(e,t){return En(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return En(this,"forEach",e,t,void 0,arguments)},includes(...e){return bl(this,"includes",e)},indexOf(...e){return bl(this,"indexOf",e)},join(e){return Qs(this).join(e)},lastIndexOf(...e){return bl(this,"lastIndexOf",e)},map(e,t){return En(this,"map",e,t,void 0,arguments)},pop(){return Jr(this,"pop")},push(...e){return Jr(this,"push",e)},reduce(e,...t){return ef(this,"reduce",e,t)},reduceRight(e,...t){return ef(this,"reduceRight",e,t)},shift(){return Jr(this,"shift")},some(e,t){return En(this,"some",e,t,void 0,arguments)},splice(...e){return Jr(this,"splice",e)},toReversed(){return Qs(this).toReversed()},toSorted(e){return Qs(this).toSorted(e)},toSpliced(...e){return Qs(this).toSpliced(...e)},unshift(...e){return Jr(this,"unshift",e)},values(){return Al(this,"values",fe)}};function Al(e,t,n){const s=Aa(e),r=s[t]();return s!==e&&!Ke(e)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const Pv=Array.prototype;function En(e,t,n,s,r,i){const a=Aa(e),l=a!==e&&!Ke(e),c=a[t];if(c!==Pv[t]){const m=c.apply(e,i);return l?fe(m):m}let h=n;a!==e&&(l?h=function(m,v){return n.call(this,fe(m),v,e)}:n.length>2&&(h=function(m,v){return n.call(this,m,v,e)}));const d=c.call(a,h,s);return l&&r?r(d):d}function ef(e,t,n,s){const r=Aa(e);let i=n;return r!==e&&(Ke(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,fe(l),c,e)}),r[t](i,...s)}function bl(e,t,n){const s=It(e);he(s,"iterate",Ti);const r=s[t](...n);return(r===-1||r===!1)&&eu(n[0])?(n[0]=It(n[0]),s[t](...n)):r}function Jr(e,t,n=[]){ls(),Gc();const s=It(e)[t].apply(e,n);return Qc(),cs(),s}const Ov=Kc("__proto__,__v_isRef,__isVue"),qp=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(fn));function Nv(e){fn(e)||(e=String(e));const t=It(this);return he(t,"has",e),t.hasOwnProperty(e)}class Wp{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?jv:Yp:i?Qp:Gp).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const a=ht(t);if(!r){let c;if(a&&(c=Dv[n]))return c;if(n==="hasOwnProperty")return Nv}const l=Reflect.get(t,n,pe(t)?t:s);return(fn(n)?qp.has(n):Ov(n))||(r||he(t,"get",n),i)?l:pe(l)?a&&zc(n)?l:l.value:Lt(l)?r?Xp(l):Zc(l):l}}class zp extends Wp{constructor(t=!1){super(!1,t)}set(t,n,s,r){let i=t[n];if(!this._isShallow){const c=Ns(i);if(!Ke(s)&&!Ns(s)&&(i=It(i),s=It(s)),!ht(t)&&pe(i)&&!pe(s))return c?!1:(i.value=s,!0)}const a=ht(t)&&zc(n)?Number(n)<t.length:St(t,n),l=Reflect.set(t,n,s,pe(t)?t:r);return t===It(r)&&(a?Kn(s,i)&&wn(t,"set",n,s):wn(t,"add",n,s)),l}deleteProperty(t,n){const s=St(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&wn(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!fn(n)||!qp.has(n))&&he(t,"has",n),s}ownKeys(t){return he(t,"iterate",ht(t)?"length":Ps),Reflect.ownKeys(t)}}class Vv extends Wp{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const xv=new zp,Mv=new Vv,Lv=new zp(!0);const ac=e=>e,lo=e=>Reflect.getPrototypeOf(e);function kv(e,t,n){return function(...s){const r=this.__v_raw,i=It(r),a=lr(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,h=r[e](...s),d=n?ac:t?lc:fe;return!t&&he(i,"iterate",c?oc:Ps),{next(){const{value:m,done:v}=h.next();return v?{value:m,done:v}:{value:l?[d(m[0]),d(m[1])]:d(m),done:v}},[Symbol.iterator](){return this}}}}function co(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $v(e,t){const n={get(r){const i=this.__v_raw,a=It(i),l=It(r);e||(Kn(r,l)&&he(a,"get",r),he(a,"get",l));const{has:c}=lo(a),h=t?ac:e?lc:fe;if(c.call(a,r))return h(i.get(r));if(c.call(a,l))return h(i.get(l));i!==a&&i.get(r)},get size(){const r=this.__v_raw;return!e&&he(It(r),"iterate",Ps),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,a=It(i),l=It(r);return e||(Kn(r,l)&&he(a,"has",r),he(a,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const a=this,l=a.__v_raw,c=It(l),h=t?ac:e?lc:fe;return!e&&he(c,"iterate",Ps),l.forEach((d,m)=>r.call(i,h(d),h(m),a))}};return we(n,e?{add:co("add"),set:co("set"),delete:co("delete"),clear:co("clear")}:{add(r){!t&&!Ke(r)&&!Ns(r)&&(r=It(r));const i=It(this);return lo(i).has.call(i,r)||(i.add(r),wn(i,"add",r,r)),this},set(r,i){!t&&!Ke(i)&&!Ns(i)&&(i=It(i));const a=It(this),{has:l,get:c}=lo(a);let h=l.call(a,r);h||(r=It(r),h=l.call(a,r));const d=c.call(a,r);return a.set(r,i),h?Kn(i,d)&&wn(a,"set",r,i):wn(a,"add",r,i),this},delete(r){const i=It(this),{has:a,get:l}=lo(i);let c=a.call(i,r);c||(r=It(r),c=a.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&wn(i,"delete",r,void 0),h},clear(){const r=It(this),i=r.size!==0,a=r.clear();return i&&wn(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=kv(r,e,t)}),n}function Jc(e,t){const n=$v(e,t);return(s,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(St(n,r)&&r in s?n:s,r,i)}const Fv={get:Jc(!1,!1)},Uv={get:Jc(!1,!0)},Bv={get:Jc(!0,!1)};const Gp=new WeakMap,Qp=new WeakMap,Yp=new WeakMap,jv=new WeakMap;function Hv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kv(e){return e.__v_skip||!Object.isExtensible(e)?0:Hv(pv(e))}function Zc(e){return Ns(e)?e:tu(e,!1,xv,Fv,Gp)}function qv(e){return tu(e,!1,Lv,Uv,Qp)}function Xp(e){return tu(e,!0,Mv,Bv,Yp)}function tu(e,t,n,s,r){if(!Lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=r.get(e);if(i)return i;const a=Kv(e);if(a===0)return e;const l=new Proxy(e,a===2?s:n);return r.set(e,l),l}function cr(e){return Ns(e)?cr(e.__v_raw):!!(e&&e.__v_isReactive)}function Ns(e){return!!(e&&e.__v_isReadonly)}function Ke(e){return!!(e&&e.__v_isShallow)}function eu(e){return e?!!e.__v_raw:!1}function It(e){const t=e&&e.__v_raw;return t?It(t):e}function Wv(e){return!St(e,"__v_skip")&&Object.isExtensible(e)&&Vp(e,"__v_skip",!0),e}const fe=e=>Lt(e)?Zc(e):e,lc=e=>Lt(e)?Xp(e):e;function pe(e){return e?e.__v_isRef===!0:!1}function Je(e){return zv(e,!1)}function zv(e,t){return pe(e)?e:new Gv(e,t)}class Gv{constructor(t,n){this.dep=new Xc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:It(t),this._value=n?t:fe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Ke(t)||Ns(t);t=s?t:It(t),Kn(t,n)&&(this._rawValue=t,this._value=s?t:fe(t),this.dep.trigger())}}function Qv(e){return pe(e)?e.value:e}const Yv={get:(e,t,n)=>t==="__v_raw"?e:Qv(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return pe(r)&&!pe(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function Jp(e){return cr(e)?e:new Proxy(e,Yv)}class Xv{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Xc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ei-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return Fp(this,!0),!0}get value(){const t=this.dep.track();return jp(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Jv(e,t,n=!1){let s,r;return mt(e)?s=e:(s=e.get,r=e.set),new Xv(s,r,n)}const uo={},Ho=new WeakMap;let As;function Zv(e,t=!1,n=As){if(n){let s=Ho.get(n);s||Ho.set(n,s=[]),s.push(e)}}function tE(e,t,n=Pt){const{immediate:s,deep:r,once:i,scheduler:a,augmentJob:l,call:c}=n,h=L=>r?L:Ke(L)||r===!1||r===0?An(L,1):An(L);let d,m,v,E,P=!1,O=!1;if(pe(e)?(m=()=>e.value,P=Ke(e)):cr(e)?(m=()=>h(e),P=!0):ht(e)?(O=!0,P=e.some(L=>cr(L)||Ke(L)),m=()=>e.map(L=>{if(pe(L))return L.value;if(cr(L))return h(L);if(mt(L))return c?c(L,2):L()})):mt(e)?t?m=c?()=>c(e,2):e:m=()=>{if(v){ls();try{v()}finally{cs()}}const L=As;As=d;try{return c?c(e,3,[E]):e(E)}finally{As=L}}:m=sn,t&&r){const L=m,tt=r===!0?1/0:r;m=()=>An(L(),tt)}const N=Sv(),K=()=>{d.stop(),N&&N.active&&Wc(N.effects,d)};if(i&&t){const L=t;t=(...tt)=>{L(...tt),K()}}let W=O?new Array(e.length).fill(uo):uo;const G=L=>{if(!(!(d.flags&1)||!d.dirty&&!L))if(t){const tt=d.run();if(r||P||(O?tt.some((nt,A)=>Kn(nt,W[A])):Kn(tt,W))){v&&v();const nt=As;As=d;try{const A=[tt,W===uo?void 0:O&&W[0]===uo?[]:W,E];c?c(t,3,A):t(...A),W=tt}finally{As=nt}}}else d.run()};return l&&l(G),d=new kp(m),d.scheduler=a?()=>a(G,!1):G,E=L=>Zv(L,!1,d),v=d.onStop=()=>{const L=Ho.get(d);if(L){if(c)c(L,4);else for(const tt of L)tt();Ho.delete(d)}},t?s?G(!0):W=d.run():a?a(G.bind(null,!0),!0):d.run(),K.pause=d.pause.bind(d),K.resume=d.resume.bind(d),K.stop=K,K}function An(e,t=1/0,n){if(t<=0||!Lt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,pe(e))An(e.value,t,n);else if(ht(e))for(let s=0;s<e.length;s++)An(e[s],t,n);else if(ya(e)||lr(e))e.forEach(s=>{An(s,t,n)});else if(Op(e)){for(const s in e)An(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&An(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vi(e,t,n,s){try{return s?e(...s):e()}catch(r){ba(r,t,n)}}function dn(e,t,n,s){if(mt(e)){const r=Vi(e,t,n,s);return r&&Dp(r)&&r.catch(i=>{ba(i,t,n)}),r}if(ht(e)){const r=[];for(let i=0;i<e.length;i++)r.push(dn(e[i],t,n,s));return r}}function ba(e,t,n,s=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Pt;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,c,h)===!1)return}l=l.parent}if(i){ls(),Vi(i,null,10,[e,c,h]),cs();return}}eE(e,n,r,s,a)}function eE(e,t,n,s=!0,r=!1){if(r)throw e;console.error(e)}const ye=[];let tn=-1;const ur=[];let Bn=null,Js=0;const Zp=Promise.resolve();let Ko=null;function tm(e){const t=Ko||Zp;return e?t.then(this?e.bind(this):e):t}function nE(e){let t=tn+1,n=ye.length;for(;t<n;){const s=t+n>>>1,r=ye[s],i=wi(r);i<e||i===e&&r.flags&2?t=s+1:n=s}return t}function nu(e){if(!(e.flags&1)){const t=wi(e),n=ye[ye.length-1];!n||!(e.flags&2)&&t>=wi(n)?ye.push(e):ye.splice(nE(t),0,e),e.flags|=1,em()}}function em(){Ko||(Ko=Zp.then(sm))}function sE(e){ht(e)?ur.push(...e):Bn&&e.id===-1?Bn.splice(Js+1,0,e):e.flags&1||(ur.push(e),e.flags|=1),em()}function nf(e,t,n=tn+1){for(;n<ye.length;n++){const s=ye[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ye.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function nm(e){if(ur.length){const t=[...new Set(ur)].sort((n,s)=>wi(n)-wi(s));if(ur.length=0,Bn){Bn.push(...t);return}for(Bn=t,Js=0;Js<Bn.length;Js++){const n=Bn[Js];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Bn=null,Js=0}}const wi=e=>e.id==null?e.flags&2?-1:1/0:e.id;function sm(e){try{for(tn=0;tn<ye.length;tn++){const t=ye[tn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Vi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;tn<ye.length;tn++){const t=ye[tn];t&&(t.flags&=-2)}tn=-1,ye.length=0,nm(),Ko=null,(ye.length||ur.length)&&sm()}}let He=null,rm=null;function qo(e){const t=He;return He=e,rm=e&&e.type.__scopeId||null,t}function rE(e,t=He,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&ff(-1);const i=qo(t);let a;try{a=e(...r)}finally{qo(i),s._d&&ff(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function kn(e,t){if(He===null)return e;const n=Ra(He),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,l,c=Pt]=t[r];i&&(mt(i)&&(i={mounted:i,updated:i}),i.deep&&An(a),s.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Es(e,t,n,s){const r=e.dirs,i=t&&t.dirs;for(let a=0;a<r.length;a++){const l=r[a];i&&(l.oldValue=i[a].value);let c=l.dir[s];c&&(ls(),dn(c,n,8,[e.el,l,e,t]),cs())}}const iE=Symbol("_vte"),oE=e=>e.__isTeleport;function su(e,t){e.shapeFlag&6&&e.component?(e.transition=t,su(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function im(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Wo(e,t,n,s,r=!1){if(ht(e)){e.forEach((P,O)=>Wo(P,t&&(ht(t)?t[O]:t),n,s,r));return}if(ci(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Wo(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Ra(s.component):s.el,a=r?null:i,{i:l,r:c}=e,h=t&&t.r,d=l.refs===Pt?l.refs={}:l.refs,m=l.setupState,v=It(m),E=m===Pt?()=>!1:P=>St(v,P);if(h!=null&&h!==c&&(Kt(h)?(d[h]=null,E(h)&&(m[h]=null)):pe(h)&&(h.value=null)),mt(c))Vi(c,l,12,[a,d]);else{const P=Kt(c),O=pe(c);if(P||O){const N=()=>{if(e.f){const K=P?E(c)?m[c]:d[c]:c.value;r?ht(K)&&Wc(K,i):ht(K)?K.includes(i)||K.push(i):P?(d[c]=[i],E(c)&&(m[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else P?(d[c]=a,E(c)&&(m[c]=a)):O&&(c.value=a,e.k&&(d[e.k]=a))};a?(N.id=-1,Pe(N,n)):N()}}}Ea().requestIdleCallback;Ea().cancelIdleCallback;const ci=e=>!!e.type.__asyncLoader,om=e=>e.type.__isKeepAlive;function aE(e,t){am(e,"a",t)}function lE(e,t){am(e,"da",t)}function am(e,t,n=ve){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Ia(t,s,n),n){let r=n.parent;for(;r&&r.parent;)om(r.parent.vnode)&&cE(s,t,n,r),r=r.parent}}function cE(e,t,n,s){const r=Ia(t,e,s,!0);cm(()=>{Wc(s[t],r)},n)}function Ia(e,t,n=ve,s=!1){if(n){const r=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{ls();const l=xi(n),c=dn(t,n,e,a);return l(),cs(),c});return s?r.unshift(i):r.push(i),i}}const On=e=>(t,n=ve)=>{(!bi||e==="sp")&&Ia(e,(...s)=>t(...s),n)},uE=On("bm"),lm=On("m"),hE=On("bu"),fE=On("u"),dE=On("bum"),cm=On("um"),pE=On("sp"),mE=On("rtg"),gE=On("rtc");function _E(e,t=ve){Ia("ec",e,t)}const yE=Symbol.for("v-ndc");function ho(e,t,n,s){let r;const i=n,a=ht(e);if(a||Kt(e)){const l=a&&cr(e);let c=!1;l&&(c=!Ke(e),e=Aa(e)),r=new Array(e.length);for(let h=0,d=e.length;h<d;h++)r[h]=t(c?fe(e[h]):e[h],h,void 0,i)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,i)}else if(Lt(e))if(e[Symbol.iterator])r=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];r[c]=t(e[d],d,c,i)}}else r=[];return r}const cc=e=>e?Om(e)?Ra(e):cc(e.parent):null,ui=we(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>cc(e.parent),$root:e=>cc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>hm(e),$forceUpdate:e=>e.f||(e.f=()=>{nu(e.update)}),$nextTick:e=>e.n||(e.n=tm.bind(e.proxy)),$watch:e=>UE.bind(e)}),Il=(e,t)=>e!==Pt&&!e.__isScriptSetup&&St(e,t),vE={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:a,type:l,appContext:c}=e;let h;if(t[0]!=="$"){const E=a[t];if(E!==void 0)switch(E){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(Il(s,t))return a[t]=1,s[t];if(r!==Pt&&St(r,t))return a[t]=2,r[t];if((h=e.propsOptions[0])&&St(h,t))return a[t]=3,i[t];if(n!==Pt&&St(n,t))return a[t]=4,n[t];uc&&(a[t]=0)}}const d=ui[t];let m,v;if(d)return t==="$attrs"&&he(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==Pt&&St(n,t))return a[t]=4,n[t];if(v=c.config.globalProperties,St(v,t))return v[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:i}=e;return Il(r,t)?(r[t]=n,!0):s!==Pt&&St(s,t)?(s[t]=n,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:i}},a){let l;return!!n[a]||e!==Pt&&St(e,a)||Il(t,a)||(l=i[0])&&St(l,a)||St(s,a)||St(ui,a)||St(r.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:St(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function sf(e){return ht(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let uc=!0;function EE(e){const t=hm(e),n=e.proxy,s=e.ctx;uc=!1,t.beforeCreate&&rf(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:a,watch:l,provide:c,inject:h,created:d,beforeMount:m,mounted:v,beforeUpdate:E,updated:P,activated:O,deactivated:N,beforeDestroy:K,beforeUnmount:W,destroyed:G,unmounted:L,render:tt,renderTracked:nt,renderTriggered:A,errorCaptured:g,serverPrefetch:_,expose:w,inheritAttrs:b,components:S,directives:y,filters:$t}=t;if(h&&TE(h,s,null),a)for(const ct in a){const yt=a[ct];mt(yt)&&(s[ct]=yt.bind(n))}if(r){const ct=r.call(n,n);Lt(ct)&&(e.data=Zc(ct))}if(uc=!0,i)for(const ct in i){const yt=i[ct],Ut=mt(yt)?yt.bind(n,n):mt(yt.get)?yt.get.bind(n,n):sn,Ae=!mt(yt)&&mt(yt.set)?yt.set.bind(n):sn,me=Un({get:Ut,set:Ae});Object.defineProperty(s,ct,{enumerable:!0,configurable:!0,get:()=>me.value,set:Rt=>me.value=Rt})}if(l)for(const ct in l)um(l[ct],s,n,ct);if(c){const ct=mt(c)?c.call(n):c;Reflect.ownKeys(ct).forEach(yt=>{CE(yt,ct[yt])})}d&&rf(d,e,"c");function _t(ct,yt){ht(yt)?yt.forEach(Ut=>ct(Ut.bind(n))):yt&&ct(yt.bind(n))}if(_t(uE,m),_t(lm,v),_t(hE,E),_t(fE,P),_t(aE,O),_t(lE,N),_t(_E,g),_t(gE,nt),_t(mE,A),_t(dE,W),_t(cm,L),_t(pE,_),ht(w))if(w.length){const ct=e.exposed||(e.exposed={});w.forEach(yt=>{Object.defineProperty(ct,yt,{get:()=>n[yt],set:Ut=>n[yt]=Ut})})}else e.exposed||(e.exposed={});tt&&e.render===sn&&(e.render=tt),b!=null&&(e.inheritAttrs=b),S&&(e.components=S),y&&(e.directives=y),_&&im(e)}function TE(e,t,n=sn){ht(e)&&(e=hc(e));for(const s in e){const r=e[s];let i;Lt(r)?"default"in r?i=Do(r.from||s,r.default,!0):i=Do(r.from||s):i=Do(r),pe(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[s]=i}}function rf(e,t,n){dn(ht(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function um(e,t,n,s){let r=s.includes(".")?Im(n,s):()=>n[s];if(Kt(e)){const i=t[e];mt(i)&&Cl(r,i)}else if(mt(e))Cl(r,e.bind(n));else if(Lt(e))if(ht(e))e.forEach(i=>um(i,t,n,s));else{const i=mt(e.handler)?e.handler.bind(n):t[e.handler];mt(i)&&Cl(r,i,e)}}function hm(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!r.length&&!n&&!s?c=t:(c={},r.length&&r.forEach(h=>zo(c,h,a,!0)),zo(c,t,a)),Lt(t)&&i.set(t,c),c}function zo(e,t,n,s=!1){const{mixins:r,extends:i}=t;i&&zo(e,i,n,!0),r&&r.forEach(a=>zo(e,a,n,!0));for(const a in t)if(!(s&&a==="expose")){const l=wE[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const wE={data:of,props:af,emits:af,methods:ni,computed:ni,beforeCreate:_e,created:_e,beforeMount:_e,mounted:_e,beforeUpdate:_e,updated:_e,beforeDestroy:_e,beforeUnmount:_e,destroyed:_e,unmounted:_e,activated:_e,deactivated:_e,errorCaptured:_e,serverPrefetch:_e,components:ni,directives:ni,watch:bE,provide:of,inject:AE};function of(e,t){return t?e?function(){return we(mt(e)?e.call(this,this):e,mt(t)?t.call(this,this):t)}:t:e}function AE(e,t){return ni(hc(e),hc(t))}function hc(e){if(ht(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function _e(e,t){return e?[...new Set([].concat(e,t))]:t}function ni(e,t){return e?we(Object.create(null),e,t):t}function af(e,t){return e?ht(e)&&ht(t)?[...new Set([...e,...t])]:we(Object.create(null),sf(e),sf(t??{})):t}function bE(e,t){if(!e)return t;if(!t)return e;const n=we(Object.create(null),e);for(const s in t)n[s]=_e(e[s],t[s]);return n}function fm(){return{app:null,config:{isNativeTag:fv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IE=0;function SE(e,t){return function(s,r=null){mt(s)||(s=we({},s)),r!=null&&!Lt(r)&&(r=null);const i=fm(),a=new WeakSet,l=[];let c=!1;const h=i.app={_uid:IE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:lT,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&mt(d.install)?(a.add(d),d.install(h,...m)):mt(d)&&(a.add(d),d(h,...m))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,m){return m?(i.components[d]=m,h):i.components[d]},directive(d,m){return m?(i.directives[d]=m,h):i.directives[d]},mount(d,m,v){if(!c){const E=h._ceVNode||rn(s,r);return E.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),e(E,d,v),c=!0,h._container=d,d.__vue_app__=h,Ra(E.component)}},onUnmount(d){l.push(d)},unmount(){c&&(dn(l,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(d,m){return i.provides[d]=m,h},runWithContext(d){const m=hr;hr=h;try{return d()}finally{hr=m}}};return h}}let hr=null;function CE(e,t){if(ve){let n=ve.provides;const s=ve.parent&&ve.parent.provides;s===n&&(n=ve.provides=Object.create(s)),n[e]=t}}function Do(e,t,n=!1){const s=ve||He;if(s||hr){const r=hr?hr._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&mt(t)?t.call(s&&s.proxy):t}}const dm={},pm=()=>Object.create(dm),mm=e=>Object.getPrototypeOf(e)===dm;function RE(e,t,n,s=!1){const r={},i=pm();e.propsDefaults=Object.create(null),gm(e,t,r,i);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);n?e.props=s?r:qv(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function DE(e,t,n,s){const{props:r,attrs:i,vnode:{patchFlag:a}}=e,l=It(r),[c]=e.propsOptions;let h=!1;if((s||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let v=d[m];if(Sa(e.emitsOptions,v))continue;const E=t[v];if(c)if(St(i,v))E!==i[v]&&(i[v]=E,h=!0);else{const P=Yn(v);r[P]=fc(c,l,P,E,e,!1)}else E!==i[v]&&(i[v]=E,h=!0)}}}else{gm(e,t,r,i)&&(h=!0);let d;for(const m in l)(!t||!St(t,m)&&((d=as(m))===m||!St(t,d)))&&(c?n&&(n[m]!==void 0||n[d]!==void 0)&&(r[m]=fc(c,l,m,void 0,e,!0)):delete r[m]);if(i!==l)for(const m in i)(!t||!St(t,m))&&(delete i[m],h=!0)}h&&wn(e.attrs,"set","")}function gm(e,t,n,s){const[r,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(oi(c))continue;const h=t[c];let d;r&&St(r,d=Yn(c))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:Sa(e.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,a=!0)}if(i){const c=It(n),h=l||Pt;for(let d=0;d<i.length;d++){const m=i[d];n[m]=fc(r,c,m,h[m],e,!St(h,m))}}return a}function fc(e,t,n,s,r,i){const a=e[n];if(a!=null){const l=St(a,"default");if(l&&s===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&mt(c)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const d=xi(r);s=h[n]=c.call(null,t),d()}}else s=c;r.ce&&r.ce._setProp(n,s)}a[0]&&(i&&!l?s=!1:a[1]&&(s===""||s===as(n))&&(s=!0))}return s}const PE=new WeakMap;function _m(e,t,n=!1){const s=n?PE:t.propsCache,r=s.get(e);if(r)return r;const i=e.props,a={},l=[];let c=!1;if(!mt(e)){const d=m=>{c=!0;const[v,E]=_m(m,t,!0);we(a,v),E&&l.push(...E)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Lt(e)&&s.set(e,ar),ar;if(ht(i))for(let d=0;d<i.length;d++){const m=Yn(i[d]);lf(m)&&(a[m]=Pt)}else if(i)for(const d in i){const m=Yn(d);if(lf(m)){const v=i[d],E=a[m]=ht(v)||mt(v)?{type:v}:we({},v),P=E.type;let O=!1,N=!0;if(ht(P))for(let K=0;K<P.length;++K){const W=P[K],G=mt(W)&&W.name;if(G==="Boolean"){O=!0;break}else G==="String"&&(N=!1)}else O=mt(P)&&P.name==="Boolean";E[0]=O,E[1]=N,(O||St(E,"default"))&&l.push(m)}}const h=[a,l];return Lt(e)&&s.set(e,h),h}function lf(e){return e[0]!=="$"&&!oi(e)}const ym=e=>e[0]==="_"||e==="$stable",ru=e=>ht(e)?e.map(nn):[nn(e)],OE=(e,t,n)=>{if(t._n)return t;const s=rE((...r)=>ru(t(...r)),n);return s._c=!1,s},vm=(e,t,n)=>{const s=e._ctx;for(const r in e){if(ym(r))continue;const i=e[r];if(mt(i))t[r]=OE(r,i,s);else if(i!=null){const a=ru(i);t[r]=()=>a}}},Em=(e,t)=>{const n=ru(t);e.slots.default=()=>n},Tm=(e,t,n)=>{for(const s in t)(n||s!=="_")&&(e[s]=t[s])},NE=(e,t,n)=>{const s=e.slots=pm();if(e.vnode.shapeFlag&32){const r=t._;r?(Tm(s,t,n),n&&Vp(s,"_",r,!0)):vm(t,s)}else t&&Em(e,t)},VE=(e,t,n)=>{const{vnode:s,slots:r}=e;let i=!0,a=Pt;if(s.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Tm(r,t,n):(i=!t.$stable,vm(t,r)),a=t}else t&&(Em(e,t),a={default:1});if(i)for(const l in r)!ym(l)&&a[l]==null&&delete r[l]},Pe=zE;function xE(e){return ME(e)}function ME(e,t){const n=Ea();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:a,createText:l,createComment:c,setText:h,setElementText:d,parentNode:m,nextSibling:v,setScopeId:E=sn,insertStaticContent:P}=e,O=(T,I,D,B=null,M=null,F=null,Q=void 0,q=null,j=!!I.dynamicChildren)=>{if(T===I)return;T&&!Zr(T,I)&&(B=X(T),Rt(T,M,F,!0),T=null),I.patchFlag===-2&&(j=!1,I.dynamicChildren=null);const{type:k,ref:rt,shapeFlag:Y}=I;switch(k){case Ca:N(T,I,D,B);break;case Vs:K(T,I,D,B);break;case Po:T==null&&W(I,D,B,Q);break;case Ne:S(T,I,D,B,M,F,Q,q,j);break;default:Y&1?tt(T,I,D,B,M,F,Q,q,j):Y&6?y(T,I,D,B,M,F,Q,q,j):(Y&64||Y&128)&&k.process(T,I,D,B,M,F,Q,q,j,Vt)}rt!=null&&M&&Wo(rt,T&&T.ref,F,I||T,!I)},N=(T,I,D,B)=>{if(T==null)s(I.el=l(I.children),D,B);else{const M=I.el=T.el;I.children!==T.children&&h(M,I.children)}},K=(T,I,D,B)=>{T==null?s(I.el=c(I.children||""),D,B):I.el=T.el},W=(T,I,D,B)=>{[T.el,T.anchor]=P(T.children,I,D,B,T.el,T.anchor)},G=({el:T,anchor:I},D,B)=>{let M;for(;T&&T!==I;)M=v(T),s(T,D,B),T=M;s(I,D,B)},L=({el:T,anchor:I})=>{let D;for(;T&&T!==I;)D=v(T),r(T),T=D;r(I)},tt=(T,I,D,B,M,F,Q,q,j)=>{I.type==="svg"?Q="svg":I.type==="math"&&(Q="mathml"),T==null?nt(I,D,B,M,F,Q,q,j):_(T,I,M,F,Q,q,j)},nt=(T,I,D,B,M,F,Q,q)=>{let j,k;const{props:rt,shapeFlag:Y,transition:et,dirs:lt}=T;if(j=T.el=a(T.type,F,rt&&rt.is,rt),Y&8?d(j,T.children):Y&16&&g(T.children,j,null,B,M,Sl(T,F),Q,q),lt&&Es(T,null,B,"created"),A(j,T,T.scopeId,Q,B),rt){for(const ft in rt)ft!=="value"&&!oi(ft)&&i(j,ft,null,rt[ft],F,B);"value"in rt&&i(j,"value",null,rt.value,F),(k=rt.onVnodeBeforeMount)&&Ze(k,B,T)}lt&&Es(T,null,B,"beforeMount");const it=LE(M,et);it&&et.beforeEnter(j),s(j,I,D),((k=rt&&rt.onVnodeMounted)||it||lt)&&Pe(()=>{k&&Ze(k,B,T),it&&et.enter(j),lt&&Es(T,null,B,"mounted")},M)},A=(T,I,D,B,M)=>{if(D&&E(T,D),B)for(let F=0;F<B.length;F++)E(T,B[F]);if(M){let F=M.subTree;if(I===F||Cm(F.type)&&(F.ssContent===I||F.ssFallback===I)){const Q=M.vnode;A(T,Q,Q.scopeId,Q.slotScopeIds,M.parent)}}},g=(T,I,D,B,M,F,Q,q,j=0)=>{for(let k=j;k<T.length;k++){const rt=T[k]=q?jn(T[k]):nn(T[k]);O(null,rt,I,D,B,M,F,Q,q)}},_=(T,I,D,B,M,F,Q)=>{const q=I.el=T.el;let{patchFlag:j,dynamicChildren:k,dirs:rt}=I;j|=T.patchFlag&16;const Y=T.props||Pt,et=I.props||Pt;let lt;if(D&&Ts(D,!1),(lt=et.onVnodeBeforeUpdate)&&Ze(lt,D,I,T),rt&&Es(I,T,D,"beforeUpdate"),D&&Ts(D,!0),(Y.innerHTML&&et.innerHTML==null||Y.textContent&&et.textContent==null)&&d(q,""),k?w(T.dynamicChildren,k,q,D,B,Sl(I,M),F):Q||yt(T,I,q,null,D,B,Sl(I,M),F,!1),j>0){if(j&16)b(q,Y,et,D,M);else if(j&2&&Y.class!==et.class&&i(q,"class",null,et.class,M),j&4&&i(q,"style",Y.style,et.style,M),j&8){const it=I.dynamicProps;for(let ft=0;ft<it.length;ft++){const vt=it[ft],ie=Y[vt],Jt=et[vt];(Jt!==ie||vt==="value")&&i(q,vt,ie,Jt,M,D)}}j&1&&T.children!==I.children&&d(q,I.children)}else!Q&&k==null&&b(q,Y,et,D,M);((lt=et.onVnodeUpdated)||rt)&&Pe(()=>{lt&&Ze(lt,D,I,T),rt&&Es(I,T,D,"updated")},B)},w=(T,I,D,B,M,F,Q)=>{for(let q=0;q<I.length;q++){const j=T[q],k=I[q],rt=j.el&&(j.type===Ne||!Zr(j,k)||j.shapeFlag&70)?m(j.el):D;O(j,k,rt,null,B,M,F,Q,!0)}},b=(T,I,D,B,M)=>{if(I!==D){if(I!==Pt)for(const F in I)!oi(F)&&!(F in D)&&i(T,F,I[F],null,M,B);for(const F in D){if(oi(F))continue;const Q=D[F],q=I[F];Q!==q&&F!=="value"&&i(T,F,q,Q,M,B)}"value"in D&&i(T,"value",I.value,D.value,M)}},S=(T,I,D,B,M,F,Q,q,j)=>{const k=I.el=T?T.el:l(""),rt=I.anchor=T?T.anchor:l("");let{patchFlag:Y,dynamicChildren:et,slotScopeIds:lt}=I;lt&&(q=q?q.concat(lt):lt),T==null?(s(k,D,B),s(rt,D,B),g(I.children||[],D,rt,M,F,Q,q,j)):Y>0&&Y&64&&et&&T.dynamicChildren?(w(T.dynamicChildren,et,D,M,F,Q,q),(I.key!=null||M&&I===M.subTree)&&wm(T,I,!0)):yt(T,I,D,rt,M,F,Q,q,j)},y=(T,I,D,B,M,F,Q,q,j)=>{I.slotScopeIds=q,T==null?I.shapeFlag&512?M.ctx.activate(I,D,B,Q,j):$t(I,D,B,M,F,Q,j):Qt(T,I,j)},$t=(T,I,D,B,M,F,Q)=>{const q=T.component=nT(T,B,M);if(om(T)&&(q.ctx.renderer=Vt),sT(q,!1,Q),q.asyncDep){if(M&&M.registerDep(q,_t,Q),!T.el){const j=q.subTree=rn(Vs);K(null,j,I,D)}}else _t(q,T,I,D,M,F,Q)},Qt=(T,I,D)=>{const B=I.component=T.component;if(qE(T,I,D))if(B.asyncDep&&!B.asyncResolved){ct(B,I,D);return}else B.next=I,B.update();else I.el=T.el,B.vnode=I},_t=(T,I,D,B,M,F,Q)=>{const q=()=>{if(T.isMounted){let{next:Y,bu:et,u:lt,parent:it,vnode:ft}=T;{const oe=Am(T);if(oe){Y&&(Y.el=ft.el,ct(T,Y,Q)),oe.asyncDep.then(()=>{T.isUnmounted||q()});return}}let vt=Y,ie;Ts(T,!1),Y?(Y.el=ft.el,ct(T,Y,Q)):Y=ft,et&&Ro(et),(ie=Y.props&&Y.props.onVnodeBeforeUpdate)&&Ze(ie,it,Y,ft),Ts(T,!0);const Jt=uf(T),Be=T.subTree;T.subTree=Jt,O(Be,Jt,m(Be.el),X(Be),T,M,F),Y.el=Jt.el,vt===null&&WE(T,Jt.el),lt&&Pe(lt,M),(ie=Y.props&&Y.props.onVnodeUpdated)&&Pe(()=>Ze(ie,it,Y,ft),M)}else{let Y;const{el:et,props:lt}=I,{bm:it,m:ft,parent:vt,root:ie,type:Jt}=T,Be=ci(I);Ts(T,!1),it&&Ro(it),!Be&&(Y=lt&&lt.onVnodeBeforeMount)&&Ze(Y,vt,I),Ts(T,!0);{ie.ce&&ie.ce._injectChildStyle(Jt);const oe=T.subTree=uf(T);O(null,oe,D,B,T,M,F),I.el=oe.el}if(ft&&Pe(ft,M),!Be&&(Y=lt&&lt.onVnodeMounted)){const oe=I;Pe(()=>Ze(Y,vt,oe),M)}(I.shapeFlag&256||vt&&ci(vt.vnode)&&vt.vnode.shapeFlag&256)&&T.a&&Pe(T.a,M),T.isMounted=!0,I=D=B=null}};T.scope.on();const j=T.effect=new kp(q);T.scope.off();const k=T.update=j.run.bind(j),rt=T.job=j.runIfDirty.bind(j);rt.i=T,rt.id=T.uid,j.scheduler=()=>nu(rt),Ts(T,!0),k()},ct=(T,I,D)=>{I.component=T;const B=T.vnode.props;T.vnode=I,T.next=null,DE(T,I.props,B,D),VE(T,I.children,D),ls(),nf(T),cs()},yt=(T,I,D,B,M,F,Q,q,j=!1)=>{const k=T&&T.children,rt=T?T.shapeFlag:0,Y=I.children,{patchFlag:et,shapeFlag:lt}=I;if(et>0){if(et&128){Ae(k,Y,D,B,M,F,Q,q,j);return}else if(et&256){Ut(k,Y,D,B,M,F,Q,q,j);return}}lt&8?(rt&16&&x(k,M,F),Y!==k&&d(D,Y)):rt&16?lt&16?Ae(k,Y,D,B,M,F,Q,q,j):x(k,M,F,!0):(rt&8&&d(D,""),lt&16&&g(Y,D,B,M,F,Q,q,j))},Ut=(T,I,D,B,M,F,Q,q,j)=>{T=T||ar,I=I||ar;const k=T.length,rt=I.length,Y=Math.min(k,rt);let et;for(et=0;et<Y;et++){const lt=I[et]=j?jn(I[et]):nn(I[et]);O(T[et],lt,D,null,M,F,Q,q,j)}k>rt?x(T,M,F,!0,!1,Y):g(I,D,B,M,F,Q,q,j,Y)},Ae=(T,I,D,B,M,F,Q,q,j)=>{let k=0;const rt=I.length;let Y=T.length-1,et=rt-1;for(;k<=Y&&k<=et;){const lt=T[k],it=I[k]=j?jn(I[k]):nn(I[k]);if(Zr(lt,it))O(lt,it,D,null,M,F,Q,q,j);else break;k++}for(;k<=Y&&k<=et;){const lt=T[Y],it=I[et]=j?jn(I[et]):nn(I[et]);if(Zr(lt,it))O(lt,it,D,null,M,F,Q,q,j);else break;Y--,et--}if(k>Y){if(k<=et){const lt=et+1,it=lt<rt?I[lt].el:B;for(;k<=et;)O(null,I[k]=j?jn(I[k]):nn(I[k]),D,it,M,F,Q,q,j),k++}}else if(k>et)for(;k<=Y;)Rt(T[k],M,F,!0),k++;else{const lt=k,it=k,ft=new Map;for(k=it;k<=et;k++){const Zt=I[k]=j?jn(I[k]):nn(I[k]);Zt.key!=null&&ft.set(Zt.key,k)}let vt,ie=0;const Jt=et-it+1;let Be=!1,oe=0;const Vn=new Array(Jt);for(k=0;k<Jt;k++)Vn[k]=0;for(k=lt;k<=Y;k++){const Zt=T[k];if(ie>=Jt){Rt(Zt,M,F,!0);continue}let je;if(Zt.key!=null)je=ft.get(Zt.key);else for(vt=it;vt<=et;vt++)if(Vn[vt-it]===0&&Zr(Zt,I[vt])){je=vt;break}je===void 0?Rt(Zt,M,F,!0):(Vn[je-it]=k+1,je>=oe?oe=je:Be=!0,O(Zt,I[je],D,null,M,F,Q,q,j),ie++)}const Fr=Be?kE(Vn):ar;for(vt=Fr.length-1,k=Jt-1;k>=0;k--){const Zt=it+k,je=I[Zt],Wi=Zt+1<rt?I[Zt+1].el:B;Vn[k]===0?O(null,je,D,Wi,M,F,Q,q,j):Be&&(vt<0||k!==Fr[vt]?me(je,D,Wi,2):vt--)}}},me=(T,I,D,B,M=null)=>{const{el:F,type:Q,transition:q,children:j,shapeFlag:k}=T;if(k&6){me(T.component.subTree,I,D,B);return}if(k&128){T.suspense.move(I,D,B);return}if(k&64){Q.move(T,I,D,Vt);return}if(Q===Ne){s(F,I,D);for(let Y=0;Y<j.length;Y++)me(j[Y],I,D,B);s(T.anchor,I,D);return}if(Q===Po){G(T,I,D);return}if(B!==2&&k&1&&q)if(B===0)q.beforeEnter(F),s(F,I,D),Pe(()=>q.enter(F),M);else{const{leave:Y,delayLeave:et,afterLeave:lt}=q,it=()=>s(F,I,D),ft=()=>{Y(F,()=>{it(),lt&&lt()})};et?et(F,it,ft):ft()}else s(F,I,D)},Rt=(T,I,D,B=!1,M=!1)=>{const{type:F,props:Q,ref:q,children:j,dynamicChildren:k,shapeFlag:rt,patchFlag:Y,dirs:et,cacheIndex:lt}=T;if(Y===-2&&(M=!1),q!=null&&Wo(q,null,D,T,!0),lt!=null&&(I.renderCache[lt]=void 0),rt&256){I.ctx.deactivate(T);return}const it=rt&1&&et,ft=!ci(T);let vt;if(ft&&(vt=Q&&Q.onVnodeBeforeUnmount)&&Ze(vt,I,T),rt&6)H(T.component,D,B);else{if(rt&128){T.suspense.unmount(D,B);return}it&&Es(T,null,I,"beforeUnmount"),rt&64?T.type.remove(T,I,D,Vt,B):k&&!k.hasOnce&&(F!==Ne||Y>0&&Y&64)?x(k,I,D,!1,!0):(F===Ne&&Y&384||!M&&rt&16)&&x(j,I,D),B&&Ot(T)}(ft&&(vt=Q&&Q.onVnodeUnmounted)||it)&&Pe(()=>{vt&&Ze(vt,I,T),it&&Es(T,null,I,"unmounted")},D)},Ot=T=>{const{type:I,el:D,anchor:B,transition:M}=T;if(I===Ne){Ue(D,B);return}if(I===Po){L(T);return}const F=()=>{r(D),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(T.shapeFlag&1&&M&&!M.persisted){const{leave:Q,delayLeave:q}=M,j=()=>Q(D,F);q?q(T.el,F,j):j()}else F()},Ue=(T,I)=>{let D;for(;T!==I;)D=v(T),r(T),T=D;r(I)},H=(T,I,D)=>{const{bum:B,scope:M,job:F,subTree:Q,um:q,m:j,a:k}=T;cf(j),cf(k),B&&Ro(B),M.stop(),F&&(F.flags|=8,Rt(Q,T,I,D)),q&&Pe(q,I),Pe(()=>{T.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},x=(T,I,D,B=!1,M=!1,F=0)=>{for(let Q=F;Q<T.length;Q++)Rt(T[Q],I,D,B,M)},X=T=>{if(T.shapeFlag&6)return X(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const I=v(T.anchor||T.el),D=I&&I[iE];return D?v(D):I};let gt=!1;const Nt=(T,I,D)=>{T==null?I._vnode&&Rt(I._vnode,null,null,!0):O(I._vnode||null,T,I,null,null,null,D),I._vnode=T,gt||(gt=!0,nf(),nm(),gt=!1)},Vt={p:O,um:Rt,m:me,r:Ot,mt:$t,mc:g,pc:yt,pbc:w,n:X,o:e};return{render:Nt,hydrate:void 0,createApp:SE(Nt)}}function Sl({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ts({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function LE(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function wm(e,t,n=!1){const s=e.children,r=t.children;if(ht(s)&&ht(r))for(let i=0;i<s.length;i++){const a=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=jn(r[i]),l.el=a.el),!n&&l.patchFlag!==-2&&wm(a,l)),l.type===Ca&&(l.el=a.el)}}function kE(e){const t=e.slice(),n=[0];let s,r,i,a,l;const c=e.length;for(s=0;s<c;s++){const h=e[s];if(h!==0){if(r=n[n.length-1],e[r]<h){t[s]=r,n.push(s);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<h?i=l+1:a=l;h<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Am(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Am(t)}function cf(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const $E=Symbol.for("v-scx"),FE=()=>Do($E);function Cl(e,t,n){return bm(e,t,n)}function bm(e,t,n=Pt){const{immediate:s,deep:r,flush:i,once:a}=n,l=we({},n),c=t&&s||!t&&i!=="post";let h;if(bi){if(i==="sync"){const E=FE();h=E.__watcherHandles||(E.__watcherHandles=[])}else if(!c){const E=()=>{};return E.stop=sn,E.resume=sn,E.pause=sn,E}}const d=ve;l.call=(E,P,O)=>dn(E,d,P,O);let m=!1;i==="post"?l.scheduler=E=>{Pe(E,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(E,P)=>{P?E():nu(E)}),l.augmentJob=E=>{t&&(E.flags|=4),m&&(E.flags|=2,d&&(E.id=d.uid,E.i=d))};const v=tE(e,t,l);return bi&&(h?h.push(v):c&&v()),v}function UE(e,t,n){const s=this.proxy,r=Kt(e)?e.includes(".")?Im(s,e):()=>s[e]:e.bind(s,s);let i;mt(t)?i=t:(i=t.handler,n=t);const a=xi(this),l=bm(r,i.bind(s),n);return a(),l}function Im(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const BE=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Yn(t)}Modifiers`]||e[`${as(t)}Modifiers`];function jE(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Pt;let r=n;const i=t.startsWith("update:"),a=i&&BE(s,t.slice(7));a&&(a.trim&&(r=n.map(d=>Kt(d)?d.trim():d)),a.number&&(r=n.map(jo)));let l,c=s[l=El(t)]||s[l=El(Yn(t))];!c&&i&&(c=s[l=El(as(t))]),c&&dn(c,e,6,r);const h=s[l+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,dn(h,e,6,r)}}function Sm(e,t,n=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const i=e.emits;let a={},l=!1;if(!mt(e)){const c=h=>{const d=Sm(h,t,!0);d&&(l=!0,we(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Lt(e)&&s.set(e,null),null):(ht(i)?i.forEach(c=>a[c]=null):we(a,i),Lt(e)&&s.set(e,a),a)}function Sa(e,t){return!e||!_a(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,as(t))||St(e,t))}function uf(e){const{type:t,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:a,attrs:l,emit:c,render:h,renderCache:d,props:m,data:v,setupState:E,ctx:P,inheritAttrs:O}=e,N=qo(e);let K,W;try{if(n.shapeFlag&4){const L=r||s,tt=L;K=nn(h.call(tt,L,d,m,E,v,P)),W=l}else{const L=t;K=nn(L.length>1?L(m,{attrs:l,slots:a,emit:c}):L(m,null)),W=t.props?l:HE(l)}}catch(L){hi.length=0,ba(L,e,1),K=rn(Vs)}let G=K;if(W&&O!==!1){const L=Object.keys(W),{shapeFlag:tt}=G;L.length&&tt&7&&(i&&L.some(qc)&&(W=KE(W,i)),G=pr(G,W,!1,!0))}return n.dirs&&(G=pr(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(n.dirs):n.dirs),n.transition&&su(G,n.transition),K=G,qo(N),K}const HE=e=>{let t;for(const n in e)(n==="class"||n==="style"||_a(n))&&((t||(t={}))[n]=e[n]);return t},KE=(e,t)=>{const n={};for(const s in e)(!qc(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function qE(e,t,n){const{props:s,children:r,component:i}=e,{props:a,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?hf(s,a,h):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const v=d[m];if(a[v]!==s[v]&&!Sa(h,v))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===a?!1:s?a?hf(s,a,h):!0:!!a;return!1}function hf(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==e[i]&&!Sa(n,i))return!0}return!1}function WE({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Cm=e=>e.__isSuspense;function zE(e,t){t&&t.pendingBranch?ht(e)?t.effects.push(...e):t.effects.push(e):sE(e)}const Ne=Symbol.for("v-fgt"),Ca=Symbol.for("v-txt"),Vs=Symbol.for("v-cmt"),Po=Symbol.for("v-stc"),hi=[];let Ve=null;function qt(e=!1){hi.push(Ve=e?null:[])}function GE(){hi.pop(),Ve=hi[hi.length-1]||null}let Ai=1;function ff(e,t=!1){Ai+=e,e<0&&Ve&&t&&(Ve.hasOnce=!0)}function Rm(e){return e.dynamicChildren=Ai>0?Ve||ar:null,GE(),Ai>0&&Ve&&Ve.push(e),e}function Yt(e,t,n,s,r,i){return Rm(J(e,t,n,s,r,i,!0))}function QE(e,t,n,s,r){return Rm(rn(e,t,n,s,r,!0))}function Dm(e){return e?e.__v_isVNode===!0:!1}function Zr(e,t){return e.type===t.type&&e.key===t.key}const Pm=({key:e})=>e??null,Oo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Kt(e)||pe(e)||mt(e)?{i:He,r:e,k:t,f:!!n}:e:null);function J(e,t=null,n=null,s=0,r=null,i=e===Ne?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Pm(t),ref:t&&Oo(t),scopeId:rm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:He};return l?(iu(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Kt(n)?8:16),Ai>0&&!a&&Ve&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ve.push(c),c}const rn=YE;function YE(e,t=null,n=null,s=0,r=null,i=!1){if((!e||e===yE)&&(e=Vs),Dm(e)){const l=pr(e,t,!0);return n&&iu(l,n),Ai>0&&!i&&Ve&&(l.shapeFlag&6?Ve[Ve.indexOf(e)]=l:Ve.push(l)),l.patchFlag=-2,l}if(aT(e)&&(e=e.__vccOpts),t){t=XE(t);let{class:l,style:c}=t;l&&!Kt(l)&&(t.class=Ta(l)),Lt(c)&&(eu(c)&&!ht(c)&&(c=we({},c)),t.style=vi(c))}const a=Kt(e)?1:Cm(e)?128:oE(e)?64:Lt(e)?4:mt(e)?2:0;return J(e,t,n,s,r,a,i,!0)}function XE(e){return e?eu(e)||mm(e)?we({},e):e:null}function pr(e,t,n=!1,s=!1){const{props:r,ref:i,patchFlag:a,children:l,transition:c}=e,h=t?ZE(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&Pm(h),ref:t&&t.ref?n&&i?ht(i)?i.concat(Oo(t)):[i,Oo(t)]:Oo(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ne?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&pr(e.ssContent),ssFallback:e.ssFallback&&pr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&su(d,c.clone(d)),d}function JE(e=" ",t=0){return rn(Ca,null,e,t)}function df(e,t){const n=rn(Po,null,e);return n.staticCount=t,n}function $n(e="",t=!1){return t?(qt(),QE(Vs,null,e)):rn(Vs,null,e)}function nn(e){return e==null||typeof e=="boolean"?rn(Vs):ht(e)?rn(Ne,null,e.slice()):Dm(e)?jn(e):rn(Ca,null,String(e))}function jn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:pr(e)}function iu(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ht(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),iu(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!mm(t)?t._ctx=He:r===3&&He&&(He.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else mt(t)?(t={default:t,_ctx:He},n=32):(t=String(t),s&64?(n=16,t=[JE(t)]):n=8);e.children=t,e.shapeFlag|=n}function ZE(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=Ta([t.class,s.class]));else if(r==="style")t.style=vi([t.style,s.style]);else if(_a(r)){const i=t[r],a=s[r];a&&i!==a&&!(ht(i)&&i.includes(a))&&(t[r]=i?[].concat(i,a):a)}else r!==""&&(t[r]=s[r])}return t}function Ze(e,t,n,s=null){dn(e,t,7,[n,s])}const tT=fm();let eT=0;function nT(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||tT,i={uid:eT++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Iv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_m(s,r),emitsOptions:Sm(s,r),emit:null,emitted:null,propsDefaults:Pt,inheritAttrs:s.inheritAttrs,ctx:Pt,data:Pt,props:Pt,attrs:Pt,slots:Pt,refs:Pt,setupState:Pt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=jE.bind(null,i),e.ce&&e.ce(i),i}let ve=null,Go,dc;{const e=Ea(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};Go=t("__VUE_INSTANCE_SETTERS__",n=>ve=n),dc=t("__VUE_SSR_SETTERS__",n=>bi=n)}const xi=e=>{const t=ve;return Go(e),e.scope.on(),()=>{e.scope.off(),Go(t)}},pf=()=>{ve&&ve.scope.off(),Go(null)};function Om(e){return e.vnode.shapeFlag&4}let bi=!1;function sT(e,t=!1,n=!1){t&&dc(t);const{props:s,children:r}=e.vnode,i=Om(e);RE(e,s,i,t),NE(e,r,n);const a=i?rT(e,t):void 0;return t&&dc(!1),a}function rT(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,vE);const{setup:s}=n;if(s){ls();const r=e.setupContext=s.length>1?oT(e):null,i=xi(e),a=Vi(s,e,0,[e.props,r]),l=Dp(a);if(cs(),i(),(l||e.sp)&&!ci(e)&&im(e),l){if(a.then(pf,pf),t)return a.then(c=>{mf(e,c)}).catch(c=>{ba(c,e,0)});e.asyncDep=a}else mf(e,a)}else Nm(e)}function mf(e,t,n){mt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Lt(t)&&(e.setupState=Jp(t)),Nm(e)}function Nm(e,t,n){const s=e.type;e.render||(e.render=s.render||sn);{const r=xi(e);ls();try{EE(e)}finally{cs(),r()}}}const iT={get(e,t){return he(e,"get",""),e[t]}};function oT(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,iT),slots:e.slots,emit:e.emit,expose:t}}function Ra(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Jp(Wv(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ui)return ui[n](e)},has(t,n){return n in t||n in ui}})):e.proxy}function aT(e){return mt(e)&&"__vccOpts"in e}const Un=(e,t)=>Jv(e,t,bi),lT="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pc;const gf=typeof window<"u"&&window.trustedTypes;if(gf)try{pc=gf.createPolicy("vue",{createHTML:e=>e})}catch{}const Vm=pc?e=>pc.createHTML(e):e=>e,cT="http://www.w3.org/2000/svg",uT="http://www.w3.org/1998/Math/MathML",Tn=typeof document<"u"?document:null,_f=Tn&&Tn.createElement("template"),hT={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?Tn.createElementNS(cT,e):t==="mathml"?Tn.createElementNS(uT,e):n?Tn.createElement(e,{is:n}):Tn.createElement(e);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>Tn.createTextNode(e),createComment:e=>Tn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Tn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,i){const a=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{_f.innerHTML=Vm(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=_f.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},fT=Symbol("_vtc");function dT(e,t,n){const s=e[fT];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const yf=Symbol("_vod"),pT=Symbol("_vsh"),mT=Symbol(""),gT=/(^|;)\s*display\s*:/;function _T(e,t,n){const s=e.style,r=Kt(n);let i=!1;if(n&&!r){if(t)if(Kt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&No(s,l,"")}else for(const a in t)n[a]==null&&No(s,a,"");for(const a in n)a==="display"&&(i=!0),No(s,a,n[a])}else if(r){if(t!==n){const a=s[mT];a&&(n+=";"+a),s.cssText=n,i=gT.test(n)}}else t&&e.removeAttribute("style");yf in e&&(e[yf]=i?s.display:"",e[pT]&&(s.display="none"))}const vf=/\s*!important$/;function No(e,t,n){if(ht(n))n.forEach(s=>No(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=yT(e,t);vf.test(n)?e.setProperty(as(s),n.replace(vf,""),"important"):e[s]=n}}const Ef=["Webkit","Moz","ms"],Rl={};function yT(e,t){const n=Rl[t];if(n)return n;let s=Yn(t);if(s!=="filter"&&s in e)return Rl[t]=s;s=Np(s);for(let r=0;r<Ef.length;r++){const i=Ef[r]+s;if(i in e)return Rl[t]=i}return t}const Tf="http://www.w3.org/1999/xlink";function wf(e,t,n,s,r,i=wv(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Tf,t.slice(6,t.length)):e.setAttributeNS(Tf,t,n):n==null||i&&!xp(n)?e.removeAttribute(t):e.setAttribute(t,i?"":fn(n)?String(n):n)}function Af(e,t,n,s,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Vm(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=xp(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(r||t)}function Is(e,t,n,s){e.addEventListener(t,n,s)}function vT(e,t,n,s){e.removeEventListener(t,n,s)}const bf=Symbol("_vei");function ET(e,t,n,s,r=null){const i=e[bf]||(e[bf]={}),a=i[t];if(s&&a)a.value=s;else{const[l,c]=TT(t);if(s){const h=i[t]=bT(s,r);Is(e,l,h,c)}else a&&(vT(e,l,a,c),i[t]=void 0)}}const If=/(?:Once|Passive|Capture)$/;function TT(e){let t;if(If.test(e)){t={};let s;for(;s=e.match(If);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):as(e.slice(2)),t]}let Dl=0;const wT=Promise.resolve(),AT=()=>Dl||(wT.then(()=>Dl=0),Dl=Date.now());function bT(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;dn(IT(s,n.value),t,5,[s])};return n.value=e,n.attached=AT(),n}function IT(e,t){if(ht(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Sf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ST=(e,t,n,s,r,i)=>{const a=r==="svg";t==="class"?dT(e,s,a):t==="style"?_T(e,n,s):_a(t)?qc(t)||ET(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):CT(e,t,s,a))?(Af(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&wf(e,t,s,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Kt(s))?Af(e,Yn(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),wf(e,t,s,a))};function CT(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Sf(t)&&mt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Sf(t)&&Kt(n)?!1:t in e}const Qo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ht(t)?n=>Ro(t,n):t};function RT(e){e.target.composing=!0}function Cf(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const fr=Symbol("_assign"),ws={created(e,{modifiers:{lazy:t,trim:n,number:s}},r){e[fr]=Qo(r);const i=s||r.props&&r.props.type==="number";Is(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=jo(l)),e[fr](l)}),n&&Is(e,"change",()=>{e.value=e.value.trim()}),t||(Is(e,"compositionstart",RT),Is(e,"compositionend",Cf),Is(e,"change",Cf))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},a){if(e[fr]=Qo(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?jo(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||r&&e.value.trim()===c)||(e.value=c))}},DT={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const r=ya(t);Is(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?jo(Yo(a)):Yo(a));e[fr](e.multiple?r?new Set(i):i:i[0]),e._assigning=!0,tm(()=>{e._assigning=!1})}),e[fr]=Qo(s)},mounted(e,{value:t}){Rf(e,t)},beforeUpdate(e,t,n){e[fr]=Qo(n)},updated(e,{value:t}){e._assigning||Rf(e,t)}};function Rf(e,t){const n=e.multiple,s=ht(t);if(!(n&&!s&&!ya(t))){for(let r=0,i=e.options.length;r<i;r++){const a=e.options[r],l=Yo(a);if(n)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(h=>String(h)===String(l)):a.selected=bv(t,l)>-1}else a.selected=t.has(l);else if(wa(Yo(a),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Yo(e){return"_value"in e?e._value:e.value}const PT={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},OT=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=as(r.key);if(t.some(a=>a===i||PT[a]===i))return e(r)})},NT=we({patchProp:ST},hT);let Df;function VT(){return Df||(Df=xE(NT))}const xT=(...e)=>{const t=VT().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=LT(s);if(!r)return;const i=t._component;!mt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=n(r,!1,MT(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t};function MT(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function LT(e){return Kt(e)?document.querySelector(e):e}const kT=()=>{};var Pf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},$T=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=e[n++],a=e[n++],l=e[n++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Mm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const i=e[r],a=r+1<e.length,l=a?e[r+1]:0,c=r+2<e.length,h=c?e[r+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,E=h&63;c||(E=64,a||(v=64)),s.push(n[d],n[m],n[v],n[E])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xm(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):$T(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const i=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const m=r<e.length?n[e.charAt(r)]:64;if(++r,i==null||l==null||h==null||m==null)throw new FT;const v=i<<2|l>>4;if(s.push(v),h!==64){const E=l<<4&240|h>>2;if(s.push(E),m!==64){const P=h<<6&192|m;s.push(P)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class FT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UT=function(e){const t=xm(e);return Mm.encodeByteArray(t,!0)},Xo=function(e){return UT(e).replace(/\./g,"")},BT=function(e){try{return Mm.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=()=>jT().__FIREBASE_DEFAULTS__,KT=()=>{if(typeof process>"u"||typeof Pf>"u")return;const e=Pf.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},qT=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&BT(e[1]);return t&&JSON.parse(t)},ou=()=>{try{return kT()||HT()||KT()||qT()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},WT=e=>{var t,n;return(n=(t=ou())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},zT=e=>{const t=WT(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Lm=()=>{var e;return(e=ou())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Xo(JSON.stringify(n)),Xo(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XT(){var e;const t=(e=ou())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JT(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function ZT(){return!XT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function km(){try{return typeof indexedDB=="object"}catch{return!1}}function $m(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;t(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}function tw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="FirebaseError";class us extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=ew,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Da.prototype.create)}}class Da{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},r=`${this.service}/${t}`,i=this.errors[t],a=i?nw(i,s):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new us(r,l,s)}}function nw(e,t){return e.replace(sw,(n,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const sw=/\{\$([^}]+)}/g;function mr(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const i=e[r],a=t[r];if(Of(i)&&Of(a)){if(!mr(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Of(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=1e3,iw=2,ow=4*60*60*1e3,aw=.5;function Nf(e,t=rw,n=iw){const s=t*Math.pow(n,e),r=Math.round(aw*s*(Math.random()-.5)*2);return Math.min(ow,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(e){return e&&e._delegate?e._delegate:e}class Sn{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new GT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(uw(t))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(t=bs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=bs){return this.instances.has(t)}getOptions(t=bs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&a.resolve(r)}return r}onInit(t,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(t),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&t(a,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cw(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=bs){return this.component?this.component.multipleInstances?t:bs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cw(e){return e===bs?void 0:e}function uw(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new lw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(At||(At={}));const fw={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},dw=At.INFO,pw={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},mw=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),r=pw[t];if(r)console[r](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class au{constructor(t){this.name=t,this._logLevel=dw,this._logHandler=mw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in At))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?fw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...t),this._logHandler(this,At.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...t),this._logHandler(this,At.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,At.INFO,...t),this._logHandler(this,At.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,At.WARN,...t),this._logHandler(this,At.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...t),this._logHandler(this,At.ERROR,...t)}}const gw=(e,t)=>t.some(n=>e instanceof n);let Vf,xf;function _w(){return Vf||(Vf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yw(){return xf||(xf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fm=new WeakMap,mc=new WeakMap,Um=new WeakMap,Pl=new WeakMap,lu=new WeakMap;function vw(e){const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(qn(e.result)),r()},a=()=>{s(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Fm.set(n,e)}).catch(()=>{}),lu.set(t,e),t}function Ew(e){if(mc.has(e))return;const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});mc.set(e,t)}let gc={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return mc.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Um.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Tw(e){gc=e(gc)}function ww(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Ol(this),t,...n);return Um.set(s,t.sort?t.sort():[t]),qn(s)}:yw().includes(e)?function(...t){return e.apply(Ol(this),t),qn(Fm.get(this))}:function(...t){return qn(e.apply(Ol(this),t))}}function Aw(e){return typeof e=="function"?ww(e):(e instanceof IDBTransaction&&Ew(e),gw(e,_w())?new Proxy(e,gc):e)}function qn(e){if(e instanceof IDBRequest)return vw(e);if(Pl.has(e))return Pl.get(e);const t=Aw(e);return t!==e&&(Pl.set(e,t),lu.set(t,e)),t}const Ol=e=>lu.get(e);function Bm(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(e,t),l=qn(a);return s&&a.addEventListener("upgradeneeded",c=>{s(qn(a.result),c.oldVersion,c.newVersion,qn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const bw=["get","getKey","getAll","getAllKeys","count"],Iw=["put","add","delete","clear"],Nl=new Map;function Mf(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Nl.get(t))return Nl.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=Iw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||bw.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return Nl.set(t,i),i}Tw(e=>({...e,get:(t,n,s)=>Mf(t,n)||e.get(t,n,s),has:(t,n)=>!!Mf(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Cw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Cw(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const _c="@firebase/app",Lf="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new au("@firebase/app"),Rw="@firebase/app-compat",Dw="@firebase/analytics-compat",Pw="@firebase/analytics",Ow="@firebase/app-check-compat",Nw="@firebase/app-check",Vw="@firebase/auth",xw="@firebase/auth-compat",Mw="@firebase/database",Lw="@firebase/data-connect",kw="@firebase/database-compat",$w="@firebase/functions",Fw="@firebase/functions-compat",Uw="@firebase/installations",Bw="@firebase/installations-compat",jw="@firebase/messaging",Hw="@firebase/messaging-compat",Kw="@firebase/performance",qw="@firebase/performance-compat",Ww="@firebase/remote-config",zw="@firebase/remote-config-compat",Gw="@firebase/storage",Qw="@firebase/storage-compat",Yw="@firebase/firestore",Xw="@firebase/vertexai",Jw="@firebase/firestore-compat",Zw="firebase",tA="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="[DEFAULT]",eA={[_c]:"fire-core",[Rw]:"fire-core-compat",[Pw]:"fire-analytics",[Dw]:"fire-analytics-compat",[Nw]:"fire-app-check",[Ow]:"fire-app-check-compat",[Vw]:"fire-auth",[xw]:"fire-auth-compat",[Mw]:"fire-rtdb",[Lw]:"fire-data-connect",[kw]:"fire-rtdb-compat",[$w]:"fire-fn",[Fw]:"fire-fn-compat",[Uw]:"fire-iid",[Bw]:"fire-iid-compat",[jw]:"fire-fcm",[Hw]:"fire-fcm-compat",[Kw]:"fire-perf",[qw]:"fire-perf-compat",[Ww]:"fire-rc",[zw]:"fire-rc-compat",[Gw]:"fire-gcs",[Qw]:"fire-gcs-compat",[Yw]:"fire-fst",[Jw]:"fire-fst-compat",[Xw]:"fire-vertex","fire-js":"fire-js",[Zw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Map,nA=new Map,vc=new Map;function kf(e,t){try{e.container.addComponent(t)}catch(n){Cn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Xn(e){const t=e.name;if(vc.has(t))return Cn.debug(`There were multiple attempts to register component ${t}.`),!1;vc.set(t,e);for(const n of Jo.values())kf(n,e);for(const n of nA.values())kf(n,e);return!0}function Mi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function sA(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wn=new Da("app","Firebase",rA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=tA;function jm(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:yc,automaticDataCollectionEnabled:!1},t),r=s.name;if(typeof r!="string"||!r)throw Wn.create("bad-app-name",{appName:String(r)});if(n||(n=Lm()),!n)throw Wn.create("no-options");const i=Jo.get(r);if(i){if(mr(n,i.options)&&mr(s,i.config))return i;throw Wn.create("duplicate-app",{appName:r})}const a=new hw(r);for(const c of vc.values())a.addComponent(c);const l=new iA(n,s,a);return Jo.set(r,l),l}function Hm(e=yc){const t=Jo.get(e);if(!t&&e===yc&&Lm())return jm();if(!t)throw Wn.create("no-app",{appName:e});return t}function on(e,t,n){var s;let r=(s=eA[e])!==null&&s!==void 0?s:e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${t}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cn.warn(l.join(" "));return}Xn(new Sn(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firebase-heartbeat-database",lA=1,Ii="firebase-heartbeat-store";let Vl=null;function Km(){return Vl||(Vl=Bm(aA,lA,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ii)}catch(n){console.warn(n)}}}}).catch(e=>{throw Wn.create("idb-open",{originalErrorMessage:e.message})})),Vl}async function cA(e){try{const n=(await Km()).transaction(Ii),s=await n.objectStore(Ii).get(qm(e));return await n.done,s}catch(t){if(t instanceof us)Cn.warn(t.message);else{const n=Wn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Cn.warn(n.message)}}}async function $f(e,t){try{const s=(await Km()).transaction(Ii,"readwrite");await s.objectStore(Ii).put(t,qm(e)),await s.done}catch(n){if(n instanceof us)Cn.warn(n.message);else{const s=Wn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(s.message)}}}function qm(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=1024,hA=30;class fA{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ff();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>hA){const a=mA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Cn.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ff(),{heartbeatsToSend:s,unsentEntries:r}=dA(this._heartbeatsCache.heartbeats),i=Xo(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Cn.warn(n),""}}}function Ff(){return new Date().toISOString().substring(0,10)}function dA(e,t=uA){const n=[];let s=e.slice();for(const r of e){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),Uf(n)>t){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Uf(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class pA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return km()?$m().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return $f(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return $f(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Uf(e){return Xo(JSON.stringify({version:2,heartbeats:e})).length}function mA(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(e){Xn(new Sn("platform-logger",t=>new Sw(t),"PRIVATE")),Xn(new Sn("heartbeat",t=>new fA(t),"PRIVATE")),on(_c,Lf,e),on(_c,Lf,"esm2017"),on("fire-js","")}gA("");var Bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zn,Wm;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,g){function _(){}_.prototype=g.prototype,A.D=g.prototype,A.prototype=new _,A.prototype.constructor=A,A.C=function(w,b,S){for(var y=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)y[$t-2]=arguments[$t];return g.prototype[b].apply(w,y)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,g,_){_||(_=0);var w=Array(16);if(typeof g=="string")for(var b=0;16>b;++b)w[b]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(b=0;16>b;++b)w[b]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=A.g[0],_=A.g[1],b=A.g[2];var S=A.g[3],y=g+(S^_&(b^S))+w[0]+3614090360&4294967295;g=_+(y<<7&4294967295|y>>>25),y=S+(b^g&(_^b))+w[1]+3905402710&4294967295,S=g+(y<<12&4294967295|y>>>20),y=b+(_^S&(g^_))+w[2]+606105819&4294967295,b=S+(y<<17&4294967295|y>>>15),y=_+(g^b&(S^g))+w[3]+3250441966&4294967295,_=b+(y<<22&4294967295|y>>>10),y=g+(S^_&(b^S))+w[4]+4118548399&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(b^g&(_^b))+w[5]+1200080426&4294967295,S=g+(y<<12&4294967295|y>>>20),y=b+(_^S&(g^_))+w[6]+2821735955&4294967295,b=S+(y<<17&4294967295|y>>>15),y=_+(g^b&(S^g))+w[7]+4249261313&4294967295,_=b+(y<<22&4294967295|y>>>10),y=g+(S^_&(b^S))+w[8]+1770035416&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(b^g&(_^b))+w[9]+2336552879&4294967295,S=g+(y<<12&4294967295|y>>>20),y=b+(_^S&(g^_))+w[10]+4294925233&4294967295,b=S+(y<<17&4294967295|y>>>15),y=_+(g^b&(S^g))+w[11]+2304563134&4294967295,_=b+(y<<22&4294967295|y>>>10),y=g+(S^_&(b^S))+w[12]+1804603682&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(b^g&(_^b))+w[13]+4254626195&4294967295,S=g+(y<<12&4294967295|y>>>20),y=b+(_^S&(g^_))+w[14]+2792965006&4294967295,b=S+(y<<17&4294967295|y>>>15),y=_+(g^b&(S^g))+w[15]+1236535329&4294967295,_=b+(y<<22&4294967295|y>>>10),y=g+(b^S&(_^b))+w[1]+4129170786&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^b&(g^_))+w[6]+3225465664&4294967295,S=g+(y<<9&4294967295|y>>>23),y=b+(g^_&(S^g))+w[11]+643717713&4294967295,b=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(b^S))+w[0]+3921069994&4294967295,_=b+(y<<20&4294967295|y>>>12),y=g+(b^S&(_^b))+w[5]+3593408605&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^b&(g^_))+w[10]+38016083&4294967295,S=g+(y<<9&4294967295|y>>>23),y=b+(g^_&(S^g))+w[15]+3634488961&4294967295,b=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(b^S))+w[4]+3889429448&4294967295,_=b+(y<<20&4294967295|y>>>12),y=g+(b^S&(_^b))+w[9]+568446438&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^b&(g^_))+w[14]+3275163606&4294967295,S=g+(y<<9&4294967295|y>>>23),y=b+(g^_&(S^g))+w[3]+4107603335&4294967295,b=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(b^S))+w[8]+1163531501&4294967295,_=b+(y<<20&4294967295|y>>>12),y=g+(b^S&(_^b))+w[13]+2850285829&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^b&(g^_))+w[2]+4243563512&4294967295,S=g+(y<<9&4294967295|y>>>23),y=b+(g^_&(S^g))+w[7]+1735328473&4294967295,b=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(b^S))+w[12]+2368359562&4294967295,_=b+(y<<20&4294967295|y>>>12),y=g+(_^b^S)+w[5]+4294588738&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^b)+w[8]+2272392833&4294967295,S=g+(y<<11&4294967295|y>>>21),y=b+(S^g^_)+w[11]+1839030562&4294967295,b=S+(y<<16&4294967295|y>>>16),y=_+(b^S^g)+w[14]+4259657740&4294967295,_=b+(y<<23&4294967295|y>>>9),y=g+(_^b^S)+w[1]+2763975236&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^b)+w[4]+1272893353&4294967295,S=g+(y<<11&4294967295|y>>>21),y=b+(S^g^_)+w[7]+4139469664&4294967295,b=S+(y<<16&4294967295|y>>>16),y=_+(b^S^g)+w[10]+3200236656&4294967295,_=b+(y<<23&4294967295|y>>>9),y=g+(_^b^S)+w[13]+681279174&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^b)+w[0]+3936430074&4294967295,S=g+(y<<11&4294967295|y>>>21),y=b+(S^g^_)+w[3]+3572445317&4294967295,b=S+(y<<16&4294967295|y>>>16),y=_+(b^S^g)+w[6]+76029189&4294967295,_=b+(y<<23&4294967295|y>>>9),y=g+(_^b^S)+w[9]+3654602809&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^b)+w[12]+3873151461&4294967295,S=g+(y<<11&4294967295|y>>>21),y=b+(S^g^_)+w[15]+530742520&4294967295,b=S+(y<<16&4294967295|y>>>16),y=_+(b^S^g)+w[2]+3299628645&4294967295,_=b+(y<<23&4294967295|y>>>9),y=g+(b^(_|~S))+w[0]+4096336452&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~b))+w[7]+1126891415&4294967295,S=g+(y<<10&4294967295|y>>>22),y=b+(g^(S|~_))+w[14]+2878612391&4294967295,b=S+(y<<15&4294967295|y>>>17),y=_+(S^(b|~g))+w[5]+4237533241&4294967295,_=b+(y<<21&4294967295|y>>>11),y=g+(b^(_|~S))+w[12]+1700485571&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~b))+w[3]+2399980690&4294967295,S=g+(y<<10&4294967295|y>>>22),y=b+(g^(S|~_))+w[10]+4293915773&4294967295,b=S+(y<<15&4294967295|y>>>17),y=_+(S^(b|~g))+w[1]+2240044497&4294967295,_=b+(y<<21&4294967295|y>>>11),y=g+(b^(_|~S))+w[8]+1873313359&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~b))+w[15]+4264355552&4294967295,S=g+(y<<10&4294967295|y>>>22),y=b+(g^(S|~_))+w[6]+2734768916&4294967295,b=S+(y<<15&4294967295|y>>>17),y=_+(S^(b|~g))+w[13]+1309151649&4294967295,_=b+(y<<21&4294967295|y>>>11),y=g+(b^(_|~S))+w[4]+4149444226&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~b))+w[11]+3174756917&4294967295,S=g+(y<<10&4294967295|y>>>22),y=b+(g^(S|~_))+w[2]+718787259&4294967295,b=S+(y<<15&4294967295|y>>>17),y=_+(S^(b|~g))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+g&4294967295,A.g[1]=A.g[1]+(b+(y<<21&4294967295|y>>>11))&4294967295,A.g[2]=A.g[2]+b&4294967295,A.g[3]=A.g[3]+S&4294967295}s.prototype.u=function(A,g){g===void 0&&(g=A.length);for(var _=g-this.blockSize,w=this.B,b=this.h,S=0;S<g;){if(b==0)for(;S<=_;)r(this,A,S),S+=this.blockSize;if(typeof A=="string"){for(;S<g;)if(w[b++]=A.charCodeAt(S++),b==this.blockSize){r(this,w),b=0;break}}else for(;S<g;)if(w[b++]=A[S++],b==this.blockSize){r(this,w),b=0;break}}this.h=b,this.o+=g},s.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var g=1;g<A.length-8;++g)A[g]=0;var _=8*this.o;for(g=A.length-8;g<A.length;++g)A[g]=_&255,_/=256;for(this.u(A),A=Array(16),g=_=0;4>g;++g)for(var w=0;32>w;w+=8)A[_++]=this.g[g]>>>w&255;return A};function i(A,g){var _=l;return Object.prototype.hasOwnProperty.call(_,A)?_[A]:_[A]=g(A)}function a(A,g){this.h=g;for(var _=[],w=!0,b=A.length-1;0<=b;b--){var S=A[b]|0;w&&S==g||(_[b]=S,w=!1)}this.g=_}var l={};function c(A){return-128<=A&&128>A?i(A,function(g){return new a([g|0],0>g?-1:0)}):new a([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return N(h(-A));for(var g=[],_=1,w=0;A>=_;w++)g[w]=A/_|0,_*=4294967296;return new a(g,0)}function d(A,g){if(A.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(A.charAt(0)=="-")return N(d(A.substring(1),g));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(g,8)),w=m,b=0;b<A.length;b+=8){var S=Math.min(8,A.length-b),y=parseInt(A.substring(b,b+S),g);8>S?(S=h(Math.pow(g,S)),w=w.j(S).add(h(y))):(w=w.j(_),w=w.add(h(y)))}return w}var m=c(0),v=c(1),E=c(16777216);e=a.prototype,e.m=function(){if(O(this))return-N(this).m();for(var A=0,g=1,_=0;_<this.g.length;_++){var w=this.i(_);A+=(0<=w?w:4294967296+w)*g,g*=4294967296}return A},e.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(P(this))return"0";if(O(this))return"-"+N(this).toString(A);for(var g=h(Math.pow(A,6)),_=this,w="";;){var b=L(_,g).g;_=K(_,b.j(g));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(A);if(_=b,P(_))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},e.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function P(A){if(A.h!=0)return!1;for(var g=0;g<A.g.length;g++)if(A.g[g]!=0)return!1;return!0}function O(A){return A.h==-1}e.l=function(A){return A=K(this,A),O(A)?-1:P(A)?0:1};function N(A){for(var g=A.g.length,_=[],w=0;w<g;w++)_[w]=~A.g[w];return new a(_,~A.h).add(v)}e.abs=function(){return O(this)?N(this):this},e.add=function(A){for(var g=Math.max(this.g.length,A.g.length),_=[],w=0,b=0;b<=g;b++){var S=w+(this.i(b)&65535)+(A.i(b)&65535),y=(S>>>16)+(this.i(b)>>>16)+(A.i(b)>>>16);w=y>>>16,S&=65535,y&=65535,_[b]=y<<16|S}return new a(_,_[_.length-1]&-2147483648?-1:0)};function K(A,g){return A.add(N(g))}e.j=function(A){if(P(this)||P(A))return m;if(O(this))return O(A)?N(this).j(N(A)):N(N(this).j(A));if(O(A))return N(this.j(N(A)));if(0>this.l(E)&&0>A.l(E))return h(this.m()*A.m());for(var g=this.g.length+A.g.length,_=[],w=0;w<2*g;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<A.g.length;b++){var S=this.i(w)>>>16,y=this.i(w)&65535,$t=A.i(b)>>>16,Qt=A.i(b)&65535;_[2*w+2*b]+=y*Qt,W(_,2*w+2*b),_[2*w+2*b+1]+=S*Qt,W(_,2*w+2*b+1),_[2*w+2*b+1]+=y*$t,W(_,2*w+2*b+1),_[2*w+2*b+2]+=S*$t,W(_,2*w+2*b+2)}for(w=0;w<g;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=g;w<2*g;w++)_[w]=0;return new a(_,0)};function W(A,g){for(;(A[g]&65535)!=A[g];)A[g+1]+=A[g]>>>16,A[g]&=65535,g++}function G(A,g){this.g=A,this.h=g}function L(A,g){if(P(g))throw Error("division by zero");if(P(A))return new G(m,m);if(O(A))return g=L(N(A),g),new G(N(g.g),N(g.h));if(O(g))return g=L(A,N(g)),new G(N(g.g),g.h);if(30<A.g.length){if(O(A)||O(g))throw Error("slowDivide_ only works with positive integers.");for(var _=v,w=g;0>=w.l(A);)_=tt(_),w=tt(w);var b=nt(_,1),S=nt(w,1);for(w=nt(w,2),_=nt(_,2);!P(w);){var y=S.add(w);0>=y.l(A)&&(b=b.add(_),S=y),w=nt(w,1),_=nt(_,1)}return g=K(A,b.j(g)),new G(b,g)}for(b=m;0<=A.l(g);){for(_=Math.max(1,Math.floor(A.m()/g.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=h(_),y=S.j(g);O(y)||0<y.l(A);)_-=w,S=h(_),y=S.j(g);P(S)&&(S=v),b=b.add(S),A=K(A,y)}return new G(b,A)}e.A=function(A){return L(this,A).h},e.and=function(A){for(var g=Math.max(this.g.length,A.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)&A.i(w);return new a(_,this.h&A.h)},e.or=function(A){for(var g=Math.max(this.g.length,A.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)|A.i(w);return new a(_,this.h|A.h)},e.xor=function(A){for(var g=Math.max(this.g.length,A.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)^A.i(w);return new a(_,this.h^A.h)};function tt(A){for(var g=A.g.length+1,_=[],w=0;w<g;w++)_[w]=A.i(w)<<1|A.i(w-1)>>>31;return new a(_,A.h)}function nt(A,g){var _=g>>5;g%=32;for(var w=A.g.length-_,b=[],S=0;S<w;S++)b[S]=0<g?A.i(S+_)>>>g|A.i(S+_+1)<<32-g:A.i(S+_);return new a(b,A.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Wm=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,zn=a}).apply(typeof Bf<"u"?Bf:typeof self<"u"?self:typeof window<"u"?window:{});var fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zm,si,Gm,Vo,Ec,Qm,Ym,Xm;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){return o==Array.prototype||o==Object.prototype||(o[u]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof fo=="object"&&fo];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=n(this);function r(o,u){if(u)t:{var f=s;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in f))break t;f=f[C]}o=o[o.length-1],p=f[o],u=u(p),u!=p&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var f=0,p=!1,C={next:function(){if(!p&&f<o.length){var R=f++;return{value:u(R,o[R]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(o){return o||function(){return i(this,function(u,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,f){return o.call.apply(o.bind,arguments)}function m(o,u,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(u,C)}}return function(){return o.apply(u,arguments)}}function v(o,u,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,v.apply(null,arguments)}function E(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function P(o,u){function f(){}f.prototype=u.prototype,o.aa=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,C,R){for(var z=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)z[Dt-2]=arguments[Dt];return u.prototype[C].apply(p,z)}}function O(o){const u=o.length;if(0<u){const f=Array(u);for(let p=0;p<u;p++)f[p]=o[p];return f}return[]}function N(o,u){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(c(p)){const C=o.length||0,R=p.length||0;o.length=C+R;for(let z=0;z<R;z++)o[C+z]=p[z]}else o.push(p)}}class K{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function W(o){return/^[\s\xa0]*$/.test(o)}function G(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function L(o){return L[" "](o),o}L[" "]=function(){};var tt=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function nt(o,u,f){for(const p in o)u.call(f,o[p],p,o)}function A(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function g(o){const u={};for(const f in o)u[f]=o[f];return u}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,u){let f,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(f in p)o[f]=p[f];for(let R=0;R<_.length;R++)f=_[R],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function b(o){var u=1;o=o.split(":");const f=[];for(;0<u&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function S(o){l.setTimeout(()=>{throw o},0)}function y(){var o=Ut;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class $t{constructor(){this.h=this.g=null}add(u,f){const p=Qt.get();p.set(u,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Qt=new K(()=>new _t,o=>o.reset());class _t{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,yt=!1,Ut=new $t,Ae=()=>{const o=l.Promise.resolve(void 0);ct=()=>{o.then(me)}};var me=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(f){S(f)}var u=Qt;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}yt=!1};function Rt(){this.s=this.s,this.C=this.C}Rt.prototype.s=!1,Rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,u),l.removeEventListener("test",f,u)}catch{}return o}();function H(o,u){if(Ot.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(tt){t:{try{L(u.nodeName);var C=!0;break t}catch{}C=!1}C||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:x[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&H.aa.h.call(this)}}P(H,Ot);var x={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),gt=0;function Nt(o,u,f,p,C){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!p,this.ha=C,this.key=++gt,this.da=this.fa=!1}function Vt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function re(o){this.src=o,this.g={},this.h=0}re.prototype.add=function(o,u,f,p,C){var R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);var z=I(o,u,p,C);return-1<z?(u=o[z],f||(u.fa=!1)):(u=new Nt(u,this.src,R,!!p,C),u.fa=f,o.push(u)),u};function T(o,u){var f=u.type;if(f in o.g){var p=o.g[f],C=Array.prototype.indexOf.call(p,u,void 0),R;(R=0<=C)&&Array.prototype.splice.call(p,C,1),R&&(Vt(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function I(o,u,f,p){for(var C=0;C<o.length;++C){var R=o[C];if(!R.da&&R.listener==u&&R.capture==!!f&&R.ha==p)return C}return-1}var D="closure_lm_"+(1e6*Math.random()|0),B={};function M(o,u,f,p,C){if(Array.isArray(u)){for(var R=0;R<u.length;R++)M(o,u[R],f,p,C);return null}return f=lt(f),o&&o[X]?o.K(u,f,h(p)?!!p.capture:!1,C):F(o,u,f,!1,p,C)}function F(o,u,f,p,C,R){if(!u)throw Error("Invalid event type");var z=h(C)?!!C.capture:!!C,Dt=Y(o);if(Dt||(o[D]=Dt=new re(o)),f=Dt.add(u,f,p,z,R),f.proxy)return f;if(p=Q(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)Ue||(C=z),C===void 0&&(C=!1),o.addEventListener(u.toString(),p,C);else if(o.attachEvent)o.attachEvent(k(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Q(){function o(f){return u.call(o.src,o.listener,f)}const u=rt;return o}function q(o,u,f,p,C){if(Array.isArray(u))for(var R=0;R<u.length;R++)q(o,u[R],f,p,C);else p=h(p)?!!p.capture:!!p,f=lt(f),o&&o[X]?(o=o.i,u=String(u).toString(),u in o.g&&(R=o.g[u],f=I(R,f,p,C),-1<f&&(Vt(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete o.g[u],o.h--)))):o&&(o=Y(o))&&(u=o.g[u.toString()],o=-1,u&&(o=I(u,f,p,C)),(f=-1<o?u[o]:null)&&j(f))}function j(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[X])T(u.i,o);else{var f=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(f,p,o.capture):u.detachEvent?u.detachEvent(k(f),p):u.addListener&&u.removeListener&&u.removeListener(p),(f=Y(u))?(T(f,o),f.h==0&&(f.src=null,u[D]=null)):Vt(o)}}}function k(o){return o in B?B[o]:B[o]="on"+o}function rt(o,u){if(o.da)o=!0;else{u=new H(u,this);var f=o.listener,p=o.ha||o.src;o.fa&&j(o),o=f.call(p,u)}return o}function Y(o){return o=o[D],o instanceof re?o:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(o){return typeof o=="function"?o:(o[et]||(o[et]=function(u){return o.handleEvent(u)}),o[et])}function it(){Rt.call(this),this.i=new re(this),this.M=this,this.F=null}P(it,Rt),it.prototype[X]=!0,it.prototype.removeEventListener=function(o,u,f,p){q(this,o,u,f,p)};function ft(o,u){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Ot(u,o);else if(u instanceof Ot)u.target=u.target||o;else{var C=u;u=new Ot(p,o),w(u,C)}if(C=!0,f)for(var R=f.length-1;0<=R;R--){var z=u.g=f[R];C=vt(z,p,!0,u)&&C}if(z=u.g=o,C=vt(z,p,!0,u)&&C,C=vt(z,p,!1,u)&&C,f)for(R=0;R<f.length;R++)z=u.g=f[R],C=vt(z,p,!1,u)&&C}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var f=o.g[u],p=0;p<f.length;p++)Vt(f[p]);delete o.g[u],o.h--}}this.F=null},it.prototype.K=function(o,u,f,p){return this.i.add(String(o),u,!1,f,p)},it.prototype.L=function(o,u,f,p){return this.i.add(String(o),u,!0,f,p)};function vt(o,u,f,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,R=0;R<u.length;++R){var z=u[R];if(z&&!z.da&&z.capture==f){var Dt=z.listener,te=z.ha||z.src;z.fa&&T(o.i,z),C=Dt.call(te,p)!==!1&&C}}return C&&!p.defaultPrevented}function ie(o,u,f){if(typeof o=="function")f&&(o=v(o,f));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Jt(o){o.g=ie(()=>{o.g=null,o.i&&(o.i=!1,Jt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Be extends Rt{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Jt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(o){Rt.call(this),this.h=o,this.g={}}P(oe,Rt);var Vn=[];function Fr(o){nt(o.g,function(u,f){this.g.hasOwnProperty(f)&&j(u)},o),o.g={}}oe.prototype.N=function(){oe.aa.N.call(this),Fr(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=l.JSON.stringify,je=l.JSON.parse,Wi=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function il(){}il.prototype.h=null;function ah(o){return o.h||(o.h=o.i())}function lh(){}var Ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ol(){Ot.call(this,"d")}P(ol,Ot);function al(){Ot.call(this,"c")}P(al,Ot);var gs={},ch=null;function zi(){return ch=ch||new it}gs.La="serverreachability";function uh(o){Ot.call(this,gs.La,o)}P(uh,Ot);function Br(o){const u=zi();ft(u,new uh(u))}gs.STAT_EVENT="statevent";function hh(o,u){Ot.call(this,gs.STAT_EVENT,o),this.stat=u}P(hh,Ot);function ge(o){const u=zi();ft(u,new hh(u,o))}gs.Ma="timingevent";function fh(o,u){Ot.call(this,gs.Ma,o),this.size=u}P(fh,Ot);function jr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Hr(){this.g=!0}Hr.prototype.xa=function(){this.g=!1};function Hy(o,u,f,p,C,R){o.info(function(){if(o.g)if(R)for(var z="",Dt=R.split("&"),te=0;te<Dt.length;te++){var bt=Dt[te].split("=");if(1<bt.length){var ae=bt[0];bt=bt[1];var le=ae.split("_");z=2<=le.length&&le[1]=="type"?z+(ae+"="+bt+"&"):z+(ae+"=redacted&")}}else z=null;else z=R;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+u+`
`+f+`
`+z})}function Ky(o,u,f,p,C,R,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+u+`
`+f+`
`+R+" "+z})}function qs(o,u,f,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Wy(o,f)+(p?" "+p:"")})}function qy(o,u){o.info(function(){return"TIMEOUT: "+u})}Hr.prototype.info=function(){};function Wy(o,u){if(!o.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var z=1;z<C.length;z++)C[z]=""}}}}return Zt(f)}catch{return u}}var Gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ll;function Qi(){}P(Qi,il),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},ll=new Qi;function xn(o,u,f,p){this.j=o,this.i=u,this.l=f,this.R=p||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ph}function ph(){this.i=null,this.g="",this.h=!1}var mh={},cl={};function ul(o,u,f){o.L=1,o.v=Zi(yn(u)),o.m=f,o.P=!0,gh(o,null)}function gh(o,u){o.F=Date.now(),Yi(o),o.A=yn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Ph(f.i,"t",p),o.C=0,f=o.j.J,o.h=new ph,o.g=Gh(o.j,f?u:null,!o.m),0<o.O&&(o.M=new Be(v(o.Y,o,o.g),o.O)),u=o.U,f=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(Vn[0]=C.toString()),C=Vn);for(var R=0;R<C.length;R++){var z=M(f,C[R],p||u.handleEvent,!1,u.h||u);if(!z)break;u.g[z.key]=z}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Br(),Hy(o.i,o.u,o.A,o.l,o.R,o.m)}xn.prototype.ca=function(o){o=o.target;const u=this.M;u&&vn(o)==3?u.j():this.Y(o)},xn.prototype.Y=function(o){try{if(o==this.g)t:{const le=vn(this.g);var u=this.g.Ba();const Gs=this.g.Z();if(!(3>le)&&(le!=3||this.g&&(this.h.h||this.g.oa()||kh(this.g)))){this.J||le!=4||u==7||(u==8||0>=Gs?Br(3):Br(2)),hl(this);var f=this.g.Z();this.X=f;e:if(_h(this)){var p=kh(this.g);o="";var C=p.length,R=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_s(this),Kr(this);var z="";break e}this.h.i=new l.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(R&&u==C-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,Ky(this.i,this.u,this.A,this.l,this.R,le,f),this.o){if(this.T&&!this.K){e:{if(this.g){var Dt,te=this.g;if((Dt=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Dt)){var bt=Dt;break e}}bt=null}if(f=bt)qs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fl(this,f);else{this.o=!1,this.s=3,ge(12),_s(this),Kr(this);break t}}if(this.P){f=!0;let Qe;for(;!this.J&&this.C<z.length;)if(Qe=zy(this,z),Qe==cl){le==4&&(this.s=4,ge(14),f=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==mh){this.s=4,ge(15),qs(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else qs(this.i,this.l,Qe,null),fl(this,Qe);if(_h(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||z.length!=0||this.h.h||(this.s=1,ge(16),f=!1),this.o=this.o&&f,!f)qs(this.i,this.l,z,"[Invalid Chunked Response]"),_s(this),Kr(this);else if(0<z.length&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.ba&&!ae.M&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),yl(ae),ae.M=!0,ge(11))}}else qs(this.i,this.l,z,null),fl(this,z);le==4&&_s(this),this.o&&!this.J&&(le==4?Kh(this.j,this):(this.o=!1,Yi(this)))}else uv(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,ge(12)):(this.s=0,ge(13)),_s(this),Kr(this)}}}catch{}finally{}};function _h(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function zy(o,u){var f=o.C,p=u.indexOf(`
`,f);return p==-1?cl:(f=Number(u.substring(f,p)),isNaN(f)?mh:(p+=1,p+f>u.length?cl:(u=u.slice(p,p+f),o.C=p+f,u)))}xn.prototype.cancel=function(){this.J=!0,_s(this)};function Yi(o){o.S=Date.now()+o.I,yh(o,o.I)}function yh(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=jr(v(o.ba,o),u)}function hl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}xn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(qy(this.i,this.A),this.L!=2&&(Br(),ge(17)),_s(this),this.s=2,Kr(this)):yh(this,this.S-o)};function Kr(o){o.j.G==0||o.J||Kh(o.j,o)}function _s(o){hl(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Fr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function fl(o,u){try{var f=o.j;if(f.G!=0&&(f.g==o||dl(f.h,o))){if(!o.K&&dl(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)io(f),so(f);else break t;_l(f),ge(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=jr(v(f.Za,f),6e3));if(1>=Th(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else vs(f,11)}else if((o.K||f.g==o)&&io(f),!W(u))for(C=f.Da.g.parse(u),u=0;u<C.length;u++){let bt=C[u];if(f.T=bt[0],bt=bt[1],f.G==2)if(bt[0]=="c"){f.K=bt[1],f.ia=bt[2];const ae=bt[3];ae!=null&&(f.la=ae,f.j.info("VER="+f.la));const le=bt[4];le!=null&&(f.Aa=le,f.j.info("SVER="+f.Aa));const Gs=bt[5];Gs!=null&&typeof Gs=="number"&&0<Gs&&(p=1.5*Gs,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const Qe=o.g;if(Qe){const ao=Qe.g?Qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var R=p.h;R.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(pl(R,R.h),R.h=null))}if(p.D){const vl=Qe.g?Qe.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(p.ya=vl,Mt(p.I,p.D,vl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=zh(p,p.J?p.ia:null,p.W),z.K){wh(p.h,z);var Dt=z,te=p.L;te&&(Dt.I=te),Dt.B&&(hl(Dt),Yi(Dt)),p.g=z}else jh(p);0<f.i.length&&ro(f)}else bt[0]!="stop"&&bt[0]!="close"||vs(f,7);else f.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?vs(f,7):gl(f):bt[0]!="noop"&&f.l&&f.l.ta(bt),f.v=0)}}Br(4)}catch{}}var Gy=class{constructor(o,u){this.g=o,this.map=u}};function vh(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Eh(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Th(o){return o.h?1:o.g?o.g.size:0}function dl(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function pl(o,u){o.g?o.g.add(u):o.h=u}function wh(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}vh.prototype.cancel=function(){if(this.i=Ah(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ah(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.D);return u}return O(o.i)}function Qy(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],f=o.length,p=0;p<f;p++)u.push(o[p]);return u}u=[],f=0;for(p in o)u[f++]=o[p];return u}function Yy(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(const p in o)u[f++]=p;return u}}}function bh(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var f=Yy(o),p=Qy(o),C=p.length,R=0;R<C;R++)u.call(void 0,p[R],f&&f[R],o)}var Ih=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xy(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),C=null;if(0<=p){var R=o[f].substring(0,p);C=o[f].substring(p+1)}else R=o[f];u(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ys(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ys){this.h=o.h,Xi(this,o.j),this.o=o.o,this.g=o.g,Ji(this,o.s),this.l=o.l;var u=o.i,f=new zr;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),Sh(this,f),this.m=o.m}else o&&(u=String(o).match(Ih))?(this.h=!1,Xi(this,u[1]||"",!0),this.o=qr(u[2]||""),this.g=qr(u[3]||"",!0),Ji(this,u[4]),this.l=qr(u[5]||"",!0),Sh(this,u[6]||"",!0),this.m=qr(u[7]||"")):(this.h=!1,this.i=new zr(null,this.h))}ys.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Wr(u,Ch,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Wr(u,Ch,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Wr(f,f.charAt(0)=="/"?tv:Zy,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Wr(f,nv)),o.join("")};function yn(o){return new ys(o)}function Xi(o,u,f){o.j=f?qr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Ji(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Sh(o,u,f){u instanceof zr?(o.i=u,sv(o.i,o.h)):(f||(u=Wr(u,ev)),o.i=new zr(u,o.h))}function Mt(o,u,f){o.i.set(u,f)}function Zi(o){return Mt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function qr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Wr(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,Jy),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Jy(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ch=/[#\/\?@]/g,Zy=/[#\?:]/g,tv=/[#\?]/g,ev=/[#\?@]/g,nv=/#/g;function zr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Mn(o){o.g||(o.g=new Map,o.h=0,o.i&&Xy(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}e=zr.prototype,e.add=function(o,u){Mn(this),this.i=null,o=Ws(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function Rh(o,u){Mn(o),u=Ws(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Dh(o,u){return Mn(o),u=Ws(o,u),o.g.has(u)}e.forEach=function(o,u){Mn(this),this.g.forEach(function(f,p){f.forEach(function(C){o.call(u,C,p,this)},this)},this)},e.na=function(){Mn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let p=0;p<u.length;p++){const C=o[p];for(let R=0;R<C.length;R++)f.push(u[p])}return f},e.V=function(o){Mn(this);let u=[];if(typeof o=="string")Dh(this,o)&&(u=u.concat(this.g.get(Ws(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)u=u.concat(o[f])}return u},e.set=function(o,u){return Mn(this),this.i=null,o=Ws(this,o),Dh(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Ph(o,u,f){Rh(o,u),0<f.length&&(o.i=null,o.g.set(Ws(o,u),O(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var p=u[f];const R=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var C=R;z[p]!==""&&(C+="="+encodeURIComponent(String(z[p]))),o.push(C)}}return this.i=o.join("&")};function Ws(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function sv(o,u){u&&!o.j&&(Mn(o),o.i=null,o.g.forEach(function(f,p){var C=p.toLowerCase();p!=C&&(Rh(this,p),Ph(this,C,f))},o)),o.j=u}function rv(o,u){const f=new Hr;if(l.Image){const p=new Image;p.onload=E(Ln,f,"TestLoadImage: loaded",!0,u,p),p.onerror=E(Ln,f,"TestLoadImage: error",!1,u,p),p.onabort=E(Ln,f,"TestLoadImage: abort",!1,u,p),p.ontimeout=E(Ln,f,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function iv(o,u){const f=new Hr,p=new AbortController,C=setTimeout(()=>{p.abort(),Ln(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(R=>{clearTimeout(C),R.ok?Ln(f,"TestPingServer: ok",!0,u):Ln(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),Ln(f,"TestPingServer: error",!1,u)})}function Ln(o,u,f,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(f)}catch{}}function ov(){this.g=new Wi}function av(o,u,f){const p=f||"";try{bh(o,function(C,R){let z=C;h(C)&&(z=Zt(C)),u.push(p+R+"="+encodeURIComponent(z))})}catch(C){throw u.push(p+"type="+encodeURIComponent("_badmap")),C}}function to(o){this.l=o.Ub||null,this.j=o.eb||!1}P(to,il),to.prototype.g=function(){return new eo(this.l,this.j)},to.prototype.i=function(o){return function(){return o}}({});function eo(o,u){it.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(eo,it),e=eo.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Qr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oh(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oh(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Gr(this):Qr(this),this.readyState==3&&Oh(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Gr(this))},e.Qa=function(o){this.g&&(this.response=o,Gr(this))},e.ga=function(){this.g&&Gr(this)};function Gr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Qr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function Qr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Nh(o){let u="";return nt(o,function(f,p){u+=p,u+=":",u+=f,u+=`\r
`}),u}function ml(o,u,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=Nh(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Mt(o,u,f))}function Bt(o){it.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Bt,it);var lv=/^https?$/i,cv=["POST","PUT"];e=Bt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ll.g(),this.v=this.o?ah(this.o):ah(ll),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(R){Vh(this,R);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)f.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const R of p.keys())f.set(R,p.get(R));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(cv,u,void 0))||p||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,z]of f)this.g.setRequestHeader(R,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lh(this),this.u=!0,this.g.send(o),this.u=!1}catch(R){Vh(this,R)}};function Vh(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,xh(o),no(o)}function xh(o){o.A||(o.A=!0,ft(o,"complete"),ft(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ft(this,"complete"),ft(this,"abort"),no(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),no(this,!0)),Bt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Mh(this):this.bb())},e.bb=function(){Mh(this)};function Mh(o){if(o.h&&typeof a<"u"&&(!o.v[1]||vn(o)!=4||o.Z()!=2)){if(o.u&&vn(o)==4)ie(o.Ea,0,o);else if(ft(o,"readystatechange"),vn(o)==4){o.h=!1;try{const z=o.Z();t:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var f;if(!(f=u)){var p;if(p=z===0){var C=String(o.D).match(Ih)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!lv.test(C?C.toLowerCase():"")}f=p}if(f)ft(o,"complete"),ft(o,"success");else{o.m=6;try{var R=2<vn(o)?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.Z()+"]",xh(o)}}finally{no(o)}}}}function no(o,u){if(o.g){Lh(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ft(o,"ready");try{f.onreadystatechange=p}catch{}}}function Lh(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function vn(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),je(u)}};function kh(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function uv(o){const u={};o=(o.g&&2<=vn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(W(o[p]))continue;var f=b(o[p]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const R=u[C]||[];u[C]=R,R.push(f)}A(u,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function $h(o){this.Aa=0,this.i=[],this.j=new Hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yr("baseRetryDelayMs",5e3,o),this.cb=Yr("retryDelaySeedMs",1e4,o),this.Wa=Yr("forwardChannelMaxRetries",2,o),this.wa=Yr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new vh(o&&o.concurrentRequestLimit),this.Da=new ov,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=$h.prototype,e.la=8,e.G=1,e.connect=function(o,u,f,p){ge(0),this.W=o,this.H=u||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=zh(this,null,this.W),ro(this)};function gl(o){if(Fh(o),o.G==3){var u=o.U++,f=yn(o.I);if(Mt(f,"SID",o.K),Mt(f,"RID",u),Mt(f,"TYPE","terminate"),Xr(o,f),u=new xn(o,o.j,u),u.L=2,u.v=Zi(yn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=u.v,f=!0),f||(u.g=Gh(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Yi(u)}Wh(o)}function so(o){o.g&&(yl(o),o.g.cancel(),o.g=null)}function Fh(o){so(o),o.u&&(l.clearTimeout(o.u),o.u=null),io(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ro(o){if(!Eh(o.h)&&!o.s){o.s=!0;var u=o.Ga;ct||Ae(),yt||(ct(),yt=!0),Ut.add(u,o),o.B=0}}function hv(o,u){return Th(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=jr(v(o.Ga,o,u),qh(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new xn(this,this.j,o);let R=this.o;if(this.S&&(R?(R=g(R),w(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)t:{for(var u=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=f;break t}if(u===4096||f===this.i.length-1){u=f+1;break t}}u=1e3}else u=1e3;u=Bh(this,C,u),f=yn(this.I),Mt(f,"RID",o),Mt(f,"CVER",22),this.D&&Mt(f,"X-HTTP-Session-Id",this.D),Xr(this,f),R&&(this.O?u="headers="+encodeURIComponent(String(Nh(R)))+"&"+u:this.m&&ml(f,this.m,R)),pl(this.h,C),this.Ua&&Mt(f,"TYPE","init"),this.P?(Mt(f,"$req",u),Mt(f,"SID","null"),C.T=!0,ul(C,f,null)):ul(C,f,u),this.G=2}}else this.G==3&&(o?Uh(this,o):this.i.length==0||Eh(this.h)||Uh(this))};function Uh(o,u){var f;u?f=u.l:f=o.U++;const p=yn(o.I);Mt(p,"SID",o.K),Mt(p,"RID",f),Mt(p,"AID",o.T),Xr(o,p),o.m&&o.o&&ml(p,o.m,o.o),f=new xn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Bh(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),pl(o.h,f),ul(f,p,u)}function Xr(o,u){o.H&&nt(o.H,function(f,p){Mt(u,p,f)}),o.l&&bh({},function(f,p){Mt(u,p,f)})}function Bh(o,u,f){f=Math.min(o.i.length,f);var p=o.l?v(o.l.Na,o.l,o):null;t:{var C=o.i;let R=-1;for(;;){const z=["count="+f];R==-1?0<f?(R=C[0].g,z.push("ofs="+R)):R=0:z.push("ofs="+R);let Dt=!0;for(let te=0;te<f;te++){let bt=C[te].g;const ae=C[te].map;if(bt-=R,0>bt)R=Math.max(0,C[te].g-100),Dt=!1;else try{av(ae,z,"req"+bt+"_")}catch{p&&p(ae)}}if(Dt){p=z.join("&");break t}}}return o=o.i.splice(0,f),u.D=o,p}function jh(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;ct||Ae(),yt||(ct(),yt=!0),Ut.add(u,o),o.v=0}}function _l(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=jr(v(o.Fa,o),qh(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Hh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=jr(v(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ge(10),so(this),Hh(this))};function yl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Hh(o){o.g=new xn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=yn(o.qa);Mt(u,"RID","rpc"),Mt(u,"SID",o.K),Mt(u,"AID",o.T),Mt(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Mt(u,"TO",o.ja),Mt(u,"TYPE","xmlhttp"),Xr(o,u),o.m&&o.o&&ml(u,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Zi(yn(u)),f.m=null,f.P=!0,gh(f,o)}e.Za=function(){this.C!=null&&(this.C=null,so(this),_l(this),ge(19))};function io(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Kh(o,u){var f=null;if(o.g==u){io(o),yl(o),o.g=null;var p=2}else if(dl(o.h,u))f=u.D,wh(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var C=o.B;p=zi(),ft(p,new fh(p,f)),ro(o)}else jh(o);else if(C=u.s,C==3||C==0&&0<u.X||!(p==1&&hv(o,u)||p==2&&_l(o)))switch(f&&0<f.length&&(u=o.h,u.i=u.i.concat(f)),C){case 1:vs(o,5);break;case 4:vs(o,10);break;case 3:vs(o,6);break;default:vs(o,2)}}}function qh(o,u){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*u}function vs(o,u){if(o.j.info("Error code "+u),u==2){var f=v(o.fb,o),p=o.Xa;const C=!p;p=new ys(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Xi(p,"https"),Zi(p),C?rv(p.toString(),f):iv(p.toString(),f)}else ge(2);o.G=0,o.l&&o.l.sa(u),Wh(o),Fh(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function Wh(o){if(o.G=0,o.ka=[],o.l){const u=Ah(o.h);(u.length!=0||o.i.length!=0)&&(N(o.ka,u),N(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function zh(o,u,f){var p=f instanceof ys?yn(f):new ys(f);if(p.g!="")u&&(p.g=u+"."+p.g),Ji(p,p.s);else{var C=l.location;p=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var R=new ys(null);p&&Xi(R,p),u&&(R.g=u),C&&Ji(R,C),f&&(R.l=f),p=R}return f=o.D,u=o.ya,f&&u&&Mt(p,f,u),Mt(p,"VER",o.la),Xr(o,p),p}function Gh(o,u,f){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Bt(new to({eb:f})):new Bt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qh(){}e=Qh.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function oo(){}oo.prototype.g=function(o,u){return new Re(o,u)};function Re(o,u){it.call(this),this.g=new $h(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!W(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!W(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new zs(this)}P(Re,it),Re.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Re.prototype.close=function(){gl(this.g)},Re.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Zt(o),o=f);u.i.push(new Gy(u.Ya++,o)),u.G==3&&ro(u)},Re.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,Re.aa.N.call(this)};function Yh(o){ol.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const f in u){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}P(Yh,ol);function Xh(){al.call(this),this.status=1}P(Xh,al);function zs(o){this.g=o}P(zs,Qh),zs.prototype.ua=function(){ft(this.g,"a")},zs.prototype.ta=function(o){ft(this.g,new Yh(o))},zs.prototype.sa=function(o){ft(this.g,new Xh)},zs.prototype.ra=function(){ft(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,Re.prototype.send=Re.prototype.o,Re.prototype.open=Re.prototype.m,Re.prototype.close=Re.prototype.close,Xm=function(){return new oo},Ym=function(){return zi()},Qm=gs,Ec={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gi.NO_ERROR=0,Gi.TIMEOUT=8,Gi.HTTP_ERROR=6,Vo=Gi,dh.COMPLETE="complete",Gm=dh,lh.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",it.prototype.listen=it.prototype.K,si=lh,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,zm=Bt}).apply(typeof fo<"u"?fo:typeof self<"u"?self:typeof window<"u"?window:{});const jf="@firebase/firestore",Hf="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ue.UNAUTHENTICATED=new ue(null),ue.GOOGLE_CREDENTIALS=new ue("google-credentials-uid"),ue.FIRST_PARTY=new ue("first-party-uid"),ue.MOCK_USER=new ue("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Or="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new au("@firebase/firestore");function Zs(){return xs.logLevel}function Z(e,...t){if(xs.logLevel<=At.DEBUG){const n=t.map(cu);xs.debug(`Firestore (${Or}): ${e}`,...n)}}function Rn(e,...t){if(xs.logLevel<=At.ERROR){const n=t.map(cu);xs.error(`Firestore (${Or}): ${e}`,...n)}}function gr(e,...t){if(xs.logLevel<=At.WARN){const n=t.map(cu);xs.warn(`Firestore (${Or}): ${e}`,...n)}}function cu(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(e="Unexpected state"){const t=`FIRESTORE (${Or}) INTERNAL ASSERTION FAILED: `+e;throw Rn(t),new Error(t)}function Ct(e,t){e||ut()}function pt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends us{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _A{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ue.UNAUTHENTICATED))}shutdown(){}}class yA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vA{constructor(t){this.t=t,this.currentUser=ue.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ct(this.o===void 0);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gn,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ct(typeof s.accessToken=="string"),new Jm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ct(t===null||typeof t=="string"),new ue(t)}}class EA{constructor(t,n,s){this.l=t,this.h=n,this.P=s,this.type="FirstParty",this.user=ue.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class TA{constructor(t,n,s){this.l=t,this.h=n,this.P=s}getToken(){return Promise.resolve(new EA(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(ue.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kf{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wA{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,sA(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Ct(this.o===void 0);const s=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>s(i))};const r=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Kf(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ct(typeof n.token=="string"),this.R=n.token,new Kf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=AA(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=t.charAt(r[i]%62))}return s}}function Tt(e,t){return e<t?-1:e>t?1:0}function _r(e,t,n){return e.length===t.length&&e.every((s,r)=>n(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-62135596800,Wf=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(t){return zt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Wf);return new zt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new st(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new st(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<qf)throw new st(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new st(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wf}_compareTo(t){return this.seconds===t.seconds?Tt(this.nanoseconds,t.nanoseconds):Tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-qf;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{static fromTimestamp(t){return new dt(t)}static min(){return new dt(new zt(0,0))}static max(){return new dt(new zt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="__name__";class en{constructor(t,n,s){n===void 0?n=0:n>t.length&&ut(),s===void 0?s=t.length-n:s>t.length-n&&ut(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return en.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof en?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let r=0;r<s;r++){const i=en.compareSegments(t.get(r),n.get(r));if(i!==0)return i}return Math.sign(t.length-n.length)}static compareSegments(t,n){const s=en.isNumericId(t),r=en.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?en.extractNumericId(t).compare(en.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return zn.fromString(t.substring(4,t.length-2))}}class kt extends en{construct(t,n,s){return new kt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new st(U.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new kt(n)}static emptyPath(){return new kt([])}}const bA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ne extends en{construct(t,n,s){return new ne(t,n,s)}static isValidIdentifier(t){return bA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ne.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zf}static keyField(){return new ne([zf])}static fromServerFormat(t){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new st(U.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new st(U.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new st(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(s+=l,r++):(i(),r++)}if(i(),a)throw new st(U.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ne(n)}static emptyPath(){return new ne([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.path=t}static fromPath(t){return new at(kt.fromString(t))}static fromName(t){return new at(kt.fromString(t).popFirst(5))}static empty(){return new at(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&kt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return kt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new at(new kt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=-1;function IA(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=dt.fromTimestamp(s===1e9?new zt(n+1,0):new zt(n,s));return new Jn(r,at.empty(),t)}function SA(e){return new Jn(e.readTime,e.key,Si)}class Jn{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Jn(dt.min(),at.empty(),Si)}static max(){return new Jn(dt.max(),at.empty(),Si)}}function CA(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=at.comparator(e.documentKey,t.documentKey),n!==0?n:Tt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nr(e){if(e.code!==U.FAILED_PRECONDITION||e.message!==RA)throw e;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new V((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):V.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):V.reject(n)}static resolve(t){return new V((n,s)=>{n(t)})}static reject(t){return new V((n,s)=>{s(t)})}static waitFor(t){return new V((n,s)=>{let r=0,i=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++i,a&&i===r&&n()},c=>s(c))}),a=!0,i===r&&n()})}static or(t){let n=V.resolve(!1);for(const s of t)n=n.next(r=>r?V.resolve(r):s());return n}static forEach(t,n){const s=[];return t.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(t,n){return new V((s,r)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(t[h]).next(d=>{a[h]=d,++l,l===i&&s(a)},d=>r(d))}})}static doWhile(t,n){return new V((s,r)=>{const i=()=>{t()===!0?n().next(()=>{i()},r):s()};i()})}}function PA(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Pa.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=-1;function Oa(e){return e==null}function Zo(e){return e===0&&1/e==-1/0}function OA(e){return typeof e=="number"&&Number.isInteger(e)&&!Zo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="";function NA(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Gf(t)),t=VA(e.get(n),t);return Gf(t)}function VA(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const i=e.charAt(r);switch(i){case"\0":n+="";break;case tg:n+="";break;default:n+=i}}return n}function Gf(e){return e+tg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function eg(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t,n){this.comparator=t,this.root=n||ee.EMPTY}insert(t,n){return new Ft(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ee.BLACK,null,null))}remove(t){return new Ft(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ee.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new po(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new po(this.root,t,this.comparator,!1)}getReverseIterator(){return new po(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new po(this.root,t,this.comparator,!0)}}class po{constructor(t,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?s(t.key,n):1,n&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ee{constructor(t,n,s,r,i){this.key=t,this.value=n,this.color=s??ee.RED,this.left=r??ee.EMPTY,this.right=i??ee.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,r,i){return new ee(t??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let r=this;const i=s(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ee.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ee.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const t=this.left.check();if(t!==this.right.check())throw ut();return t+(this.isRed()?0:1)}}ee.EMPTY=null,ee.RED=!0,ee.BLACK=!1;ee.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(t,n,s,r,i){return this}insert(t,n,s){return new ee(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.comparator=t,this.data=new Ft(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yf(this.data.getIterator())}getIteratorFrom(t){return new Yf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Gt)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Gt(this.comparator);return n.data=t,n}}class Yf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.fields=t,t.sort(ne.comparator)}static empty(){return new xe([])}unionWith(t){let n=new Gt(ne.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new xe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return _r(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ng("Invalid base64 string: "+i):i}}(t);return new se(n)}static fromUint8Array(t){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(t);return new se(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}se.EMPTY_BYTE_STRING=new se("");const xA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zn(e){if(Ct(!!e),typeof e=="string"){let t=0;const n=xA.exec(e);if(Ct(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:jt(e.seconds),nanos:jt(e.nanos)}}function jt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ts(e){return typeof e=="string"?se.fromBase64String(e):se.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="server_timestamp",rg="__type__",ig="__previous_value__",og="__local_write_time__";function hu(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[rg])===null||n===void 0?void 0:n.stringValue)===sg}function Na(e){const t=e.mapValue.fields[ig];return hu(t)?Na(t):t}function Ci(e){const t=Zn(e.mapValue.fields[og].timestampValue);return new zt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t,n,s,r,i,a,l,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}const ta="(default)";class Ri{constructor(t,n){this.projectId=t,this.database=n||ta}static empty(){return new Ri("","")}get isDefaultDatabase(){return this.database===ta}isEqual(t){return t instanceof Ri&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="__type__",LA="__max__",mo={mapValue:{}},lg="__vector__",ea="value";function es(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hu(e)?4:$A(e)?9007199254740991:kA(e)?10:11:ut()}function mn(e,t){if(e===t)return!0;const n=es(e);if(n!==es(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ci(e).isEqual(Ci(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Zn(r.timestampValue),l=Zn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return ts(r.bytesValue).isEqual(ts(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return jt(r.geoPointValue.latitude)===jt(i.geoPointValue.latitude)&&jt(r.geoPointValue.longitude)===jt(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return jt(r.integerValue)===jt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=jt(r.doubleValue),l=jt(i.doubleValue);return a===l?Zo(a)===Zo(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return _r(e.arrayValue.values||[],t.arrayValue.values||[],mn);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Qf(a)!==Qf(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!mn(a[c],l[c])))return!1;return!0}(e,t);default:return ut()}}function Di(e,t){return(e.values||[]).find(n=>mn(n,t))!==void 0}function yr(e,t){if(e===t)return 0;const n=es(e),s=es(t);if(n!==s)return Tt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tt(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=jt(i.integerValue||i.doubleValue),c=jt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return Xf(e.timestampValue,t.timestampValue);case 4:return Xf(Ci(e),Ci(t));case 5:return Tt(e.stringValue,t.stringValue);case 6:return function(i,a){const l=ts(i),c=ts(a);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=Tt(l[h],c[h]);if(d!==0)return d}return Tt(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=Tt(jt(i.latitude),jt(a.latitude));return l!==0?l:Tt(jt(i.longitude),jt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Jf(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,h,d;const m=i.fields||{},v=a.fields||{},E=(l=m[ea])===null||l===void 0?void 0:l.arrayValue,P=(c=v[ea])===null||c===void 0?void 0:c.arrayValue,O=Tt(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((d=P==null?void 0:P.values)===null||d===void 0?void 0:d.length)||0);return O!==0?O:Jf(E,P)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===mo.mapValue&&a===mo.mapValue)return 0;if(i===mo.mapValue)return 1;if(a===mo.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const v=Tt(c[m],d[m]);if(v!==0)return v;const E=yr(l[c[m]],h[d[m]]);if(E!==0)return E}return Tt(c.length,d.length)}(e.mapValue,t.mapValue);default:throw ut()}}function Xf(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Tt(e,t);const n=Zn(e),s=Zn(t),r=Tt(n.seconds,s.seconds);return r!==0?r:Tt(n.nanos,s.nanos)}function Jf(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=yr(n[r],s[r]);if(i)return i}return Tt(n.length,s.length)}function vr(e){return Tc(e)}function Tc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=Zn(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ts(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return at.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Tc(i);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${Tc(n.fields[a])}`;return r+"}"}(e.mapValue):ut()}function xo(e){switch(es(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Na(e);return t?16+xo(t):16;case 5:return 2*e.stringValue.length;case 6:return ts(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+xo(i),0)}(e.arrayValue);case 10:case 11:return function(s){let r=0;return hs(s.fields,(i,a)=>{r+=i.length+xo(a)}),r}(e.mapValue);default:throw ut()}}function wc(e){return!!e&&"integerValue"in e}function fu(e){return!!e&&"arrayValue"in e}function Zf(e){return!!e&&"nullValue"in e}function td(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mo(e){return!!e&&"mapValue"in e}function kA(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[ag])===null||n===void 0?void 0:n.stringValue)===lg}function fi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hs(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=fi(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fi(e.arrayValue.values[n]);return t}return Object.assign({},e)}function $A(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===LA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.value=t}static empty(){return new Ie({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Mo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=fi(n)}setAll(t){let n=ne.emptyPath(),s={},r=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}a?s[l.lastSegment()]=fi(a):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(t){const n=this.field(t.popLast());Mo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return mn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=n.mapValue.fields[t.get(s)];Mo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,s){hs(n,(r,i)=>t[r]=i);for(const r of s)delete t[r]}clone(){return new Ie(fi(this.value))}}function cg(e){const t=[];return hs(e.fields,(n,s)=>{const r=new ne([n]);if(Mo(s)){const i=cg(s.mapValue).fields;if(i.length===0)t.push(r);else for(const a of i)t.push(r.child(a))}else t.push(r)}),new xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,n,s,r,i,a,l){this.key=t,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new de(t,0,dt.min(),dt.min(),dt.min(),Ie.empty(),0)}static newFoundDocument(t,n,s,r){return new de(t,1,n,dt.min(),s,r,0)}static newNoDocument(t,n){return new de(t,2,n,dt.min(),dt.min(),Ie.empty(),0)}static newUnknownDocument(t,n){return new de(t,3,n,dt.min(),dt.min(),Ie.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof de&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new de(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t,n){this.position=t,this.inclusive=n}}function ed(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],a=e.position[r];if(i.field.isKeyField()?s=at.comparator(at.fromName(a.referenceValue),n.key):s=yr(a,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function nd(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!mn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t,n="asc"){this.field=t,this.dir=n}}function FA(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{}class Wt extends ug{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new BA(t,n,s):n==="array-contains"?new KA(t,s):n==="in"?new qA(t,s):n==="not-in"?new WA(t,s):n==="array-contains-any"?new zA(t,s):new Wt(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new jA(t,s):new HA(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yr(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(yr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends ug{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new gn(t,n)}matches(t){return hg(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function hg(e){return e.op==="and"}function fg(e){return UA(e)&&hg(e)}function UA(e){for(const t of e.filters)if(t instanceof gn)return!1;return!0}function Ac(e){if(e instanceof Wt)return e.field.canonicalString()+e.op.toString()+vr(e.value);if(fg(e))return e.filters.map(t=>Ac(t)).join(",");{const t=e.filters.map(n=>Ac(n)).join(",");return`${e.op}(${t})`}}function dg(e,t){return e instanceof Wt?function(s,r){return r instanceof Wt&&s.op===r.op&&s.field.isEqual(r.field)&&mn(s.value,r.value)}(e,t):e instanceof gn?function(s,r){return r instanceof gn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,l)=>i&&dg(a,r.filters[l]),!0):!1}(e,t):void ut()}function pg(e){return e instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${vr(n.value)}`}(e):e instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(pg).join(" ,")+"}"}(e):"Filter"}class BA extends Wt{constructor(t,n,s){super(t,n,s),this.key=at.fromName(s.referenceValue)}matches(t){const n=at.comparator(t.key,this.key);return this.matchesComparison(n)}}class jA extends Wt{constructor(t,n){super(t,"in",n),this.keys=mg("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class HA extends Wt{constructor(t,n){super(t,"not-in",n),this.keys=mg("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function mg(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>at.fromName(s.referenceValue))}class KA extends Wt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fu(n)&&Di(n.arrayValue,this.value)}}class qA extends Wt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Di(this.value.arrayValue,n)}}class WA extends Wt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Di(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Di(this.value.arrayValue,n)}}class zA extends Wt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Di(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(t,n=null,s=[],r=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=l,this.le=null}}function sd(e,t=null,n=[],s=[],r=null,i=null,a=null){return new GA(e,t,n,s,r,i,a)}function du(e){const t=pt(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Ac(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Oa(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>vr(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>vr(s)).join(",")),t.le=n}return t.le}function pu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!FA(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!dg(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nd(e.startAt,t.startAt)&&nd(e.endAt,t.endAt)}function bc(e){return at.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t,n=null,s=[],r=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function QA(e,t,n,s,r,i,a,l){return new Va(e,t,n,s,r,i,a,l)}function gg(e){return new Va(e)}function rd(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function YA(e){return e.collectionGroup!==null}function di(e){const t=pt(e);if(t.he===null){t.he=[];const n=new Set;for(const i of t.explicitOrderBy)t.he.push(i),n.add(i.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Gt(ne.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.he.push(new sa(i,s))}),n.has(ne.keyField().canonicalString())||t.he.push(new sa(ne.keyField(),s))}return t.he}function an(e){const t=pt(e);return t.Pe||(t.Pe=XA(t,di(e))),t.Pe}function XA(e,t){if(e.limitType==="F")return sd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new sa(r.field,i)});const n=e.endAt?new na(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new na(e.startAt.position,e.startAt.inclusive):null;return sd(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Ic(e,t,n){return new Va(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xa(e,t){return pu(an(e),an(t))&&e.limitType===t.limitType}function _g(e){return`${du(an(e))}|lt:${e.limitType}`}function tr(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>pg(r)).join(", ")}]`),Oa(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>vr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>vr(r)).join(",")),`Target(${s})`}(an(e))}; limitType=${e.limitType})`}function Ma(e,t){return t.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):at.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(e,t)&&function(s,r){for(const i of di(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(e,t)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(e,t)&&function(s,r){return!(s.startAt&&!function(a,l,c){const h=ed(a,l,c);return a.inclusive?h<=0:h<0}(s.startAt,di(s),r)||s.endAt&&!function(a,l,c){const h=ed(a,l,c);return a.inclusive?h>=0:h>0}(s.endAt,di(s),r))}(e,t)}function JA(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function yg(e){return(t,n)=>{let s=!1;for(const r of di(e)){const i=ZA(r,t,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function ZA(e,t,n){const s=e.field.isKeyField()?at.comparator(t.key,n.key):function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?yr(c,h):ut()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return ut()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){hs(this.inner,(n,s)=>{for(const[r,i]of s)t(r,i)})}isEmpty(){return eg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new Ft(at.comparator);function Dn(){return tb}const vg=new Ft(at.comparator);function ri(...e){let t=vg;for(const n of e)t=t.insert(n.key,n);return t}function Eg(e){let t=vg;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Ss(){return pi()}function Tg(){return pi()}function pi(){return new Bs(e=>e.toString(),(e,t)=>e.isEqual(t))}const eb=new Ft(at.comparator),nb=new Gt(at.comparator);function Et(...e){let t=nb;for(const n of e)t=t.add(n);return t}const sb=new Gt(Tt);function rb(){return sb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zo(t)?"-0":t}}function wg(e){return{integerValue:""+e}}function ib(e,t){return OA(t)?wg(t):mu(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this._=void 0}}function ob(e,t,n){return e instanceof ra?function(r,i){const a={fields:{[rg]:{stringValue:sg},[og]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&hu(i)&&(i=Na(i)),i&&(a.fields[ig]=i),{mapValue:a}}(n,t):e instanceof Er?bg(e,t):e instanceof Pi?Ig(e,t):function(r,i){const a=Ag(r,i),l=id(a)+id(r.Ie);return wc(a)&&wc(r.Ie)?wg(l):mu(r.serializer,l)}(e,t)}function ab(e,t,n){return e instanceof Er?bg(e,t):e instanceof Pi?Ig(e,t):n}function Ag(e,t){return e instanceof ia?function(s){return wc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(t)?t:{integerValue:0}:null}class ra extends La{}class Er extends La{constructor(t){super(),this.elements=t}}function bg(e,t){const n=Sg(t);for(const s of e.elements)n.some(r=>mn(r,s))||n.push(s);return{arrayValue:{values:n}}}class Pi extends La{constructor(t){super(),this.elements=t}}function Ig(e,t){let n=Sg(t);for(const s of e.elements)n=n.filter(r=>!mn(r,s));return{arrayValue:{values:n}}}class ia extends La{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function id(e){return jt(e.integerValue||e.doubleValue)}function Sg(e){return fu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t,n){this.field=t,this.transform=n}}function cb(e,t){return e.field.isEqual(t.field)&&function(s,r){return s instanceof Er&&r instanceof Er||s instanceof Pi&&r instanceof Pi?_r(s.elements,r.elements,mn):s instanceof ia&&r instanceof ia?mn(s.Ie,r.Ie):s instanceof ra&&r instanceof ra}(e.transform,t.transform)}class ub{constructor(t,n){this.version=t,this.transformResults=n}}class ln{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ln}static exists(t){return new ln(void 0,t)}static updateTime(t){return new ln(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Lo(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class ka{}function Cg(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Dg(e.key,ln.none()):new Li(e.key,e.data,ln.none());{const n=e.data,s=Ie.empty();let r=new Gt(ne.comparator);for(let i of t.fields)if(!r.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new fs(e.key,s,new xe(r.toArray()),ln.none())}}function hb(e,t,n){e instanceof Li?function(r,i,a){const l=r.value.clone(),c=ad(r.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof fs?function(r,i,a){if(!Lo(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=ad(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Rg(r)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function mi(e,t,n,s){return e instanceof Li?function(i,a,l,c){if(!Lo(i.precondition,a))return l;const h=i.value.clone(),d=ld(i.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,s):e instanceof fs?function(i,a,l,c){if(!Lo(i.precondition,a))return l;const h=ld(i.fieldTransforms,c,a),d=a.data;return d.setAll(Rg(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(e,t,n,s):function(i,a,l){return Lo(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function fb(e,t){let n=null;for(const s of e.fieldTransforms){const r=t.data.field(s.field),i=Ag(s.transform,r||null);i!=null&&(n===null&&(n=Ie.empty()),n.set(s.field,i))}return n||null}function od(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&_r(s,r,(i,a)=>cb(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Li extends ka{constructor(t,n,s,r=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fs extends ka{constructor(t,n,s,r,i=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Rg(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function ad(e,t,n){const s=new Map;Ct(e.length===n.length);for(let r=0;r<n.length;r++){const i=e[r],a=i.transform,l=t.data.field(i.field);s.set(i.field,ab(a,l,n[r]))}return s}function ld(e,t,n){const s=new Map;for(const r of e){const i=r.transform,a=n.data.field(r.field);s.set(r.field,ob(i,a,t))}return s}class Dg extends ka{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class db extends ka{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,n,s,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(t.key)&&hb(i,t,s[r])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=mi(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=mi(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=Tg();return this.mutations.forEach(r=>{const i=t.get(r.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(r.key)?null:l;const c=Cg(a,l);c!==null&&s.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(dt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Et())}isEqual(t){return this.batchId===t.batchId&&_r(this.mutations,t.mutations,(n,s)=>od(n,s))&&_r(this.baseMutations,t.baseMutations,(n,s)=>od(n,s))}}class gu{constructor(t,n,s,r){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(t,n,s){Ct(t.mutations.length===s.length);let r=function(){return eb}();const i=t.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new gu(t,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,wt;function _b(e){switch(e){case U.OK:return ut();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ut()}}function Pg(e){if(e===void 0)return Rn("GRPC error has no .code"),U.UNKNOWN;switch(e){case Ht.OK:return U.OK;case Ht.CANCELLED:return U.CANCELLED;case Ht.UNKNOWN:return U.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return U.INTERNAL;case Ht.UNAVAILABLE:return U.UNAVAILABLE;case Ht.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ht.NOT_FOUND:return U.NOT_FOUND;case Ht.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ht.ABORTED:return U.ABORTED;case Ht.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ht.DATA_LOSS:return U.DATA_LOSS;default:return ut()}}(wt=Ht||(Ht={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new zn([4294967295,4294967295],0);function cd(e){const t=yb().encode(e),n=new Wm;return n.update(t),new Uint8Array(n.digest())}function ud(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new zn([n,s],0),new zn([r,i],0)]}class _u{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ii(`Invalid padding: ${n}`);if(s<0)throw new ii(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new ii(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new ii(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=zn.fromNumber(this.Ee)}Ae(t,n,s){let r=t.add(n.multiply(zn.fromNumber(s)));return r.compare(vb)===1&&(r=new zn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=cd(t),[s,r]=ud(n);for(let i=0;i<this.hashCount;i++){const a=this.Ae(s,r,i);if(!this.Re(a))return!1}return!0}static create(t,n,s){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new _u(i,r,n);return s.forEach(l=>a.insert(l)),a}insert(t){if(this.Ee===0)return;const n=cd(t),[s,r]=ud(n);for(let i=0;i<this.hashCount;i++){const a=this.Ae(s,r,i);this.Ve(a)}}Ve(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t,n,s,r,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const r=new Map;return r.set(t,ki.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new $a(dt.min(),r,new Ft(Tt),Dn(),Et())}}class ki{constructor(t,n,s,r,i){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new ki(s,n,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t,n,s,r){this.me=t,this.removedTargetIds=n,this.key=s,this.fe=r}}class Og{constructor(t,n){this.targetId=t,this.ge=n}}class Ng{constructor(t,n,s=se.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=r}}class hd{constructor(){this.pe=0,this.ye=fd(),this.we=se.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.we=t)}Fe(){let t=Et(),n=Et(),s=Et();return this.ye.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ut()}}),new ki(this.we,this.be,t,n,s)}Me(){this.Se=!1,this.ye=fd()}xe(t,n){this.Se=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.Se=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Ct(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class Eb{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Dn(),this.$e=go(),this.Ke=go(),this.Ue=new Ft(Tt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const s=this.He(n);switch(t.state){case 0:this.Je(n)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(t.resumeToken));break;default:ut()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((s,r)=>{this.Je(r)&&n(r)})}Ze(t){const n=t.targetId,s=t.ge.count,r=this.Xe(n);if(r){const i=r.target;if(bc(i))if(s===0){const a=new at(i.path);this.ze(n,a,de.newNoDocument(a,dt.min()))}else Ct(s===1);else{const a=this.et(n);if(a!==s){const l=this.tt(t),c=l?this.nt(l,t,a):1;if(c!==0){this.Ye(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,h)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let a,l;try{a=ts(s).toUint8Array()}catch(c){if(c instanceof ng)return gr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new _u(a,r,i)}catch(c){return gr(c instanceof ii?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ee===0?null:l}nt(t,n,s){return n.ge.count===s-this.st(t,n.targetId)?0:2}st(t,n){const s=this.ke.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.ze(n,i,null),r++)}),r}ot(t){const n=new Map;this.qe.forEach((i,a)=>{const l=this.Xe(a);if(l){if(i.current&&bc(l.target)){const c=new at(l.target.path);this._t(c).has(a)||this.ut(a,c)||this.ze(a,c,de.newNoDocument(c,t))}i.ve&&(n.set(a,i.Fe()),i.Me())}});let s=Et();this.Ke.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.Qe.forEach((i,a)=>a.setReadTime(t));const r=new $a(t,n,this.Ue,this.Qe,s);return this.Qe=Dn(),this.$e=go(),this.Ke=go(),this.Ue=new Ft(Tt),r}Ge(t,n){if(!this.Je(t))return;const s=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,s){if(!this.Je(t))return;const r=this.He(t);this.ut(t,n)?r.xe(n,1):r.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new hd,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new Gt(Tt),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Gt(Tt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new hd),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function go(){return new Ft(at.comparator)}function fd(){return new Ft(at.comparator)}const Tb={asc:"ASCENDING",desc:"DESCENDING"},wb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ab={and:"AND",or:"OR"};class bb{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Sc(e,t){return e.useProto3Json||Oa(t)?t:{value:t}}function oa(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ib(e,t){return oa(e,t.toTimestamp())}function cn(e){return Ct(!!e),dt.fromTimestamp(function(n){const s=Zn(n);return new zt(s.seconds,s.nanos)}(e))}function yu(e,t){return Cc(e,t).canonicalString()}function Cc(e,t){const n=function(r){return new kt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function xg(e){const t=kt.fromString(e);return Ct(Fg(t)),t}function Rc(e,t){return yu(e.databaseId,t.path)}function xl(e,t){const n=xg(t);if(n.get(1)!==e.databaseId.projectId)throw new st(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new st(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new at(Lg(n))}function Mg(e,t){return yu(e.databaseId,t)}function Sb(e){const t=xg(e);return t.length===4?kt.emptyPath():Lg(t)}function Dc(e){return new kt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Lg(e){return Ct(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function dd(e,t,n){return{name:Rc(e,t),fields:n.value.mapValue.fields}}function Cb(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ut()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(Ct(d===void 0||typeof d=="string"),se.fromBase64String(d||"")):(Ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array),se.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?U.UNKNOWN:Pg(h.code);return new st(d,h.message||"")}(a);n=new Ng(s,r,i,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=xl(e,s.document.name),i=cn(s.document.updateTime),a=s.document.createTime?cn(s.document.createTime):dt.min(),l=new Ie({mapValue:{fields:s.document.fields}}),c=de.newFoundDocument(r,i,a,l),h=s.targetIds||[],d=s.removedTargetIds||[];n=new ko(h,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=xl(e,s.document),i=s.readTime?cn(s.readTime):dt.min(),a=de.newNoDocument(r,i),l=s.removedTargetIds||[];n=new ko([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=xl(e,s.document),i=s.removedTargetIds||[];n=new ko([],i,r,null)}else{if(!("filter"in t))return ut();{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new gb(r,i),l=s.targetId;n=new Og(l,a)}}return n}function Rb(e,t){let n;if(t instanceof Li)n={update:dd(e,t.key,t.value)};else if(t instanceof Dg)n={delete:Rc(e,t.key)};else if(t instanceof fs)n={update:dd(e,t.key,t.data),updateMask:kb(t.fieldMask)};else{if(!(t instanceof db))return ut();n={verify:Rc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(i,a){const l=a.transform;if(l instanceof ra)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Er)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Pi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ia)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw ut()}(0,s))),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Ib(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ut()}(e,t.precondition)),n}function Db(e,t){return e&&e.length>0?(Ct(t!==void 0),e.map(n=>function(r,i){let a=r.updateTime?cn(r.updateTime):cn(i);return a.isEqual(dt.min())&&(a=cn(i)),new ub(a,r.transformResults||[])}(n,t))):[]}function Pb(e,t){return{documents:[Mg(e,t.path)]}}function Ob(e,t){const n={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Mg(e,r);const i=function(h){if(h.length!==0)return $g(gn.create(h,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(d=>function(v){return{field:er(v.field),direction:xb(v.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Sc(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ht:n,parent:r}}function Nb(e){let t=Sb(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ct(s===1);const d=n.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(m){const v=kg(m);return v instanceof gn&&fg(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(v=>function(P){return new sa(nr(P.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,Oa(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(m){const v=!!m.before,E=m.values||[];return new na(E,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,E=m.values||[];return new na(E,v)}(n.endAt)),QA(t,r,a,i,l,"F",c,h)}function Vb(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function kg(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=nr(n.unaryFilter.field);return Wt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=nr(n.unaryFilter.field);return Wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=nr(n.unaryFilter.field);return Wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=nr(n.unaryFilter.field);return Wt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(e):e.fieldFilter!==void 0?function(n){return Wt.create(nr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(s=>kg(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ut()}}(n.compositeFilter.op))}(e):ut()}function xb(e){return Tb[e]}function Mb(e){return wb[e]}function Lb(e){return Ab[e]}function er(e){return{fieldPath:e.canonicalString()}}function nr(e){return ne.fromServerFormat(e.fieldPath)}function $g(e){return e instanceof Wt?function(n){if(n.op==="=="){if(td(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NAN"}};if(Zf(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(td(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NOT_NAN"}};if(Zf(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:er(n.field),op:Mb(n.op),value:n.value}}}(e):e instanceof gn?function(n){const s=n.getFilters().map(r=>$g(r));return s.length===1?s[0]:{compositeFilter:{op:Lb(n.op),filters:s}}}(e):ut()}function kb(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Fg(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t,n,s,r,i=dt.min(),a=dt.min(),l=se.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Hn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(t){this.Tt=t}}function Fb(e){const t=Nb({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ic(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(){this.Tn=new Bb}addToCollectionParentIndex(t,n){return this.Tn.add(n),V.resolve()}getCollectionParents(t,n){return V.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return V.resolve()}deleteFieldIndex(t,n){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,n){return V.resolve()}getDocumentsMatchingTarget(t,n){return V.resolve(null)}getIndexType(t,n){return V.resolve(0)}getFieldIndexes(t,n){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,n){return V.resolve(Jn.min())}getMinOffsetFromCollectionGroup(t,n){return V.resolve(Jn.min())}updateCollectionGroup(t,n,s){return V.resolve()}updateIndexEntries(t,n){return V.resolve()}}class Bb{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n]||new Gt(kt.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(t){return(this.index[t]||new Gt(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ug=41943040;class be{static withCacheSize(t){return new be(t,be.DEFAULT_COLLECTION_PERCENTILE,be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */be.DEFAULT_COLLECTION_PERCENTILE=10,be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,be.DEFAULT=new be(Ug,be.DEFAULT_COLLECTION_PERCENTILE,be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),be.DISABLED=new be(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Tr(0)}static Un(){return new Tr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="LruGarbageCollector",jb=1048576;function gd([e,t],[n,s]){const r=Tt(e,n);return r===0?Tt(t,s):r}class Hb{constructor(t){this.Hn=t,this.buffer=new Gt(gd),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();gd(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Kb{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Z(md,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vr(n)?Z(md,"Ignoring IndexedDB error during garbage collection: ",n):await Nr(n)}await this.er(3e5)})}}class qb{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return V.resolve(Pa.ae);const s=new Hb(n);return this.tr.forEachTarget(t,r=>s.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>s.Zn(r))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.tr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(pd)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pd):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let s,r,i,a,l,c,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(t,r))).next(m=>(s=m,l=Date.now(),this.removeTargets(t,s,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(t,s))).next(m=>(h=Date.now(),Zs()<=At.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function Wb(e,t){return new qb(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.changes=new Bs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,de.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?V.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t,n,s,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(s!==null&&mi(s.mutation,r,xe.empty(),zt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Et()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Et()){const r=Ss();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,s).next(i=>{let a=ri();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const s=Ss();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Et()))}populateOverlays(t,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(t,r).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,s,r){let i=Dn();const a=pi(),l=function(){return pi()}();return n.forEach((c,h)=>{const d=s.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof fs)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),mi(d.mutation,h,d.mutation.getFieldMask(),zt.now())):a.set(h.key,xe.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var m;return l.set(h,new Gb(d,(m=a.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(t,n){const s=pi();let r=new Ft((a,l)=>a-l),i=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let d=s.get(c)||xe.empty();d=l.applyToLocalView(h,d),s.set(c,d);const m=(r.get(l.batchId)||Et()).add(c);r=r.insert(l.batchId,m)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,m=Tg();d.forEach(v=>{if(!i.has(v)){const E=Cg(n.get(v),s.get(v));E!==null&&m.set(v,E),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,m))}return V.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,r){return function(a){return at.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):YA(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,r):this.getDocumentsMatchingCollectionQuery(t,n,s,r)}getNextDocuments(t,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,r-i.size):V.resolve(Ss());let l=Si,c=i;return a.next(h=>V.forEach(h,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(t,d).next(v=>{c=c.insert(d,v)}))).next(()=>this.populateOverlays(t,h,i)).next(()=>this.computeViews(t,c,h,Et())).next(d=>({batchId:l,changes:Eg(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new at(n)).next(s=>{let r=ri();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,s,r){const i=n.collectionGroup;let a=ri();return this.indexManager.getCollectionParents(t,i).next(l=>V.forEach(l,c=>{const h=function(m,v){return new Va(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,s,r).next(d=>{d.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,i,r))).next(a=>{i.forEach((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,de.newInvalidDocument(d)))});let l=ri();return a.forEach((c,h)=>{const d=i.get(c);d!==void 0&&mi(d.mutation,h,xe.empty(),zt.now()),Ma(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return V.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:cn(r.createTime)}}(n)),V.resolve()}getNamedQuery(t,n){return V.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:Fb(r.bundledQuery),readTime:cn(r.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.overlays=new Ft(at.comparator),this.Rr=new Map}getOverlay(t,n){return V.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ss();return V.forEach(n,r=>this.getOverlay(t,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((r,i)=>{this.Et(t,n,i)}),V.resolve()}removeOverlaysForBatchId(t,n,s){const r=this.Rr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(s)),V.resolve()}getOverlaysForCollection(t,n,s){const r=Ss(),i=n.length+1,a=new at(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return V.resolve(r)}getOverlaysForCollectionGroup(t,n,s,r){let i=new Ft((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let d=i.get(h.largestBatchId);d===null&&(d=Ss(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Ss(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return V.resolve(l)}Et(t,n,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.Rr.get(r.largestBatchId).delete(s.key);this.Rr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new mb(n,s));let i=this.Rr.get(n);i===void 0&&(i=Et(),this.Rr.set(n,i)),this.Rr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.sessionToken=se.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this.Vr=new Gt(Xt.mr),this.gr=new Gt(Xt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const s=new Xt(t,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.wr(new Xt(t,n))}br(t,n){t.forEach(s=>this.removeReference(s,n))}Sr(t){const n=new at(new kt([])),s=new Xt(n,t),r=new Xt(n,t+1),i=[];return this.gr.forEachInRange([s,r],a=>{this.wr(a),i.push(a.key)}),i}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new at(new kt([])),s=new Xt(n,t),r=new Xt(n,t+1);let i=Et();return this.gr.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new Xt(t,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Xt{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return at.comparator(t.key,n.key)||Tt(t.Cr,n.Cr)}static pr(t,n){return Tt(t.Cr,n.Cr)||at.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Gt(Xt.mr)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pb(i,n,s,r);this.mutationQueue.push(a);for(const l of r)this.Mr=this.Mr.add(new Xt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(t,n){return V.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,r=this.Nr(s),i=r<0?0:r;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?uu:this.Fr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Xt(n,0),r=new Xt(n,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([s,r],a=>{const l=this.Or(a.Cr);i.push(l)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Gt(Tt);return n.forEach(r=>{const i=new Xt(r,0),a=new Xt(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,a],l=>{s=s.add(l.Cr)})}),V.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,r=s.length+1;let i=s;at.isDocumentKey(i)||(i=i.child(""));const a=new Xt(new at(i),0);let l=new Gt(Tt);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Cr)),!0)},a),V.resolve(this.Br(l))}Br(t){const n=[];return t.forEach(s=>{const r=this.Or(s);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Ct(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return V.forEach(n.mutations,r=>{const i=new Xt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,n){const s=new Xt(n,0),r=this.Mr.firstAfterOrEqual(s);return V.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t){this.kr=t,this.docs=function(){return new Ft(at.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,a=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return V.resolve(s?s.document.mutableCopy():de.newInvalidDocument(n))}getEntries(t,n){let s=Dn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():de.newInvalidDocument(r))}),V.resolve(s)}getDocumentsMatchingQuery(t,n,s,r){let i=Dn();const a=n.path,l=new at(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||CA(SA(d),s)<=0||(r.has(d.key)||Ma(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(t,n,s,r){ut()}qr(t,n){return V.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new eI(this)}getSize(t){return V.resolve(this.size)}}class eI extends zb{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(s)}),V.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t){this.persistence=t,this.Qr=new Bs(n=>du(n),pu),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new vu,this.targetCount=0,this.Ur=Tr.Kn()}forEachTarget(t,n){return this.Qr.forEach((s,r)=>n(r)),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),V.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new Tr(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,V.resolve()}updateTargetData(t,n){return this.zn(n),V.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,n,s){let r=0;const i=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.Qr.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),V.waitFor(i).next(()=>r)}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,n){const s=this.Qr.get(n)||null;return V.resolve(s)}addMatchingKeys(t,n,s){return this.Kr.yr(n,s),V.resolve()}removeMatchingKeys(t,n,s){this.Kr.br(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(a=>{i.push(r.markPotentiallyOrphaned(t,a))}),V.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Kr.Sr(n),V.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Kr.vr(n);return V.resolve(s)}containsKey(t,n){return V.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new Pa(0),this.zr=!1,this.zr=!0,this.jr=new Jb,this.referenceDelegate=t(this),this.Hr=new nI(this),this.indexManager=new Ub,this.remoteDocumentCache=function(r){return new tI(r)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new $b(n),this.Yr=new Yb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Xb,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.Wr[t.toKey()];return s||(s=new Zb(n,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,s){Z("MemoryPersistence","Starting transaction:",t);const r=new sI(this.Gr.next());return this.referenceDelegate.Zr(),s(r).next(i=>this.referenceDelegate.Xr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}ei(t,n){return V.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,n)))}}class sI extends DA{constructor(t){super(),this.currentSequenceNumber=t}}class Eu{constructor(t){this.persistence=t,this.ti=new vu,this.ni=null}static ri(t){return new Eu(t)}get ii(){if(this.ni)return this.ni;throw ut()}addReference(t,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),V.resolve()}removeReference(t,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),V.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),V.resolve()}removeTarget(t,n){this.ti.Sr(n.targetId).forEach(r=>this.ii.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(i=>this.ii.add(i.toString()))}).next(()=>s.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ii,s=>{const r=at.fromPath(s);return this.si(t,r).next(i=>{i||n.removeEntry(r,dt.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return V.or([()=>V.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class aa{constructor(t,n){this.persistence=t,this.oi=new Bs(s=>NA(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=Wb(this,n)}static ri(t,n){return new aa(t,n)}Zr(){}Xr(t){return V.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(r=>s+r))}sr(t){let n=0;return this.rr(t,s=>{n++}).next(()=>n)}rr(t,n){return V.forEach(this.oi,(s,r)=>this.ar(t,s,r).next(i=>i?V.resolve():n(r)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(t,a=>this.ar(t,a,n).next(l=>{l||(s++,i.removeEntry(a,dt.min()))})).next(()=>i.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),V.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),V.resolve()}removeReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),V.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),V.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=xo(t.data.value)),n}ar(t,n,s){return V.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.oi.get(n);return V.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,n,s,r){this.targetId=t,this.fromCache=n,this.Hi=s,this.Ji=r}static Yi(t,n){let s=Et(),r=Et();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Tu(t,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return ZT()?8:PA(YT())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,s,r){const i={result:null};return this.rs(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ss(t,n,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new rI;return this._s(t,n,a).next(l=>{if(i.result=l,this.Xi)return this.us(t,n,a,l.size)})}).next(()=>i.result)}us(t,n,s,r){return s.documentReadCount<this.es?(Zs()<=At.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",tr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),V.resolve()):(Zs()<=At.DEBUG&&Z("QueryEngine","Query:",tr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ts*r?(Zs()<=At.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",tr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,an(n))):V.resolve())}rs(t,n){if(rd(n))return V.resolve(null);let s=an(n);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ic(n,null,"F"),s=an(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(i=>{const a=Et(...i);return this.ns.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,s).next(c=>{const h=this.cs(n,l);return this.ls(n,h,a,c.readTime)?this.rs(t,Ic(n,null,"F")):this.hs(t,h,n,c)}))})))}ss(t,n,s,r){return rd(n)||r.isEqual(dt.min())?V.resolve(null):this.ns.getDocuments(t,s).next(i=>{const a=this.cs(n,i);return this.ls(n,a,s,r)?V.resolve(null):(Zs()<=At.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tr(n)),this.hs(t,a,n,IA(r,Si)).next(l=>l))})}cs(t,n){let s=new Gt(yg(t));return n.forEach((r,i)=>{Ma(t,i)&&(s=s.add(i))}),s}ls(t,n,s,r){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(t,n,s){return Zs()<=At.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",tr(n)),this.ns.getDocumentsMatchingQuery(t,n,Jn.min(),s)}hs(t,n,s,r){return this.ns.getDocumentsMatchingQuery(t,s,r).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu="LocalStore",oI=3e8;class aI{constructor(t,n,s,r){this.persistence=t,this.Ps=n,this.serializer=r,this.Ts=new Ft(Tt),this.Is=new Bs(i=>du(i),pu),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Qb(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function lI(e,t,n,s){return new aI(e,t,n,s)}async function jg(e,t){const n=pt(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],l=[];let c=Et();for(const h of r){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(s,c).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:l}))})})}function cI(e,t){const n=pt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(l,c,h,d){const m=h.batch,v=m.keys();let E=V.resolve();return v.forEach(P=>{E=E.next(()=>d.getEntry(c,P)).next(O=>{const N=h.docVersions.get(P);Ct(N!==null),O.version.compareTo(N)<0&&(m.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,s,t,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Et();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(t))).next(()=>n.localDocuments.getDocuments(s,r))})}function Hg(e){const t=pt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function uI(e,t){const n=pt(e),s=t.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const l=[];t.targetChanges.forEach((d,m)=>{const v=r.get(m);if(!v)return;l.push(n.Hr.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Hr.addMatchingKeys(i,d.addedDocuments,m)));let E=v.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?E=E.withResumeToken(se.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):d.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(d.resumeToken,s)),r=r.insert(m,E),function(O,N,K){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=oI?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(v,E,d)&&l.push(n.Hr.updateTargetData(i,E))});let c=Dn(),h=Et();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(hI(i,a,t.documentUpdates).next(d=>{c=d.Vs,h=d.fs})),!s.isEqual(dt.min())){const d=n.Hr.getLastRemoteSnapshotVersion(i).next(m=>n.Hr.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(d)}return V.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ts=r,i))}function hI(e,t,n){let s=Et(),r=Et();return n.forEach(i=>s=s.add(i)),t.getEntries(e,s).next(i=>{let a=Dn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(dt.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):Z(wu,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Vs:a,fs:r}})}function fI(e,t){const n=pt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=uu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function dI(e,t){const n=pt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Hr.getTargetData(s,t).next(i=>i?(r=i,V.resolve(r)):n.Hr.allocateTargetId(s).next(a=>(r=new Hn(t,a,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ts.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(t,s.targetId)),s})}async function Pc(e,t,n){const s=pt(e),r=s.Ts.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Vr(a))throw a;Z(wu,`Failed to update sequence numbers for target ${t}: ${a}`)}s.Ts=s.Ts.remove(t),s.Is.delete(r.target)}function _d(e,t,n){const s=pt(e);let r=dt.min(),i=Et();return s.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,d){const m=pt(c),v=m.Is.get(d);return v!==void 0?V.resolve(m.Ts.get(v)):m.Hr.getTargetData(h,d)}(s,a,an(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>s.Ps.getDocumentsMatchingQuery(a,t,n?r:dt.min(),n?i:Et())).next(l=>(pI(s,JA(t),l),{documents:l,gs:i})))}function pI(e,t,n){let s=e.Es.get(t)||dt.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),e.Es.set(t,s)}class yd{constructor(){this.activeTargetIds=rb()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mI{constructor(){this.ho=new yd,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,s){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new yd,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="ConnectivityMonitor";class Ed{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Z(vd,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Z(vd,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o=null;function Oc(){return _o===null?_o=function(){return 268435456+Math.round(2147483648*Math.random())}():_o++,"0x"+_o.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml="RestConnection",_I={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yI{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${s}/databases/${r}`,this.wo=this.databaseId.database===ta?`project_id=${s}`:`project_id=${s}&database_id=${r}`}bo(t,n,s,r,i){const a=Oc(),l=this.So(t,n.toUriEncodedString());Z(Ml,`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,r,i),this.vo(t,l,c,s).then(h=>(Z(Ml,`Received RPC '${t}' ${a}: `,h),h),h=>{throw gr(Ml,`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Co(t,n,s,r,i,a){return this.bo(t,n,s,r,i)}Do(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Or}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>t[i]=r),s&&s.headers.forEach((r,i)=>t[i]=r)}So(t,n){const s=_I[t];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce="WebChannelConnection";class EI extends yI{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,s,r){const i=Oc();return new Promise((a,l)=>{const c=new zm;c.setWithCredentials(!0),c.listenOnce(Gm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vo.NO_ERROR:const d=c.getResponseJson();Z(ce,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(d)),a(d);break;case Vo.TIMEOUT:Z(ce,`RPC '${t}' ${i} timed out`),l(new st(U.DEADLINE_EXCEEDED,"Request time out"));break;case Vo.HTTP_ERROR:const m=c.getStatus();if(Z(ce,`RPC '${t}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v==null?void 0:v.error;if(E&&E.status&&E.message){const P=function(N){const K=N.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(K)>=0?K:U.UNKNOWN}(E.status);l(new st(P,E.message))}else l(new st(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new st(U.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Z(ce,`RPC '${t}' ${i} completed.`)}});const h=JSON.stringify(r);Z(ce,`RPC '${t}' ${i} sending request:`,r),c.send(n,"POST",h,s,15)})}Wo(t,n,s){const r=Oc(),i=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Xm(),l=Ym(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const d=i.join("");Z(ce,`Creating RPC '${t}' stream ${r}: ${d}`,c);const m=a.createWebChannel(d,c);let v=!1,E=!1;const P=new vI({Fo:N=>{E?Z(ce,`Not sending because RPC '${t}' stream ${r} is closed:`,N):(v||(Z(ce,`Opening RPC '${t}' stream ${r} transport.`),m.open(),v=!0),Z(ce,`RPC '${t}' stream ${r} sending:`,N),m.send(N))},Mo:()=>m.close()}),O=(N,K,W)=>{N.listen(K,G=>{try{W(G)}catch(L){setTimeout(()=>{throw L},0)}})};return O(m,si.EventType.OPEN,()=>{E||(Z(ce,`RPC '${t}' stream ${r} transport opened.`),P.Qo())}),O(m,si.EventType.CLOSE,()=>{E||(E=!0,Z(ce,`RPC '${t}' stream ${r} transport closed`),P.Ko())}),O(m,si.EventType.ERROR,N=>{E||(E=!0,gr(ce,`RPC '${t}' stream ${r} transport errored:`,N),P.Ko(new st(U.UNAVAILABLE,"The operation could not be completed")))}),O(m,si.EventType.MESSAGE,N=>{var K;if(!E){const W=N.data[0];Ct(!!W);const G=W,L=(G==null?void 0:G.error)||((K=G[0])===null||K===void 0?void 0:K.error);if(L){Z(ce,`RPC '${t}' stream ${r} received error:`,L);const tt=L.status;let nt=function(_){const w=Ht[_];if(w!==void 0)return Pg(w)}(tt),A=L.message;nt===void 0&&(nt=U.INTERNAL,A="Unknown error status: "+tt+" with message "+L.message),E=!0,P.Ko(new st(nt,A)),m.close()}else Z(ce,`RPC '${t}' stream ${r} received:`,W),P.Uo(W)}}),O(l,Qm.STAT_EVENT,N=>{N.stat===Ec.PROXY?Z(ce,`RPC '${t}' stream ${r} detected buffering proxy`):N.stat===Ec.NOPROXY&&Z(ce,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.$o()},0),P}}function Ll(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(e){return new bb(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t,n,s=1e3,r=1.5,i=6e4){this.Ti=t,this.timerId=n,this.Go=s,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-s);r>0&&Z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="PersistentStream";class qg{constructor(t,n,s,r,i,a,l,c){this.Ti=t,this.n_=s,this.r_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Kg(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Rn(n.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.i_===n&&this.V_(s,r)},s=>{t(()=>{const r=new st(U.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(r)})})}V_(t,n){const s=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{s(()=>this.m_(r))}),this.stream.onMessage(r=>{s(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Z(Td,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(Z(Td,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TI extends qg{constructor(t,n,s,r,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=Cb(this.serializer,t),s=function(i){if(!("targetChange"in i))return dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?dt.min():a.readTime?cn(a.readTime):dt.min()}(t);return this.listener.p_(n,s)}y_(t){const n={};n.database=Dc(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=bc(c)?{documents:Pb(i,c)}:{query:Ob(i,c).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Vg(i,a.resumeToken);const h=Sc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(dt.min())>0){l.readTime=oa(i,a.snapshotVersion.toTimestamp());const h=Sc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const s=Vb(this.serializer,t);s&&(n.labels=s),this.I_(n)}w_(t){const n={};n.database=Dc(this.serializer),n.removeTarget=t,this.I_(n)}}class wI extends qg{constructor(t,n,s,r,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return Ct(!!t.streamToken),this.lastStreamToken=t.streamToken,Ct(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Ct(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=Db(t.writeResults,t.commitTime),s=cn(t.commitTime);return this.listener.v_(s,n)}C_(){const t={};t.database=Dc(this.serializer),this.I_(t)}S_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>Rb(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{}class bI extends AI{constructor(t,n,s,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new st(U.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,n,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.bo(t,Cc(n,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new st(U.UNKNOWN,i.toString())})}Co(t,n,s,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(t,Cc(n,s),r,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(U.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class II{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Rn(n),this.N_=!1):Z("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="RemoteStore";class SI{constructor(t,n,s,r,i){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(a=>{s.enqueueAndForget(async()=>{js(this)&&(Z(Ms,"Restarting streams for network reachability change."),await async function(c){const h=pt(c);h.W_.add(4),await $i(h),h.j_.set("Unknown"),h.W_.delete(4),await Ua(h)}(this))})}),this.j_=new II(s,r)}}async function Ua(e){if(js(e))for(const t of e.G_)await t(!0)}async function $i(e){for(const t of e.G_)await t(!1)}function Wg(e,t){const n=pt(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),Su(n)?Iu(n):xr(n).c_()&&bu(n,t))}function Au(e,t){const n=pt(e),s=xr(n);n.U_.delete(t),s.c_()&&zg(n,t),n.U_.size===0&&(s.c_()?s.P_():js(n)&&n.j_.set("Unknown"))}function bu(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xr(e).y_(t)}function zg(e,t){e.H_.Ne(t),xr(e).w_(t)}function Iu(e){e.H_=new Eb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),xr(e).start(),e.j_.B_()}function Su(e){return js(e)&&!xr(e).u_()&&e.U_.size>0}function js(e){return pt(e).W_.size===0}function Gg(e){e.H_=void 0}async function CI(e){e.j_.set("Online")}async function RI(e){e.U_.forEach((t,n)=>{bu(e,t)})}async function DI(e,t){Gg(e),Su(e)?(e.j_.q_(t),Iu(e)):e.j_.set("Unknown")}async function PI(e,t,n){if(e.j_.set("Online"),t instanceof Ng&&t.state===2&&t.cause)try{await async function(r,i){const a=i.cause;for(const l of i.targetIds)r.U_.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.U_.delete(l),r.H_.removeTarget(l))}(e,t)}catch(s){Z(Ms,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await la(e,s)}else if(t instanceof ko?e.H_.We(t):t instanceof Og?e.H_.Ze(t):e.H_.je(t),!n.isEqual(dt.min()))try{const s=await Hg(e.localStore);n.compareTo(s)>=0&&await function(i,a){const l=i.H_.ot(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.U_.get(h);d&&i.U_.set(h,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const d=i.U_.get(c);if(!d)return;i.U_.set(c,d.withResumeToken(se.EMPTY_BYTE_STRING,d.snapshotVersion)),zg(i,c);const m=new Hn(d.target,c,h,d.sequenceNumber);bu(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(s){Z(Ms,"Failed to raise snapshot:",s),await la(e,s)}}async function la(e,t,n){if(!Vr(t))throw t;e.W_.add(1),await $i(e),e.j_.set("Offline"),n||(n=()=>Hg(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Z(Ms,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Ua(e)})}function Qg(e,t){return t().catch(n=>la(e,n,t))}async function Ba(e){const t=pt(e),n=ns(t);let s=t.K_.length>0?t.K_[t.K_.length-1].batchId:uu;for(;OI(t);)try{const r=await fI(t.localStore,s);if(r===null){t.K_.length===0&&n.P_();break}s=r.batchId,NI(t,r)}catch(r){await la(t,r)}Yg(t)&&Xg(t)}function OI(e){return js(e)&&e.K_.length<10}function NI(e,t){e.K_.push(t);const n=ns(e);n.c_()&&n.b_&&n.S_(t.mutations)}function Yg(e){return js(e)&&!ns(e).u_()&&e.K_.length>0}function Xg(e){ns(e).start()}async function VI(e){ns(e).C_()}async function xI(e){const t=ns(e);for(const n of e.K_)t.S_(n.mutations)}async function MI(e,t,n){const s=e.K_.shift(),r=gu.from(s,t,n);await Qg(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Ba(e)}async function LI(e,t){t&&ns(e).b_&&await async function(s,r){if(function(a){return _b(a)&&a!==U.ABORTED}(r.code)){const i=s.K_.shift();ns(s).h_(),await Qg(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Ba(s)}}(e,t),Yg(e)&&Xg(e)}async function wd(e,t){const n=pt(e);n.asyncQueue.verifyOperationInProgress(),Z(Ms,"RemoteStore received new credentials");const s=js(n);n.W_.add(3),await $i(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Ua(n)}async function kI(e,t){const n=pt(e);t?(n.W_.delete(2),await Ua(n)):t||(n.W_.add(2),await $i(n),n.j_.set("Unknown"))}function xr(e){return e.J_||(e.J_=function(n,s,r){const i=pt(n);return i.M_(),new TI(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{xo:CI.bind(null,e),No:RI.bind(null,e),Lo:DI.bind(null,e),p_:PI.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),Su(e)?Iu(e):e.j_.set("Unknown")):(await e.J_.stop(),Gg(e))})),e.J_}function ns(e){return e.Y_||(e.Y_=function(n,s,r){const i=pt(n);return i.M_(),new wI(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:VI.bind(null,e),Lo:LI.bind(null,e),D_:xI.bind(null,e),v_:MI.bind(null,e)}),e.G_.push(async t=>{t?(e.Y_.h_(),await Ba(e)):(await e.Y_.stop(),e.K_.length>0&&(Z(Ms,`Stopping write stream with ${e.K_.length} pending writes`),e.K_=[]))})),e.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t,n,s,r,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,r,i){const a=Date.now()+s,l=new Cu(t,n,a,r,i);return l.start(s),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(U.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ru(e,t){if(Rn("AsyncQueue",`${t}: ${e}`),Vr(e))return new st(U.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{static emptySet(t){return new dr(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||at.comparator(n.key,s.key):(n,s)=>at.comparator(n.key,s.key),this.keyedMap=ri(),this.sortedSet=new Ft(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof dr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new dr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(){this.Z_=new Ft(at.comparator)}track(t){const n=t.doc.key,s=this.Z_.get(n);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(n):t.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):ut():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,s)=>{t.push(s)}),t}}class wr{constructor(t,n,s,r,i,a,l,c,h){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,n,s,r,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new wr(t,n,dr.emptySet(n),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class FI{constructor(){this.queries=bd(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const r=pt(n),i=r.queries;r.queries=bd(),i.forEach((a,l)=>{for(const c of l.ta)c.onError(s)})})(this,new st(U.ABORTED,"Firestore shutting down"))}}function bd(){return new Bs(e=>_g(e),xa)}async function UI(e,t){const n=pt(e);let s=3;const r=t.query;let i=n.queries.get(r);i?!i.na()&&t.ra()&&(s=2):(i=new $I,s=t.ra()?0:1);try{switch(s){case 0:i.ea=await n.onListen(r,!0);break;case 1:i.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Ru(a,`Initialization of query '${tr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,i),i.ta.push(t),t.sa(n.onlineState),i.ea&&t.oa(i.ea)&&Du(n)}async function BI(e,t){const n=pt(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const a=i.ta.indexOf(t);a>=0&&(i.ta.splice(a,1),i.ta.length===0?r=t.ra()?0:1:!i.na()&&t.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function jI(e,t){const n=pt(e);let s=!1;for(const r of t){const i=r.query,a=n.queries.get(i);if(a){for(const l of a.ta)l.oa(r)&&(s=!0);a.ea=r}}s&&Du(n)}function HI(e,t,n){const s=pt(e),r=s.queries.get(t);if(r)for(const i of r.ta)i.onError(n);s.queries.delete(t)}function Du(e){e.ia.forEach(t=>{t.next()})}var Nc,Id;(Id=Nc||(Nc={}))._a="default",Id.Cache="cache";class KI{constructor(t,n,s){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new wr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=wr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Nc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t){this.key=t}}class Zg{constructor(t){this.key=t}}class qI{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Et(),this.mutatedKeys=Et(),this.ya=yg(t),this.wa=new dr(this.ya)}get ba(){return this.fa}Sa(t,n){const s=n?n.Da:new Ad,r=n?n.wa:this.wa;let i=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,m)=>{const v=r.get(d),E=Ma(this.query,m)?m:null,P=!!v&&this.mutatedKeys.has(v.key),O=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let N=!1;v&&E?v.data.isEqual(E.data)?P!==O&&(s.track({type:3,doc:E}),N=!0):this.va(v,E)||(s.track({type:2,doc:E}),N=!0,(c&&this.ya(E,c)>0||h&&this.ya(E,h)<0)&&(l=!0)):!v&&E?(s.track({type:0,doc:E}),N=!0):v&&!E&&(s.track({type:1,doc:v}),N=!0,(c||h)&&(l=!0)),N&&(E?(a=a.add(E),i=O?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{wa:a,Da:s,ls:l,mutatedKeys:i}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,r){const i=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const a=t.Da.X_();a.sort((d,m)=>function(E,P){const O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return O(E)-O(P)}(d.type,m.type)||this.ya(d.doc,m.doc)),this.Ca(s),r=r!=null&&r;const l=n&&!r?this.Fa():[],c=this.pa.size===0&&this.current&&!r?1:0,h=c!==this.ga;return this.ga=c,a.length!==0||h?{snapshot:new wr(this.query,t.wa,i,a,t.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Ad,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Et(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return t.forEach(s=>{this.pa.has(s)||n.push(new Zg(s))}),this.pa.forEach(s=>{t.has(s)||n.push(new Jg(s))}),n}Oa(t){this.fa=t.gs,this.pa=Et();const n=this.Sa(t.documents);return this.applyChanges(n,!0)}Na(){return wr.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Pu="SyncEngine";class WI{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class zI{constructor(t){this.key=t,this.Ba=!1}}class GI{constructor(t,n,s,r,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Bs(l=>_g(l),xa),this.qa=new Map,this.Qa=new Set,this.$a=new Ft(at.comparator),this.Ka=new Map,this.Ua=new vu,this.Wa={},this.Ga=new Map,this.za=Tr.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function QI(e,t,n=!0){const s=i_(e);let r;const i=s.ka.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Na()):r=await t_(s,t,n,!0),r}async function YI(e,t){const n=i_(e);await t_(n,t,!0,!1)}async function t_(e,t,n,s){const r=await dI(e.localStore,an(t)),i=r.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await XI(e,t,i,a==="current",r.resumeToken)),e.isPrimaryClient&&n&&Wg(e.remoteStore,r),l}async function XI(e,t,n,s,r){e.Ha=(m,v,E)=>async function(O,N,K,W){let G=N.view.Sa(K);G.ls&&(G=await _d(O.localStore,N.query,!1).then(({documents:A})=>N.view.Sa(A,G)));const L=W&&W.targetChanges.get(N.targetId),tt=W&&W.targetMismatches.get(N.targetId)!=null,nt=N.view.applyChanges(G,O.isPrimaryClient,L,tt);return Cd(O,N.targetId,nt.Ma),nt.snapshot}(e,m,v,E);const i=await _d(e.localStore,t,!0),a=new qI(t,i.gs),l=a.Sa(i.documents),c=ki.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",r),h=a.applyChanges(l,e.isPrimaryClient,c);Cd(e,n,h.Ma);const d=new WI(t,n,a);return e.ka.set(t,d),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),h.snapshot}async function JI(e,t,n){const s=pt(e),r=s.ka.get(t),i=s.qa.get(r.targetId);if(i.length>1)return s.qa.set(r.targetId,i.filter(a=>!xa(a,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Pc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Au(s.remoteStore,r.targetId),Vc(s,r.targetId)}).catch(Nr)):(Vc(s,r.targetId),await Pc(s.localStore,r.targetId,!0))}async function ZI(e,t){const n=pt(e),s=n.ka.get(t),r=n.qa.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Au(n.remoteStore,s.targetId))}async function t0(e,t,n){const s=a0(e);try{const r=await function(a,l){const c=pt(a),h=zt.now(),d=l.reduce((E,P)=>E.add(P.key),Et());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let P=Dn(),O=Et();return c.ds.getEntries(E,d).next(N=>{P=N,P.forEach((K,W)=>{W.isValidDocument()||(O=O.add(K))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,P)).next(N=>{m=N;const K=[];for(const W of l){const G=fb(W,m.get(W.key).overlayedDocument);G!=null&&K.push(new fs(W.key,G,cg(G.value.mapValue),ln.exists(!0)))}return c.mutationQueue.addMutationBatch(E,h,K,l)}).next(N=>{v=N;const K=N.applyToLocalDocumentSet(m,O);return c.documentOverlayCache.saveOverlays(E,N.batchId,K)})}).then(()=>({batchId:v.batchId,changes:Eg(m)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let h=a.Wa[a.currentUser.toKey()];h||(h=new Ft(Tt)),h=h.insert(l,c),a.Wa[a.currentUser.toKey()]=h}(s,r.batchId,n),await Fi(s,r.changes),await Ba(s.remoteStore)}catch(r){const i=Ru(r,"Failed to persist write");n.reject(i)}}async function e_(e,t){const n=pt(e);try{const s=await uI(n.localStore,t);t.targetChanges.forEach((r,i)=>{const a=n.Ka.get(i);a&&(Ct(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ba=!0:r.modifiedDocuments.size>0?Ct(a.Ba):r.removedDocuments.size>0&&(Ct(a.Ba),a.Ba=!1))}),await Fi(n,s,t)}catch(s){await Nr(s)}}function Sd(e,t,n){const s=pt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.ka.forEach((i,a)=>{const l=a.view.sa(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=pt(a);c.onlineState=l;let h=!1;c.queries.forEach((d,m)=>{for(const v of m.ta)v.sa(l)&&(h=!0)}),h&&Du(c)}(s.eventManager,t),r.length&&s.La.p_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function e0(e,t,n){const s=pt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Ka.get(t),i=r&&r.key;if(i){let a=new Ft(at.comparator);a=a.insert(i,de.newNoDocument(i,dt.min()));const l=Et().add(i),c=new $a(dt.min(),new Map,new Ft(Tt),a,l);await e_(s,c),s.$a=s.$a.remove(i),s.Ka.delete(t),Ou(s)}else await Pc(s.localStore,t,!1).then(()=>Vc(s,t,n)).catch(Nr)}async function n0(e,t){const n=pt(e),s=t.batch.batchId;try{const r=await cI(n.localStore,t);s_(n,s,null),n_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Fi(n,r)}catch(r){await Nr(r)}}async function s0(e,t,n){const s=pt(e);try{const r=await function(a,l){const c=pt(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(Ct(m!==null),d=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(s.localStore,t);s_(s,t,n),n_(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Fi(s,r)}catch(r){await Nr(r)}}function n_(e,t){(e.Ga.get(t)||[]).forEach(n=>{n.resolve()}),e.Ga.delete(t)}function s_(e,t,n){const s=pt(e);let r=s.Wa[s.currentUser.toKey()];if(r){const i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),s.Wa[s.currentUser.toKey()]=r}}function Vc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.qa.get(t))e.ka.delete(s),n&&e.La.Ja(s,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.Sr(t).forEach(s=>{e.Ua.containsKey(s)||r_(e,s)})}function r_(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(Au(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),Ou(e))}function Cd(e,t,n){for(const s of n)s instanceof Jg?(e.Ua.addReference(s.key,t),r0(e,s)):s instanceof Zg?(Z(Pu,"Document no longer in limbo: "+s.key),e.Ua.removeReference(s.key,t),e.Ua.containsKey(s.key)||r_(e,s.key)):ut()}function r0(e,t){const n=t.key,s=n.path.canonicalString();e.$a.get(n)||e.Qa.has(s)||(Z(Pu,"New document in limbo: "+n),e.Qa.add(s),Ou(e))}function Ou(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new at(kt.fromString(t)),s=e.za.next();e.Ka.set(s,new zI(n)),e.$a=e.$a.insert(n,s),Wg(e.remoteStore,new Hn(an(gg(n.path)),s,"TargetPurposeLimboResolution",Pa.ae))}}async function Fi(e,t,n){const s=pt(e),r=[],i=[],a=[];s.ka.isEmpty()||(s.ka.forEach((l,c)=>{a.push(s.Ha(c,t,n).then(h=>{var d;if((h||n)&&s.isPrimaryClient){const m=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){r.push(h);const m=Tu.Yi(c.targetId,h);i.push(m)}}))}),await Promise.all(a),s.La.p_(r),await async function(c,h){const d=pt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(h,v=>V.forEach(v.Hi,E=>d.persistence.referenceDelegate.addReference(m,v.targetId,E)).next(()=>V.forEach(v.Ji,E=>d.persistence.referenceDelegate.removeReference(m,v.targetId,E)))))}catch(m){if(!Vr(m))throw m;Z(wu,"Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const E=d.Ts.get(v),P=E.snapshotVersion,O=E.withLastLimboFreeSnapshotVersion(P);d.Ts=d.Ts.insert(v,O)}}}(s.localStore,i))}async function i0(e,t){const n=pt(e);if(!n.currentUser.isEqual(t)){Z(Pu,"User change. New user:",t.toKey());const s=await jg(n.localStore,t);n.currentUser=t,function(i,a){i.Ga.forEach(l=>{l.forEach(c=>{c.reject(new st(U.CANCELLED,a))})}),i.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Fi(n,s.Rs)}}function o0(e,t){const n=pt(e),s=n.Ka.get(t);if(s&&s.Ba)return Et().add(s.key);{let r=Et();const i=n.qa.get(t);if(!i)return r;for(const a of i){const l=n.ka.get(a);r=r.unionWith(l.view.ba)}return r}}function i_(e){const t=pt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=e_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=o0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=e0.bind(null,t),t.La.p_=jI.bind(null,t.eventManager),t.La.Ja=HI.bind(null,t.eventManager),t}function a0(e){const t=pt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=n0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=s0.bind(null,t),t}class ca{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Fa(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return lI(this.persistence,new iI,t.initialUser,this.serializer)}Xa(t){return new Bg(Eu.ri,this.serializer)}Za(t){return new mI}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ca.provider={build:()=>new ca};class l0 extends ca{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Ct(this.persistence.referenceDelegate instanceof aa);const s=this.persistence.referenceDelegate.garbageCollector;return new Kb(s,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?be.withCacheSize(this.cacheSizeBytes):be.DEFAULT;return new Bg(s=>aa.ri(s,n),this.serializer)}}class xc{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Sd(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=i0.bind(null,this.syncEngine),await kI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new FI}()}createDatastore(t){const n=Fa(t.databaseInfo.databaseId),s=function(i){return new EI(i)}(t.databaseInfo);return function(i,a,l,c){return new bI(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,r,i,a,l){return new SI(s,r,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Sd(this.syncEngine,n,0),function(){return Ed.D()?new Ed:new gI}())}createSyncEngine(t,n){return function(r,i,a,l,c,h,d){const m=new GI(r,i,a,l,c,h);return d&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const i=pt(r);Z(Ms,"RemoteStore shutting down."),i.W_.add(5),await $i(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xc.provider={build:()=>new xc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Rn("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="FirestoreClient";class u0{constructor(t,n,s,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=ue.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{Z(ss,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(Z(ss,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Ru(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function kl(e,t){e.asyncQueue.verifyOperationInProgress(),Z(ss,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async r=>{s.isEqual(r)||(await jg(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Rd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await h0(e);Z(ss,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>wd(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,r)=>wd(t.remoteStore,r)),e._onlineComponents=t}async function h0(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Z(ss,"Using user provided OfflineComponentProvider");try{await kl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;gr("Error using user provided cache. Falling back to memory cache: "+n),await kl(e,new ca)}}else Z(ss,"Using default OfflineComponentProvider"),await kl(e,new l0(void 0));return e._offlineComponents}async function o_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Z(ss,"Using user provided OnlineComponentProvider"),await Rd(e,e._uninitializedComponentsProvider._online)):(Z(ss,"Using default OnlineComponentProvider"),await Rd(e,new xc))),e._onlineComponents}function f0(e){return o_(e).then(t=>t.syncEngine)}async function d0(e){const t=await o_(e),n=t.eventManager;return n.onListen=QI.bind(null,t.syncEngine),n.onUnlisten=JI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=YI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ZI.bind(null,t.syncEngine),n}function p0(e,t,n={}){const s=new Gn;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,h){const d=new c0({next:v=>{d.su(),a.enqueueAndForget(()=>BI(i,m)),v.fromCache&&c.source==="server"?h.reject(new st(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new KI(l,d,{includeMetadataChanges:!0,Ta:!0});return UI(i,m)}(await d0(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(e,t,n){if(!n)throw new st(U.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function m0(e,t,n,s){if(t===!0&&s===!0)throw new st(U.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Pd(e){if(!at.isDocumentKey(e))throw new st(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Od(e){if(at.isDocumentKey(e))throw new st(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Nu(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ut()}function Ls(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new st(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nu(e);throw new st(U.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="firestore.googleapis.com",Nd=!0;class Vd{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new st(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c_,this.ssl=Nd}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Nd;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ug;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<jb)throw new st(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}m0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a_((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new st(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new st(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new st(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ja{constructor(t,n,s,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new st(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vd(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _A;switch(s.type){case"firstParty":return new TA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new st(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Dd.get(n);s&&(Z("ComponentProvider","Removing Datastore"),Dd.delete(n),s.terminate())}(this),Promise.resolve()}}function g0(e,t,n,s={}){var r;const i=(e=Ls(e,ja))._getSettings(),a=Object.assign(Object.assign({},i),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;i.host!==c_&&i.host!==l&&gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},i),{host:l,ssl:!1,emulatorOptions:s});if(!mr(c,a)&&(e._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=ue.MOCK_USER;else{h=QT(s.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new st(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ue(m)}e._authCredentials=new yA(new Jm(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Ha(this.firestore,t,this._query)}}class Me{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Me(this.firestore,t,this._key)}}class Qn extends Ha{constructor(t,n,s){super(t,n,gg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Me(this.firestore,null,new at(t))}withConverter(t){return new Qn(this.firestore,t,this._path)}}function xd(e,t,...n){if(e=pn(e),l_("collection","path",t),e instanceof ja){const s=kt.fromString(t,...n);return Od(s),new Qn(e,null,s)}{if(!(e instanceof Me||e instanceof Qn))throw new st(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(kt.fromString(t,...n));return Od(s),new Qn(e.firestore,null,s)}}function Md(e,t,...n){if(e=pn(e),arguments.length===1&&(t=Zm.newId()),l_("doc","path",t),e instanceof ja){const s=kt.fromString(t,...n);return Pd(s),new Me(e,null,new at(s))}{if(!(e instanceof Me||e instanceof Qn))throw new st(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(kt.fromString(t,...n));return Pd(s),new Me(e.firestore,e instanceof Qn?e.converter:null,new at(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="AsyncQueue";class kd{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Kg(this,"async_queue_retry"),this.bu=()=>{const s=Ll();s&&Z(Ld,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=t;const n=Ll();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=Ll();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Gn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Vr(t))throw t;Z(Ld,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.Su.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(s);throw Rn("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.pu=!1,s))));return this.Su=n,n}enqueueAfterDelay(t,n,s){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const r=Cu.createAndSchedule(this,t,n,s,i=>this.Fu(i));return this.fu.push(r),r}Du(){this.gu&&ut()}verifyOperationInProgress(){}async Mu(){let t;do t=this.Su,await t;while(t!==this.Su)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class Ka extends ja{constructor(t,n,s,r){super(t,n,s,r),this.type="firestore",this._queue=new kd,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new kd(t),this._firestoreClient=void 0,await t}}}function _0(e,t){const n=typeof e=="object"?e:Hm(),s=typeof e=="string"?e:ta,r=Mi(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=zT("firestore");i&&g0(r,...i)}return r}function u_(e){if(e._terminated)throw new st(U.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||y0(e),e._firestoreClient}function y0(e){var t,n,s;const r=e._freezeSettings(),i=function(l,c,h,d){return new MA(l,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,a_(d.experimentalLongPollingOptions),d.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new u0(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ar(se.fromBase64String(t))}catch(n){throw new st(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ar(se.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new st(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ne(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new st(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new st(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Tt(this._lat,t._lat)||Tt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=/^__.*__$/;class E0{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new fs(t,this.data,this.fieldMask,n,this.fieldTransforms):new Li(t,this.data,n,this.fieldTransforms)}}class h_{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new fs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function f_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class za{constructor(t,n,s,r,i,a){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new za(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:s,Qu:!1});return r.$u(t),r}Ku(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:s,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return ua(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(f_(this.Lu)&&v0.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class T0{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Fa(t)}ju(t,n,s,r=!1){return new za({Lu:t,methodName:n,zu:s,path:ne.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function d_(e){const t=e._freezeSettings(),n=Fa(e._databaseId);return new T0(e._databaseId,!!t.ignoreUndefinedProperties,n)}function w0(e,t,n,s,r,i={}){const a=e.ju(i.merge||i.mergeFields?2:0,t,n,r);Lu("Data must be an object, but it was:",a,s);const l=p_(s,a);let c,h;if(i.merge)c=new xe(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const v=Mc(t,m,n);if(!a.contains(v))throw new st(U.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);g_(d,v)||d.push(v)}c=new xe(d),h=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=a.fieldTransforms;return new E0(new Ie(l),c,h)}class Ga extends Wa{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ga}}function A0(e,t,n){return new za({Lu:3,zu:t.settings.zu,methodName:e._methodName,Qu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Mu extends Wa{constructor(t,n){super(t),this.Hu=n}_toFieldTransform(t){const n=A0(this,t,!0),s=this.Hu.map(i=>Ui(i,n)),r=new Er(s);return new lb(t.path,r)}isEqual(t){return t instanceof Mu&&mr(this.Hu,t.Hu)}}function b0(e,t,n,s){const r=e.ju(1,t,n);Lu("Data must be an object, but it was:",r,s);const i=[],a=Ie.empty();hs(s,(c,h)=>{const d=ku(t,c,n);h=pn(h);const m=r.Ku(d);if(h instanceof Ga)i.push(d);else{const v=Ui(h,m);v!=null&&(i.push(d),a.set(d,v))}});const l=new xe(i);return new h_(a,l,r.fieldTransforms)}function I0(e,t,n,s,r,i){const a=e.ju(1,t,n),l=[Mc(t,s,n)],c=[r];if(i.length%2!=0)throw new st(U.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(Mc(t,i[v])),c.push(i[v+1]);const h=[],d=Ie.empty();for(let v=l.length-1;v>=0;--v)if(!g_(h,l[v])){const E=l[v];let P=c[v];P=pn(P);const O=a.Ku(E);if(P instanceof Ga)h.push(E);else{const N=Ui(P,O);N!=null&&(h.push(E),d.set(E,N))}}const m=new xe(h);return new h_(d,m,a.fieldTransforms)}function Ui(e,t){if(m_(e=pn(e)))return Lu("Unsupported field value:",t,e),p_(e,t);if(e instanceof Wa)return function(s,r){if(!f_(r.Lu))throw r.Wu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const l of s){let c=Ui(l,r.Uu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(e,t)}return function(s,r){if((s=pn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ib(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=zt.fromDate(s);return{timestampValue:oa(r.serializer,i)}}if(s instanceof zt){const i=new zt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:oa(r.serializer,i)}}if(s instanceof Vu)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ar)return{bytesValue:Vg(r.serializer,s._byteString)};if(s instanceof Me){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof xu)return function(a,l){return{mapValue:{fields:{[ag]:{stringValue:lg},[ea]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return mu(l.serializer,h)})}}}}}}(s,r);throw r.Wu(`Unsupported field value: ${Nu(s)}`)}(e,t)}function p_(e,t){const n={};return eg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hs(e,(s,r)=>{const i=Ui(r,t.qu(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function m_(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof zt||e instanceof Vu||e instanceof Ar||e instanceof Me||e instanceof Wa||e instanceof xu)}function Lu(e,t,n){if(!m_(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Nu(n);throw s==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+s)}}function Mc(e,t,n){if((t=pn(t))instanceof qa)return t._internalPath;if(typeof t=="string")return ku(e,t);throw ua("Field path arguments must be of type string or ",e,!1,void 0,n)}const S0=new RegExp("[~\\*/\\[\\]]");function ku(e,t,n){if(t.search(S0)>=0)throw ua(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qa(...t.split("."))._internalPath}catch{throw ua(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ua(e,t,n,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${s}`),a&&(c+=` in document ${r}`),c+=")"),new st(U.INVALID_ARGUMENT,l+e+c)}function g_(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(t,n,s,r,i){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new C0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(y_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class C0 extends __{data(){return super.data()}}function y_(e,t){return typeof t=="string"?ku(e,t):t instanceof qa?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new st(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D0{convertValue(t,n="none"){switch(es(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ts(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ut()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return hs(t,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(t){var n,s,r;const i=(r=(s=(n=t.fields)===null||n===void 0?void 0:n[ea].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(a=>jt(a.doubleValue));return new xu(i)}convertGeoPoint(t){return new Vu(jt(t.latitude),jt(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Na(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ci(t));default:return null}}convertTimestamp(t){const n=Zn(t);return new zt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=kt.fromString(t);Ct(Fg(s));const r=new Ri(s.get(1),s.get(3)),i=new at(s.popFirst(5));return r.isEqual(n)||Rn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(e,t,n){let s;return s=e?e.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class O0 extends __{constructor(t,n,s,r,i,a){super(t,n,s,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new $o(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(y_("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class $o extends O0{data(t={}){return super.data(t)}}class N0{constructor(t,n,s,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new yo(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new $o(this._firestore,this._userDataWriter,s.key,s,new yo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new st(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new $o(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new $o(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:V0(l.type),doc:c,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function V0(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}class x0 extends D0{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ar(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Me(this.firestore,null,n)}}function $d(e){e=Ls(e,Ha);const t=Ls(e.firestore,Ka),n=u_(t),s=new x0(t);return R0(e._query),p0(n,e._query).then(r=>new N0(t,s,e,r))}function M0(e,t,n){e=Ls(e,Me);const s=Ls(e.firestore,Ka),r=P0(e.converter,t);return v_(s,[w0(d_(s),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,ln.none())])}function L0(e,t,n,...s){e=Ls(e,Me);const r=Ls(e.firestore,Ka),i=d_(r);let a;return a=typeof(t=pn(t))=="string"||t instanceof qa?I0(i,"updateDoc",e._key,t,n,s):b0(i,"updateDoc",e._key,t),v_(r,[a.toMutation(e._key,ln.exists(!0))])}function v_(e,t){return function(s,r){const i=new Gn;return s.asyncQueue.enqueueAndForget(async()=>t0(await f0(s),r,i)),i.promise}(u_(e),t)}function k0(...e){return new Mu("arrayUnion",e)}(function(t,n=!0){(function(r){Or=r})(oA),Xn(new Sn("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),l=new Ka(new vA(s.getProvider("auth-internal")),new wA(a,s.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new st(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ri(h.options.projectId,d)}(a,r),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),on(jf,Hf,t),on(jf,Hf,"esm2017")})();var $0="firebase",F0="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on($0,F0,"app");const E_="@firebase/installations",$u="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=1e4,w_=`w:${$u}`,A_="FIS_v2",U0="https://firebaseinstallations.googleapis.com/v1",B0=60*60*1e3,j0="installations",H0="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ks=new Da(j0,H0,K0);function b_(e){return e instanceof us&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_({projectId:e}){return`${U0}/projects/${e}/installations`}function S_(e){return{token:e.token,requestStatus:2,expiresIn:W0(e.expiresIn),creationTime:Date.now()}}async function C_(e,t){const s=(await t.json()).error;return ks.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function R_({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function q0(e,{refreshToken:t}){const n=R_(e);return n.append("Authorization",z0(t)),n}async function D_(e){const t=await e();return t.status>=500&&t.status<600?e():t}function W0(e){return Number(e.replace("s","000"))}function z0(e){return`${A_} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=I_(e),r=R_(e),i=t.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const a={fid:n,authVersion:A_,appId:e.appId,sdkVersion:w_},l={method:"POST",headers:r,body:JSON.stringify(a)},c=await D_(()=>fetch(s,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:S_(h.authToken)}}else throw await C_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=/^[cdef][\w-]{21}$/,Lc="";function X0(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=J0(e);return Y0.test(n)?n:Lc}catch{return Lc}}function J0(e){return Q0(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;function N_(e,t){const n=Qa(e);V_(n,t),Z0(n,t)}function V_(e,t){const n=O_.get(e);if(n)for(const s of n)s(t)}function Z0(e,t){const n=tS();n&&n.postMessage({key:e,fid:t}),eS()}let Cs=null;function tS(){return!Cs&&"BroadcastChannel"in self&&(Cs=new BroadcastChannel("[Firebase] FID Change"),Cs.onmessage=e=>{V_(e.data.key,e.data.fid)}),Cs}function eS(){O_.size===0&&Cs&&(Cs.close(),Cs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firebase-installations-database",sS=1,$s="firebase-installations-store";let $l=null;function Fu(){return $l||($l=Bm(nS,sS,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore($s)}}})),$l}async function ha(e,t){const n=Qa(e),r=(await Fu()).transaction($s,"readwrite"),i=r.objectStore($s),a=await i.get(n);return await i.put(t,n),await r.done,(!a||a.fid!==t.fid)&&N_(e,t.fid),t}async function x_(e){const t=Qa(e),s=(await Fu()).transaction($s,"readwrite");await s.objectStore($s).delete(t),await s.done}async function Ya(e,t){const n=Qa(e),r=(await Fu()).transaction($s,"readwrite"),i=r.objectStore($s),a=await i.get(n),l=t(a);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!a||a.fid!==l.fid)&&N_(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(e){let t;const n=await Ya(e.appConfig,s=>{const r=rS(s),i=iS(e,r);return t=i.registrationPromise,i.installationEntry});return n.fid===Lc?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function rS(e){const t=e||{fid:X0(),registrationStatus:0};return M_(t)}function iS(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ks.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=oS(e,n);return{installationEntry:n,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:aS(e)}:{installationEntry:t}}async function oS(e,t){try{const n=await G0(e,t);return ha(e.appConfig,n)}catch(n){throw b_(n)&&n.customData.serverCode===409?await x_(e.appConfig):await ha(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function aS(e){let t=await Fd(e.appConfig);for(;t.registrationStatus===1;)await P_(100),t=await Fd(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Uu(e);return s||n}return t}function Fd(e){return Ya(e,t=>{if(!t)throw ks.create("installation-not-found");return M_(t)})}function M_(e){return lS(e)?{fid:e.fid,registrationStatus:0}:e}function lS(e){return e.registrationStatus===1&&e.registrationTime+T_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS({appConfig:e,heartbeatServiceProvider:t},n){const s=uS(e,n),r=q0(e,n),i=t.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const a={installation:{sdkVersion:w_,appId:e.appId}},l={method:"POST",headers:r,body:JSON.stringify(a)},c=await D_(()=>fetch(s,l));if(c.ok){const h=await c.json();return S_(h)}else throw await C_("Generate Auth Token",c)}function uS(e,{fid:t}){return`${I_(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(e,t=!1){let n;const s=await Ya(e.appConfig,i=>{if(!L_(i))throw ks.create("not-registered");const a=i.authToken;if(!t&&dS(a))return i;if(a.requestStatus===1)return n=hS(e,t),i;{if(!navigator.onLine)throw ks.create("app-offline");const l=mS(i);return n=fS(e,l),l}});return n?await n:s.authToken}async function hS(e,t){let n=await Ud(e.appConfig);for(;n.authToken.requestStatus===1;)await P_(100),n=await Ud(e.appConfig);const s=n.authToken;return s.requestStatus===0?Bu(e,t):s}function Ud(e){return Ya(e,t=>{if(!L_(t))throw ks.create("not-registered");const n=t.authToken;return gS(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function fS(e,t){try{const n=await cS(e,t),s=Object.assign(Object.assign({},t),{authToken:n});return await ha(e.appConfig,s),n}catch(n){if(b_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await x_(e.appConfig);else{const s=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ha(e.appConfig,s)}throw n}}function L_(e){return e!==void 0&&e.registrationStatus===2}function dS(e){return e.requestStatus===2&&!pS(e)}function pS(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+B0}function mS(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function gS(e){return e.requestStatus===1&&e.requestTime+T_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(e){const t=e,{installationEntry:n,registrationPromise:s}=await Uu(t);return s?s.catch(console.error):Bu(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(e,t=!1){const n=e;return await vS(n),(await Bu(n,t)).token}async function vS(e){const{registrationPromise:t}=await Uu(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(e){if(!e||!e.options)throw Fl("App Configuration");if(!e.name)throw Fl("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Fl(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Fl(e){return ks.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="installations",TS="installations-internal",wS=e=>{const t=e.getProvider("app").getImmediate(),n=ES(t),s=Mi(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},AS=e=>{const t=e.getProvider("app").getImmediate(),n=Mi(t,k_).getImmediate();return{getId:()=>_S(n),getToken:r=>yS(n,r)}};function bS(){Xn(new Sn(k_,wS,"PUBLIC")),Xn(new Sn(TS,AS,"PRIVATE"))}bS();on(E_,$u);on(E_,$u,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="analytics",IS="firebase_id",SS="origin",CS=60*1e3,RS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ju="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce=new au("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Le=new Da("analytics","Analytics",DS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(e){if(!e.startsWith(ju)){const t=Le.create("invalid-gtag-resource",{gtagURL:e});return Ce.warn(t.message),""}return e}function $_(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function OS(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function NS(e,t){const n=OS("firebase-js-sdk-policy",{createScriptURL:PS}),s=document.createElement("script"),r=`${ju}?l=${e}&id=${t}`;s.src=n?n==null?void 0:n.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function VS(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function xS(e,t,n,s,r,i){const a=s[r];try{if(a)await t[a];else{const c=(await $_(n)).find(h=>h.measurementId===r);c&&await t[c.appId]}}catch(l){Ce.error(l)}e("config",r,i)}async function MS(e,t,n,s,r){try{let i=[];if(r&&r.send_to){let a=r.send_to;Array.isArray(a)||(a=[a]);const l=await $_(n);for(const c of a){const h=l.find(m=>m.measurementId===c),d=h&&t[h.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(t)),await Promise.all(i),e("event",s,r||{})}catch(i){Ce.error(i)}}function LS(e,t,n,s){async function r(i,...a){try{if(i==="event"){const[l,c]=a;await MS(e,t,n,l,c)}else if(i==="config"){const[l,c]=a;await xS(e,t,n,s,l,c)}else if(i==="consent"){const[l,c]=a;e("consent",l,c)}else if(i==="get"){const[l,c,h]=a;e("get",l,c,h)}else if(i==="set"){const[l]=a;e("set",l)}else e(i,...a)}catch(l){Ce.error(l)}}return r}function kS(e,t,n,s,r){let i=function(...a){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=LS(i,e,t,n),{gtagCore:i,wrappedGtag:window[r]}}function $S(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ju)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=30,US=1e3;class BS{constructor(t={},n=US){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const F_=new BS;function jS(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function HS(e){var t;const{appId:n,apiKey:s}=e,r={method:"GET",headers:jS(s)},i=RS.replace("{app-id}",n),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let l="";try{const c=await a.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch{}throw Le.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function KS(e,t=F_,n){const{appId:s,apiKey:r,measurementId:i}=e.options;if(!s)throw Le.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Le.create("no-api-key")}const a=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new zS;return setTimeout(async()=>{l.abort()},CS),U_({appId:s,apiKey:r,measurementId:i},a,l,t)}async function U_(e,{throttleEndTimeMillis:t,backoffCount:n},s,r=F_){var i;const{appId:a,measurementId:l}=e;try{await qS(s,t)}catch(c){if(l)return Ce.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:l};throw c}try{const c=await HS(e);return r.deleteThrottleMetadata(a),c}catch(c){const h=c;if(!WS(h)){if(r.deleteThrottleMetadata(a),l)return Ce.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:l};throw c}const d=Number((i=h==null?void 0:h.customData)===null||i===void 0?void 0:i.httpStatus)===503?Nf(n,r.intervalMillis,FS):Nf(n,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return r.setThrottleMetadata(a,m),Ce.debug(`Calling attemptFetch again in ${d} millis`),U_(e,m,s,r)}}function qS(e,t){return new Promise((n,s)=>{const r=Math.max(t-Date.now(),0),i=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(i),s(Le.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function WS(e){if(!(e instanceof us)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class zS{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function GS(e,t,n,s,r){if(r&&r.global){e("event",n,s);return}else{const i=await t,a=Object.assign(Object.assign({},s),{send_to:i});e("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(){if(km())try{await $m()}catch(e){return Ce.warn(Le.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return Ce.warn(Le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function YS(e,t,n,s,r,i,a){var l;const c=KS(e);c.then(E=>{n[E.measurementId]=E.appId,e.options.measurementId&&E.measurementId!==e.options.measurementId&&Ce.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>Ce.error(E)),t.push(c);const h=QS().then(E=>{if(E)return s.getId()}),[d,m]=await Promise.all([c,h]);$S(i)||NS(i,d.measurementId),r("js",new Date);const v=(l=a==null?void 0:a.config)!==null&&l!==void 0?l:{};return v[SS]="firebase",v.update=!0,m!=null&&(v[IS]=m),r("config",d.measurementId,v),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(t){this.app=t}_delete(){return delete gi[this.app.options.appId],Promise.resolve()}}let gi={},Bd=[];const jd={};let Ul="dataLayer",JS="gtag",Hd,B_,Kd=!1;function ZS(){const e=[];if(JT()&&e.push("This is a browser extension environment."),tw()||e.push("Cookies are not available."),e.length>0){const t=e.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=Le.create("invalid-analytics-context",{errorInfo:t});Ce.warn(n.message)}}function tC(e,t,n){ZS();const s=e.options.appId;if(!s)throw Le.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Ce.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Le.create("no-api-key");if(gi[s]!=null)throw Le.create("already-exists",{id:s});if(!Kd){VS(Ul);const{wrappedGtag:i,gtagCore:a}=kS(gi,Bd,jd,Ul,JS);B_=i,Hd=a,Kd=!0}return gi[s]=YS(e,Bd,jd,t,Hd,Ul,n),new XS(e)}function eC(e=Hm()){e=pn(e);const t=Mi(e,fa);return t.isInitialized()?t.getImmediate():nC(e)}function nC(e,t={}){const n=Mi(e,fa);if(n.isInitialized()){const r=n.getImmediate();if(mr(t,n.getOptions()))return r;throw Le.create("already-initialized")}return n.initialize({options:t})}function sC(e,t,n,s){e=pn(e),GS(B_,gi[e.app.options.appId],t,n,s).catch(r=>Ce.error(r))}const qd="@firebase/analytics",Wd="0.10.12";function rC(){Xn(new Sn(fa,(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return tC(s,r,n)},"PUBLIC")),Xn(new Sn("analytics-internal",e,"PRIVATE")),on(qd,Wd),on(qd,Wd,"esm2017");function e(t){try{const n=t.getProvider(fa).getImmediate();return{logEvent:(s,r,i)=>sC(n,s,r,i)}}catch(n){throw Le.create("interop-component-reg-failed",{reason:n})}}}rC();const iC={apiKey:"AIzaSyCSq22B0EGii-MJaol2OB312bk61KKzzU8",authDomain:"gantt-chart-68458.firebaseapp.com",projectId:"gantt-chart-68458",storageBucket:"gantt-chart-68458.firebasestorage.app",messagingSenderId:"29991334340",appId:"1:29991334340:web:69af9bb3196ef28d9b3491",measurementId:"G-XECTYYL0Z3",adminPasswordHash:"777"},j_=jm(iC);eC(j_);const vo=_0(j_);var Ee="top",ke="bottom",$e="right",Te="left",Xa="auto",Mr=[Ee,ke,$e,Te],Fs="start",br="end",H_="clippingParents",Hu="viewport",sr="popper",K_="reference",kc=Mr.reduce(function(e,t){return e.concat([t+"-"+Fs,t+"-"+br])},[]),Ku=[].concat(Mr,[Xa]).reduce(function(e,t){return e.concat([t,t+"-"+Fs,t+"-"+br])},[]),q_="beforeRead",W_="read",z_="afterRead",G_="beforeMain",Q_="main",Y_="afterMain",X_="beforeWrite",J_="write",Z_="afterWrite",ty=[q_,W_,z_,G_,Q_,Y_,X_,J_,Z_];function _n(e){return e?(e.nodeName||"").toLowerCase():null}function Fe(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Us(e){var t=Fe(e).Element;return e instanceof t||e instanceof Element}function qe(e){var t=Fe(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function qu(e){if(typeof ShadowRoot>"u")return!1;var t=Fe(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function oC(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},r=t.attributes[n]||{},i=t.elements[n];!qe(i)||!_n(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(a){var l=r[a];l===!1?i.removeAttribute(a):i.setAttribute(a,l===!0?"":l)}))})}function aC(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},a=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),l=a.reduce(function(c,h){return c[h]="",c},{});!qe(r)||!_n(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Wu={name:"applyStyles",enabled:!0,phase:"write",fn:oC,effect:aC,requires:["computeStyles"]};function un(e){return e.split("-")[0]}var Os=Math.max,da=Math.min,Ir=Math.round;function $c(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ey(){return!/^((?!chrome|android).)*safari/i.test($c())}function Sr(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&qe(e)&&(r=e.offsetWidth>0&&Ir(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Ir(s.height)/e.offsetHeight||1);var a=Us(e)?Fe(e):window,l=a.visualViewport,c=!ey()&&n,h=(s.left+(c&&l?l.offsetLeft:0))/r,d=(s.top+(c&&l?l.offsetTop:0))/i,m=s.width/r,v=s.height/i;return{width:m,height:v,top:d,right:h+m,bottom:d+v,left:h,x:h,y:d}}function zu(e){var t=Sr(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function ny(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&qu(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Pn(e){return Fe(e).getComputedStyle(e)}function lC(e){return["table","td","th"].indexOf(_n(e))>=0}function ds(e){return((Us(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ja(e){return _n(e)==="html"?e:e.assignedSlot||e.parentNode||(qu(e)?e.host:null)||ds(e)}function zd(e){return!qe(e)||Pn(e).position==="fixed"?null:e.offsetParent}function cC(e){var t=/firefox/i.test($c()),n=/Trident/i.test($c());if(n&&qe(e)){var s=Pn(e);if(s.position==="fixed")return null}var r=Ja(e);for(qu(r)&&(r=r.host);qe(r)&&["html","body"].indexOf(_n(r))<0;){var i=Pn(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Bi(e){for(var t=Fe(e),n=zd(e);n&&lC(n)&&Pn(n).position==="static";)n=zd(n);return n&&(_n(n)==="html"||_n(n)==="body"&&Pn(n).position==="static")?t:n||cC(e)||t}function Gu(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function _i(e,t,n){return Os(e,da(t,n))}function uC(e,t,n){var s=_i(e,t,n);return s>n?n:s}function sy(){return{top:0,right:0,bottom:0,left:0}}function ry(e){return Object.assign({},sy(),e)}function iy(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var hC=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,ry(typeof t!="number"?t:iy(t,Mr))};function fC(e){var t,n=e.state,s=e.name,r=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,l=un(n.placement),c=Gu(l),h=[Te,$e].indexOf(l)>=0,d=h?"height":"width";if(!(!i||!a)){var m=hC(r.padding,n),v=zu(i),E=c==="y"?Ee:Te,P=c==="y"?ke:$e,O=n.rects.reference[d]+n.rects.reference[c]-a[c]-n.rects.popper[d],N=a[c]-n.rects.reference[c],K=Bi(i),W=K?c==="y"?K.clientHeight||0:K.clientWidth||0:0,G=O/2-N/2,L=m[E],tt=W-v[d]-m[P],nt=W/2-v[d]/2+G,A=_i(L,nt,tt),g=c;n.modifiersData[s]=(t={},t[g]=A,t.centerOffset=A-nt,t)}}function dC(e){var t=e.state,n=e.options,s=n.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||ny(t.elements.popper,r)&&(t.elements.arrow=r))}const oy={name:"arrow",enabled:!0,phase:"main",fn:fC,effect:dC,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cr(e){return e.split("-")[1]}var pC={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mC(e,t){var n=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Ir(n*r)/r||0,y:Ir(s*r)/r||0}}function Gd(e){var t,n=e.popper,s=e.popperRect,r=e.placement,i=e.variation,a=e.offsets,l=e.position,c=e.gpuAcceleration,h=e.adaptive,d=e.roundOffsets,m=e.isFixed,v=a.x,E=v===void 0?0:v,P=a.y,O=P===void 0?0:P,N=typeof d=="function"?d({x:E,y:O}):{x:E,y:O};E=N.x,O=N.y;var K=a.hasOwnProperty("x"),W=a.hasOwnProperty("y"),G=Te,L=Ee,tt=window;if(h){var nt=Bi(n),A="clientHeight",g="clientWidth";if(nt===Fe(n)&&(nt=ds(n),Pn(nt).position!=="static"&&l==="absolute"&&(A="scrollHeight",g="scrollWidth")),nt=nt,r===Ee||(r===Te||r===$e)&&i===br){L=ke;var _=m&&nt===tt&&tt.visualViewport?tt.visualViewport.height:nt[A];O-=_-s.height,O*=c?1:-1}if(r===Te||(r===Ee||r===ke)&&i===br){G=$e;var w=m&&nt===tt&&tt.visualViewport?tt.visualViewport.width:nt[g];E-=w-s.width,E*=c?1:-1}}var b=Object.assign({position:l},h&&pC),S=d===!0?mC({x:E,y:O},Fe(n)):{x:E,y:O};if(E=S.x,O=S.y,c){var y;return Object.assign({},b,(y={},y[L]=W?"0":"",y[G]=K?"0":"",y.transform=(tt.devicePixelRatio||1)<=1?"translate("+E+"px, "+O+"px)":"translate3d("+E+"px, "+O+"px, 0)",y))}return Object.assign({},b,(t={},t[L]=W?O+"px":"",t[G]=K?E+"px":"",t.transform="",t))}function gC(e){var t=e.state,n=e.options,s=n.gpuAcceleration,r=s===void 0?!0:s,i=n.adaptive,a=i===void 0?!0:i,l=n.roundOffsets,c=l===void 0?!0:l,h={placement:un(t.placement),variation:Cr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Gd(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Gd(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Qu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:gC,data:{}};var Eo={passive:!0};function _C(e){var t=e.state,n=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,a=s.resize,l=a===void 0?!0:a,c=Fe(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&h.forEach(function(d){d.addEventListener("scroll",n.update,Eo)}),l&&c.addEventListener("resize",n.update,Eo),function(){i&&h.forEach(function(d){d.removeEventListener("scroll",n.update,Eo)}),l&&c.removeEventListener("resize",n.update,Eo)}}const Yu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:_C,data:{}};var yC={left:"right",right:"left",bottom:"top",top:"bottom"};function Fo(e){return e.replace(/left|right|bottom|top/g,function(t){return yC[t]})}var vC={start:"end",end:"start"};function Qd(e){return e.replace(/start|end/g,function(t){return vC[t]})}function Xu(e){var t=Fe(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Ju(e){return Sr(ds(e)).left+Xu(e).scrollLeft}function EC(e,t){var n=Fe(e),s=ds(e),r=n.visualViewport,i=s.clientWidth,a=s.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;var h=ey();(h||!h&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l+Ju(e),y:c}}function TC(e){var t,n=ds(e),s=Xu(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=Os(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Os(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+Ju(e),c=-s.scrollTop;return Pn(r||n).direction==="rtl"&&(l+=Os(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:l,y:c}}function Zu(e){var t=Pn(e),n=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function ay(e){return["html","body","#document"].indexOf(_n(e))>=0?e.ownerDocument.body:qe(e)&&Zu(e)?e:ay(Ja(e))}function yi(e,t){var n;t===void 0&&(t=[]);var s=ay(e),r=s===((n=e.ownerDocument)==null?void 0:n.body),i=Fe(s),a=r?[i].concat(i.visualViewport||[],Zu(s)?s:[]):s,l=t.concat(a);return r?l:l.concat(yi(Ja(a)))}function Fc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wC(e,t){var n=Sr(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Yd(e,t,n){return t===Hu?Fc(EC(e,n)):Us(t)?wC(t,n):Fc(TC(ds(e)))}function AC(e){var t=yi(Ja(e)),n=["absolute","fixed"].indexOf(Pn(e).position)>=0,s=n&&qe(e)?Bi(e):e;return Us(s)?t.filter(function(r){return Us(r)&&ny(r,s)&&_n(r)!=="body"}):[]}function bC(e,t,n,s){var r=t==="clippingParents"?AC(e):[].concat(t),i=[].concat(r,[n]),a=i[0],l=i.reduce(function(c,h){var d=Yd(e,h,s);return c.top=Os(d.top,c.top),c.right=da(d.right,c.right),c.bottom=da(d.bottom,c.bottom),c.left=Os(d.left,c.left),c},Yd(e,a,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function ly(e){var t=e.reference,n=e.element,s=e.placement,r=s?un(s):null,i=s?Cr(s):null,a=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,c;switch(r){case Ee:c={x:a,y:t.y-n.height};break;case ke:c={x:a,y:t.y+t.height};break;case $e:c={x:t.x+t.width,y:l};break;case Te:c={x:t.x-n.width,y:l};break;default:c={x:t.x,y:t.y}}var h=r?Gu(r):null;if(h!=null){var d=h==="y"?"height":"width";switch(i){case Fs:c[h]=c[h]-(t[d]/2-n[d]/2);break;case br:c[h]=c[h]+(t[d]/2-n[d]/2);break}}return c}function Rr(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=s===void 0?e.placement:s,i=n.strategy,a=i===void 0?e.strategy:i,l=n.boundary,c=l===void 0?H_:l,h=n.rootBoundary,d=h===void 0?Hu:h,m=n.elementContext,v=m===void 0?sr:m,E=n.altBoundary,P=E===void 0?!1:E,O=n.padding,N=O===void 0?0:O,K=ry(typeof N!="number"?N:iy(N,Mr)),W=v===sr?K_:sr,G=e.rects.popper,L=e.elements[P?W:v],tt=bC(Us(L)?L:L.contextElement||ds(e.elements.popper),c,d,a),nt=Sr(e.elements.reference),A=ly({reference:nt,element:G,placement:r}),g=Fc(Object.assign({},G,A)),_=v===sr?g:nt,w={top:tt.top-_.top+K.top,bottom:_.bottom-tt.bottom+K.bottom,left:tt.left-_.left+K.left,right:_.right-tt.right+K.right},b=e.modifiersData.offset;if(v===sr&&b){var S=b[r];Object.keys(w).forEach(function(y){var $t=[$e,ke].indexOf(y)>=0?1:-1,Qt=[Ee,ke].indexOf(y)>=0?"y":"x";w[y]+=S[Qt]*$t})}return w}function IC(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=n.boundary,i=n.rootBoundary,a=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,h=c===void 0?Ku:c,d=Cr(s),m=d?l?kc:kc.filter(function(P){return Cr(P)===d}):Mr,v=m.filter(function(P){return h.indexOf(P)>=0});v.length===0&&(v=m);var E=v.reduce(function(P,O){return P[O]=Rr(e,{placement:O,boundary:r,rootBoundary:i,padding:a})[un(O)],P},{});return Object.keys(E).sort(function(P,O){return E[P]-E[O]})}function SC(e){if(un(e)===Xa)return[];var t=Fo(e);return[Qd(e),t,Qd(t)]}function CC(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=n.mainAxis,i=r===void 0?!0:r,a=n.altAxis,l=a===void 0?!0:a,c=n.fallbackPlacements,h=n.padding,d=n.boundary,m=n.rootBoundary,v=n.altBoundary,E=n.flipVariations,P=E===void 0?!0:E,O=n.allowedAutoPlacements,N=t.options.placement,K=un(N),W=K===N,G=c||(W||!P?[Fo(N)]:SC(N)),L=[N].concat(G).reduce(function(Ue,H){return Ue.concat(un(H)===Xa?IC(t,{placement:H,boundary:d,rootBoundary:m,padding:h,flipVariations:P,allowedAutoPlacements:O}):H)},[]),tt=t.rects.reference,nt=t.rects.popper,A=new Map,g=!0,_=L[0],w=0;w<L.length;w++){var b=L[w],S=un(b),y=Cr(b)===Fs,$t=[Ee,ke].indexOf(S)>=0,Qt=$t?"width":"height",_t=Rr(t,{placement:b,boundary:d,rootBoundary:m,altBoundary:v,padding:h}),ct=$t?y?$e:Te:y?ke:Ee;tt[Qt]>nt[Qt]&&(ct=Fo(ct));var yt=Fo(ct),Ut=[];if(i&&Ut.push(_t[S]<=0),l&&Ut.push(_t[ct]<=0,_t[yt]<=0),Ut.every(function(Ue){return Ue})){_=b,g=!1;break}A.set(b,Ut)}if(g)for(var Ae=P?3:1,me=function(H){var x=L.find(function(X){var gt=A.get(X);if(gt)return gt.slice(0,H).every(function(Nt){return Nt})});if(x)return _=x,"break"},Rt=Ae;Rt>0;Rt--){var Ot=me(Rt);if(Ot==="break")break}t.placement!==_&&(t.modifiersData[s]._skip=!0,t.placement=_,t.reset=!0)}}const cy={name:"flip",enabled:!0,phase:"main",fn:CC,requiresIfExists:["offset"],data:{_skip:!1}};function Xd(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Jd(e){return[Ee,$e,ke,Te].some(function(t){return e[t]>=0})}function RC(e){var t=e.state,n=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,a=Rr(t,{elementContext:"reference"}),l=Rr(t,{altBoundary:!0}),c=Xd(a,s),h=Xd(l,r,i),d=Jd(c),m=Jd(h);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:d,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":m})}const uy={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:RC};function DC(e,t,n){var s=un(e),r=[Te,Ee].indexOf(s)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=i[0],l=i[1];return a=a||0,l=(l||0)*r,[Te,$e].indexOf(s)>=0?{x:l,y:a}:{x:a,y:l}}function PC(e){var t=e.state,n=e.options,s=e.name,r=n.offset,i=r===void 0?[0,0]:r,a=Ku.reduce(function(d,m){return d[m]=DC(m,t.rects,i),d},{}),l=a[t.placement],c=l.x,h=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=a}const hy={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:PC};function OC(e){var t=e.state,n=e.name;t.modifiersData[n]=ly({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const th={name:"popperOffsets",enabled:!0,phase:"read",fn:OC,data:{}};function NC(e){return e==="x"?"y":"x"}function VC(e){var t=e.state,n=e.options,s=e.name,r=n.mainAxis,i=r===void 0?!0:r,a=n.altAxis,l=a===void 0?!1:a,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,m=n.padding,v=n.tether,E=v===void 0?!0:v,P=n.tetherOffset,O=P===void 0?0:P,N=Rr(t,{boundary:c,rootBoundary:h,padding:m,altBoundary:d}),K=un(t.placement),W=Cr(t.placement),G=!W,L=Gu(K),tt=NC(L),nt=t.modifiersData.popperOffsets,A=t.rects.reference,g=t.rects.popper,_=typeof O=="function"?O(Object.assign({},t.rects,{placement:t.placement})):O,w=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),b=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,S={x:0,y:0};if(nt){if(i){var y,$t=L==="y"?Ee:Te,Qt=L==="y"?ke:$e,_t=L==="y"?"height":"width",ct=nt[L],yt=ct+N[$t],Ut=ct-N[Qt],Ae=E?-g[_t]/2:0,me=W===Fs?A[_t]:g[_t],Rt=W===Fs?-g[_t]:-A[_t],Ot=t.elements.arrow,Ue=E&&Ot?zu(Ot):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:sy(),x=H[$t],X=H[Qt],gt=_i(0,A[_t],Ue[_t]),Nt=G?A[_t]/2-Ae-gt-x-w.mainAxis:me-gt-x-w.mainAxis,Vt=G?-A[_t]/2+Ae+gt+X+w.mainAxis:Rt+gt+X+w.mainAxis,re=t.elements.arrow&&Bi(t.elements.arrow),T=re?L==="y"?re.clientTop||0:re.clientLeft||0:0,I=(y=b==null?void 0:b[L])!=null?y:0,D=ct+Nt-I-T,B=ct+Vt-I,M=_i(E?da(yt,D):yt,ct,E?Os(Ut,B):Ut);nt[L]=M,S[L]=M-ct}if(l){var F,Q=L==="x"?Ee:Te,q=L==="x"?ke:$e,j=nt[tt],k=tt==="y"?"height":"width",rt=j+N[Q],Y=j-N[q],et=[Ee,Te].indexOf(K)!==-1,lt=(F=b==null?void 0:b[tt])!=null?F:0,it=et?rt:j-A[k]-g[k]-lt+w.altAxis,ft=et?j+A[k]+g[k]-lt-w.altAxis:Y,vt=E&&et?uC(it,j,ft):_i(E?it:rt,j,E?ft:Y);nt[tt]=vt,S[tt]=vt-j}t.modifiersData[s]=S}}const fy={name:"preventOverflow",enabled:!0,phase:"main",fn:VC,requiresIfExists:["offset"]};function xC(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function MC(e){return e===Fe(e)||!qe(e)?Xu(e):xC(e)}function LC(e){var t=e.getBoundingClientRect(),n=Ir(t.width)/e.offsetWidth||1,s=Ir(t.height)/e.offsetHeight||1;return n!==1||s!==1}function kC(e,t,n){n===void 0&&(n=!1);var s=qe(t),r=qe(t)&&LC(t),i=ds(t),a=Sr(e,r,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!n)&&((_n(t)!=="body"||Zu(i))&&(l=MC(t)),qe(t)?(c=Sr(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=Ju(i))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function $C(e){var t=new Map,n=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(l){if(!n.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return e.forEach(function(i){n.has(i.name)||r(i)}),s}function FC(e){var t=$C(e);return ty.reduce(function(n,s){return n.concat(t.filter(function(r){return r.phase===s}))},[])}function UC(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function BC(e){var t=e.reduce(function(n,s){var r=n[s.name];return n[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var Zd={placement:"bottom",modifiers:[],strategy:"absolute"};function tp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Za(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,r=t.defaultOptions,i=r===void 0?Zd:r;return function(l,c,h){h===void 0&&(h=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zd,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],v=!1,E={state:d,setOptions:function(K){var W=typeof K=="function"?K(d.options):K;O(),d.options=Object.assign({},i,d.options,W),d.scrollParents={reference:Us(l)?yi(l):l.contextElement?yi(l.contextElement):[],popper:yi(c)};var G=FC(BC([].concat(s,d.options.modifiers)));return d.orderedModifiers=G.filter(function(L){return L.enabled}),P(),E.update()},forceUpdate:function(){if(!v){var K=d.elements,W=K.reference,G=K.popper;if(tp(W,G)){d.rects={reference:kC(W,Bi(G),d.options.strategy==="fixed"),popper:zu(G)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(w){return d.modifiersData[w.name]=Object.assign({},w.data)});for(var L=0;L<d.orderedModifiers.length;L++){if(d.reset===!0){d.reset=!1,L=-1;continue}var tt=d.orderedModifiers[L],nt=tt.fn,A=tt.options,g=A===void 0?{}:A,_=tt.name;typeof nt=="function"&&(d=nt({state:d,options:g,name:_,instance:E})||d)}}}},update:UC(function(){return new Promise(function(N){E.forceUpdate(),N(d)})}),destroy:function(){O(),v=!0}};if(!tp(l,c))return E;E.setOptions(h).then(function(N){!v&&h.onFirstUpdate&&h.onFirstUpdate(N)});function P(){d.orderedModifiers.forEach(function(N){var K=N.name,W=N.options,G=W===void 0?{}:W,L=N.effect;if(typeof L=="function"){var tt=L({state:d,name:K,instance:E,options:G}),nt=function(){};m.push(tt||nt)}})}function O(){m.forEach(function(N){return N()}),m=[]}return E}}var jC=Za(),HC=[Yu,th,Qu,Wu],KC=Za({defaultModifiers:HC}),qC=[Yu,th,Qu,Wu,hy,cy,fy,oy,uy],eh=Za({defaultModifiers:qC});const dy=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Y_,afterRead:z_,afterWrite:Z_,applyStyles:Wu,arrow:oy,auto:Xa,basePlacements:Mr,beforeMain:G_,beforeRead:q_,beforeWrite:X_,bottom:ke,clippingParents:H_,computeStyles:Qu,createPopper:eh,createPopperBase:jC,createPopperLite:KC,detectOverflow:Rr,end:br,eventListeners:Yu,flip:cy,hide:uy,left:Te,main:Q_,modifierPhases:ty,offset:hy,placements:Ku,popper:sr,popperGenerator:Za,popperOffsets:th,preventOverflow:fy,read:W_,reference:K_,right:$e,start:Fs,top:Ee,variationPlacements:kc,viewport:Hu,write:J_},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Fn=new Map,Bl={set(e,t,n){Fn.has(e)||Fn.set(e,new Map);const s=Fn.get(e);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,n)},get(e,t){return Fn.has(e)&&Fn.get(e).get(t)||null},remove(e,t){if(!Fn.has(e))return;const n=Fn.get(e);n.delete(t),n.size===0&&Fn.delete(e)}},WC=1e6,zC=1e3,Uc="transitionend",py=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),GC=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),QC=e=>{do e+=Math.floor(Math.random()*WC);while(document.getElementById(e));return e},YC=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const s=Number.parseFloat(t),r=Number.parseFloat(n);return!s&&!r?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*zC)},my=e=>{e.dispatchEvent(new Event(Uc))},bn=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),rs=e=>bn(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(py(e)):null,Lr=e=>{if(!bn(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const s=e.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return t},is=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",gy=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?gy(e.parentNode):null},pa=()=>{},ji=e=>{e.offsetHeight},_y=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,jl=[],XC=e=>{document.readyState==="loading"?(jl.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of jl)t()}),jl.push(e)):e()},We=()=>document.documentElement.dir==="rtl",Ge=e=>{XC(()=>{const t=_y();if(t){const n=e.NAME,s=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=s,e.jQueryInterface)}})},Se=(e,t=[],n=e)=>typeof e=="function"?e.call(...t):n,yy=(e,t,n=!0)=>{if(!n){Se(e);return}const r=YC(t)+5;let i=!1;const a=({target:l})=>{l===t&&(i=!0,t.removeEventListener(Uc,a),Se(e))};t.addEventListener(Uc,a),setTimeout(()=>{i||my(t)},r)},nh=(e,t,n,s)=>{const r=e.length;let i=e.indexOf(t);return i===-1?!n&&s?e[r-1]:e[0]:(i+=n?1:-1,s&&(i=(i+r)%r),e[Math.max(0,Math.min(i,r-1))])},JC=/[^.]*(?=\..*)\.|.*/,ZC=/\..*/,tR=/::\d+$/,Hl={};let ep=1;const vy={mouseenter:"mouseover",mouseleave:"mouseout"},eR=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ey(e,t){return t&&`${t}::${ep++}`||e.uidEvent||ep++}function Ty(e){const t=Ey(e);return e.uidEvent=t,Hl[t]=Hl[t]||{},Hl[t]}function nR(e,t){return function n(s){return sh(s,{delegateTarget:e}),n.oneOff&&$.off(e,s.type,t),t.apply(e,[s])}}function sR(e,t,n){return function s(r){const i=e.querySelectorAll(t);for(let{target:a}=r;a&&a!==this;a=a.parentNode)for(const l of i)if(l===a)return sh(r,{delegateTarget:a}),s.oneOff&&$.off(e,r.type,t,n),n.apply(a,[r])}}function wy(e,t,n=null){return Object.values(e).find(s=>s.callable===t&&s.delegationSelector===n)}function Ay(e,t,n){const s=typeof t=="string",r=s?n:t||n;let i=by(e);return eR.has(i)||(i=e),[s,r,i]}function np(e,t,n,s,r){if(typeof t!="string"||!e)return;let[i,a,l]=Ay(t,n,s);t in vy&&(a=(P=>function(O){if(!O.relatedTarget||O.relatedTarget!==O.delegateTarget&&!O.delegateTarget.contains(O.relatedTarget))return P.call(this,O)})(a));const c=Ty(e),h=c[l]||(c[l]={}),d=wy(h,a,i?n:null);if(d){d.oneOff=d.oneOff&&r;return}const m=Ey(a,t.replace(JC,"")),v=i?sR(e,n,a):nR(e,a);v.delegationSelector=i?n:null,v.callable=a,v.oneOff=r,v.uidEvent=m,h[m]=v,e.addEventListener(l,v,i)}function Bc(e,t,n,s,r){const i=wy(t[n],s,r);i&&(e.removeEventListener(n,i,!!r),delete t[n][i.uidEvent])}function rR(e,t,n,s){const r=t[n]||{};for(const[i,a]of Object.entries(r))i.includes(s)&&Bc(e,t,n,a.callable,a.delegationSelector)}function by(e){return e=e.replace(ZC,""),vy[e]||e}const $={on(e,t,n,s){np(e,t,n,s,!1)},one(e,t,n,s){np(e,t,n,s,!0)},off(e,t,n,s){if(typeof t!="string"||!e)return;const[r,i,a]=Ay(t,n,s),l=a!==t,c=Ty(e),h=c[a]||{},d=t.startsWith(".");if(typeof i<"u"){if(!Object.keys(h).length)return;Bc(e,c,a,i,r?n:null);return}if(d)for(const m of Object.keys(c))rR(e,c,m,t.slice(1));for(const[m,v]of Object.entries(h)){const E=m.replace(tR,"");(!l||t.includes(E))&&Bc(e,c,a,v.callable,v.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;const s=_y(),r=by(t),i=t!==r;let a=null,l=!0,c=!0,h=!1;i&&s&&(a=s.Event(t,n),s(e).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented());const d=sh(new Event(t,{bubbles:l,cancelable:!0}),n);return h&&d.preventDefault(),c&&e.dispatchEvent(d),d.defaultPrevented&&a&&a.preventDefault(),d}};function sh(e,t={}){for(const[n,s]of Object.entries(t))try{e[n]=s}catch{Object.defineProperty(e,n,{configurable:!0,get(){return s}})}return e}function sp(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function Kl(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const In={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${Kl(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${Kl(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let r=s.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1),t[r]=sp(e.dataset[s])}return t},getDataAttribute(e,t){return sp(e.getAttribute(`data-bs-${Kl(t)}`))}};class Hi{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const s=bn(n)?In.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...bn(n)?In.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[s,r]of Object.entries(n)){const i=t[s],a=bn(i)?"element":GC(i);if(!new RegExp(r).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${a}" but expected type "${r}".`)}}}const iR="5.3.7";class Xe extends Hi{constructor(t,n){super(),t=rs(t),t&&(this._element=t,this._config=this._getConfig(n),Bl.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Bl.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,s=!0){yy(t,n,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Bl.get(rs(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return iR}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const ql=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>py(n)).join(","):null},ot={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(n=>n.matches(t))},parents(e,t){const n=[];let s=e.parentNode.closest(t);for(;s;)n.push(s),s=s.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!is(n)&&Lr(n))},getSelectorFromElement(e){const t=ql(e);return t&&ot.findOne(t)?t:null},getElementFromSelector(e){const t=ql(e);return t?ot.findOne(t):null},getMultipleElementsFromSelector(e){const t=ql(e);return t?ot.find(t):[]}},tl=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,s=e.NAME;$.on(document,n,`[data-bs-dismiss="${s}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),is(this))return;const i=ot.getElementFromSelector(this)||this.closest(`.${s}`);e.getOrCreateInstance(i)[t]()})},oR="alert",aR="bs.alert",Iy=`.${aR}`,lR=`close${Iy}`,cR=`closed${Iy}`,uR="fade",hR="show";class el extends Xe{static get NAME(){return oR}close(){if($.trigger(this._element,lR).defaultPrevented)return;this._element.classList.remove(hR);const n=this._element.classList.contains(uR);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),$.trigger(this._element,cR),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=el.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}tl(el,"close");Ge(el);const fR="button",dR="bs.button",pR=`.${dR}`,mR=".data-api",gR="active",rp='[data-bs-toggle="button"]',_R=`click${pR}${mR}`;class nl extends Xe{static get NAME(){return fR}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(gR))}static jQueryInterface(t){return this.each(function(){const n=nl.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}$.on(document,_R,rp,e=>{e.preventDefault();const t=e.target.closest(rp);nl.getOrCreateInstance(t).toggle()});Ge(nl);const yR="swipe",kr=".bs.swipe",vR=`touchstart${kr}`,ER=`touchmove${kr}`,TR=`touchend${kr}`,wR=`pointerdown${kr}`,AR=`pointerup${kr}`,bR="touch",IR="pen",SR="pointer-event",CR=40,RR={endCallback:null,leftCallback:null,rightCallback:null},DR={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ma extends Hi{constructor(t,n){super(),this._element=t,!(!t||!ma.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return RR}static get DefaultType(){return DR}static get NAME(){return yR}dispose(){$.off(this._element,kr)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Se(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=CR)return;const n=t/this._deltaX;this._deltaX=0,n&&Se(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,wR,t=>this._start(t)),$.on(this._element,AR,t=>this._end(t)),this._element.classList.add(SR)):($.on(this._element,vR,t=>this._start(t)),$.on(this._element,ER,t=>this._move(t)),$.on(this._element,TR,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===IR||t.pointerType===bR)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const PR="carousel",OR="bs.carousel",ps=`.${OR}`,Sy=".data-api",NR="ArrowLeft",VR="ArrowRight",xR=500,ti="next",Ys="prev",rr="left",Uo="right",MR=`slide${ps}`,Wl=`slid${ps}`,LR=`keydown${ps}`,kR=`mouseenter${ps}`,$R=`mouseleave${ps}`,FR=`dragstart${ps}`,UR=`load${ps}${Sy}`,BR=`click${ps}${Sy}`,Cy="carousel",To="active",jR="slide",HR="carousel-item-end",KR="carousel-item-start",qR="carousel-item-next",WR="carousel-item-prev",Ry=".active",Dy=".carousel-item",zR=Ry+Dy,GR=".carousel-item img",QR=".carousel-indicators",YR="[data-bs-slide], [data-bs-slide-to]",XR='[data-bs-ride="carousel"]',JR={[NR]:Uo,[VR]:rr},ZR={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},tD={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ki extends Xe{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ot.findOne(QR,this._element),this._addEventListeners(),this._config.ride===Cy&&this.cycle()}static get Default(){return ZR}static get DefaultType(){return tD}static get NAME(){return PR}next(){this._slide(ti)}nextWhenVisible(){!document.hidden&&Lr(this._element)&&this.next()}prev(){this._slide(Ys)}pause(){this._isSliding&&my(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){$.one(this._element,Wl,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){$.one(this._element,Wl,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const r=t>s?ti:Ys;this._slide(r,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&$.on(this._element,LR,t=>this._keydown(t)),this._config.pause==="hover"&&($.on(this._element,kR,()=>this.pause()),$.on(this._element,$R,()=>this._maybeEnableCycle())),this._config.touch&&ma.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of ot.find(GR,this._element))$.on(s,FR,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(rr)),rightCallback:()=>this._slide(this._directionToOrder(Uo)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),xR+this._config.interval))}};this._swipeHelper=new ma(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=JR[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=ot.findOne(Ry,this._indicatorsElement);n.classList.remove(To),n.removeAttribute("aria-current");const s=ot.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(To),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const s=this._getActive(),r=t===ti,i=n||nh(this._getItems(),s,r,this._config.wrap);if(i===s)return;const a=this._getItemIndex(i),l=E=>$.trigger(this._element,E,{relatedTarget:i,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:a});if(l(MR).defaultPrevented||!s||!i)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=i;const d=r?KR:HR,m=r?qR:WR;i.classList.add(m),ji(i),s.classList.add(d),i.classList.add(d);const v=()=>{i.classList.remove(d,m),i.classList.add(To),s.classList.remove(To,m,d),this._isSliding=!1,l(Wl)};this._queueCallback(v,s,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(jR)}_getActive(){return ot.findOne(zR,this._element)}_getItems(){return ot.find(Dy,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return We()?t===rr?Ys:ti:t===rr?ti:Ys}_orderToDirection(t){return We()?t===Ys?rr:Uo:t===Ys?Uo:rr}static jQueryInterface(t){return this.each(function(){const n=Ki.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}$.on(document,BR,YR,function(e){const t=ot.getElementFromSelector(this);if(!t||!t.classList.contains(Cy))return;e.preventDefault();const n=Ki.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(In.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});$.on(window,UR,()=>{const e=ot.find(XR);for(const t of e)Ki.getOrCreateInstance(t)});Ge(Ki);const eD="collapse",nD="bs.collapse",qi=`.${nD}`,sD=".data-api",rD=`show${qi}`,iD=`shown${qi}`,oD=`hide${qi}`,aD=`hidden${qi}`,lD=`click${qi}${sD}`,zl="show",or="collapse",wo="collapsing",cD="collapsed",uD=`:scope .${or} .${or}`,hD="collapse-horizontal",fD="width",dD="height",pD=".collapse.show, .collapse.collapsing",jc='[data-bs-toggle="collapse"]',mD={parent:null,toggle:!0},gD={parent:"(null|element)",toggle:"boolean"};class Oi extends Xe{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const s=ot.find(jc);for(const r of s){const i=ot.getSelectorFromElement(r),a=ot.find(i).filter(l=>l===this._element);i!==null&&a.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return mD}static get DefaultType(){return gD}static get NAME(){return eD}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(pD).filter(l=>l!==this._element).map(l=>Oi.getOrCreateInstance(l,{toggle:!1}))),t.length&&t[0]._isTransitioning||$.trigger(this._element,rD).defaultPrevented)return;for(const l of t)l.hide();const s=this._getDimension();this._element.classList.remove(or),this._element.classList.add(wo),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(wo),this._element.classList.add(or,zl),this._element.style[s]="",$.trigger(this._element,iD)},a=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[s]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||$.trigger(this._element,oD).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,ji(this._element),this._element.classList.add(wo),this._element.classList.remove(or,zl);for(const r of this._triggerArray){const i=ot.getElementFromSelector(r);i&&!this._isShown(i)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(wo),this._element.classList.add(or),$.trigger(this._element,aD)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(zl)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=rs(t.parent),t}_getDimension(){return this._element.classList.contains(hD)?fD:dD}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(jc);for(const n of t){const s=ot.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(t){const n=ot.find(uD,this._config.parent);return ot.find(t,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const s of t)s.classList.toggle(cD,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const s=Oi.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}$.on(document,lD,jc,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const t of ot.getMultipleElementsFromSelector(this))Oi.getOrCreateInstance(t,{toggle:!1}).toggle()});Ge(Oi);const ip="dropdown",_D="bs.dropdown",Hs=`.${_D}`,rh=".data-api",yD="Escape",op="Tab",vD="ArrowUp",ap="ArrowDown",ED=2,TD=`hide${Hs}`,wD=`hidden${Hs}`,AD=`show${Hs}`,bD=`shown${Hs}`,Py=`click${Hs}${rh}`,Oy=`keydown${Hs}${rh}`,ID=`keyup${Hs}${rh}`,ir="show",SD="dropup",CD="dropend",RD="dropstart",DD="dropup-center",PD="dropdown-center",Rs='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',OD=`${Rs}.${ir}`,Bo=".dropdown-menu",ND=".navbar",VD=".navbar-nav",xD=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",MD=We()?"top-end":"top-start",LD=We()?"top-start":"top-end",kD=We()?"bottom-end":"bottom-start",$D=We()?"bottom-start":"bottom-end",FD=We()?"left-start":"right-start",UD=We()?"right-start":"left-start",BD="top",jD="bottom",HD={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},KD={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class hn extends Xe{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=ot.next(this._element,Bo)[0]||ot.prev(this._element,Bo)[0]||ot.findOne(Bo,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return HD}static get DefaultType(){return KD}static get NAME(){return ip}toggle(){return this._isShown()?this.hide():this.show()}show(){if(is(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!$.trigger(this._element,AD,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(VD))for(const s of[].concat(...document.body.children))$.on(s,"mouseover",pa);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ir),this._element.classList.add(ir),$.trigger(this._element,bD,t)}}hide(){if(is(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!$.trigger(this._element,TD,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))$.off(s,"mouseover",pa);this._popper&&this._popper.destroy(),this._menu.classList.remove(ir),this._element.classList.remove(ir),this._element.setAttribute("aria-expanded","false"),In.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,wD,t),this._element.focus()}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!bn(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${ip.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof dy>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:bn(this._config.reference)?t=rs(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=eh(t,this._menu,n)}_isShown(){return this._menu.classList.contains(ir)}_getPlacement(){const t=this._parent;if(t.classList.contains(CD))return FD;if(t.classList.contains(RD))return UD;if(t.classList.contains(DD))return BD;if(t.classList.contains(PD))return jD;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(SD)?n?LD:MD:n?$D:kD}_detectNavbar(){return this._element.closest(ND)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(In.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Se(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:n}){const s=ot.find(xD,this._menu).filter(r=>Lr(r));s.length&&nh(s,n,t===ap,!s.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=hn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===ED||t.type==="keyup"&&t.key!==op)return;const n=ot.find(OD);for(const s of n){const r=hn.getInstance(s);if(!r||r._config.autoClose===!1)continue;const i=t.composedPath(),a=i.includes(r._menu);if(i.includes(r._element)||r._config.autoClose==="inside"&&!a||r._config.autoClose==="outside"&&a||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===op||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const l={relatedTarget:r._element};t.type==="click"&&(l.clickEvent=t),r._completeHide(l)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),s=t.key===yD,r=[vD,ap].includes(t.key);if(!r&&!s||n&&!s)return;t.preventDefault();const i=this.matches(Rs)?this:ot.prev(this,Rs)[0]||ot.next(this,Rs)[0]||ot.findOne(Rs,t.delegateTarget.parentNode),a=hn.getOrCreateInstance(i);if(r){t.stopPropagation(),a.show(),a._selectMenuItem(t);return}a._isShown()&&(t.stopPropagation(),a.hide(),i.focus())}}$.on(document,Oy,Rs,hn.dataApiKeydownHandler);$.on(document,Oy,Bo,hn.dataApiKeydownHandler);$.on(document,Py,hn.clearMenus);$.on(document,ID,hn.clearMenus);$.on(document,Py,Rs,function(e){e.preventDefault(),hn.getOrCreateInstance(this).toggle()});Ge(hn);const Ny="backdrop",qD="fade",lp="show",cp=`mousedown.bs.${Ny}`,WD={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},zD={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Vy extends Hi{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return WD}static get DefaultType(){return zD}static get NAME(){return Ny}show(t){if(!this._config.isVisible){Se(t);return}this._append();const n=this._getElement();this._config.isAnimated&&ji(n),n.classList.add(lp),this._emulateAnimation(()=>{Se(t)})}hide(t){if(!this._config.isVisible){Se(t);return}this._getElement().classList.remove(lp),this._emulateAnimation(()=>{this.dispose(),Se(t)})}dispose(){this._isAppended&&($.off(this._element,cp),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(qD),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=rs(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),$.on(t,cp,()=>{Se(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){yy(t,this._getElement(),this._config.isAnimated)}}const GD="focustrap",QD="bs.focustrap",ga=`.${QD}`,YD=`focusin${ga}`,XD=`keydown.tab${ga}`,JD="Tab",ZD="forward",up="backward",tP={autofocus:!0,trapElement:null},eP={autofocus:"boolean",trapElement:"element"};class xy extends Hi{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return tP}static get DefaultType(){return eP}static get NAME(){return GD}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,ga),$.on(document,YD,t=>this._handleFocusin(t)),$.on(document,XD,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,ga))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const s=ot.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===up?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===JD&&(this._lastTabNavDirection=t.shiftKey?up:ZD)}}const hp=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",fp=".sticky-top",Ao="padding-right",dp="margin-right";class Hc{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ao,n=>n+t),this._setElementAttributes(hp,Ao,n=>n+t),this._setElementAttributes(fp,dp,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ao),this._resetElementAttributes(hp,Ao),this._resetElementAttributes(fp,dp)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,s){const r=this.getWidth(),i=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+r)return;this._saveInitialAttribute(a,n);const l=window.getComputedStyle(a).getPropertyValue(n);a.style.setProperty(n,`${s(Number.parseFloat(l))}px`)};this._applyManipulationCallback(t,i)}_saveInitialAttribute(t,n){const s=t.style.getPropertyValue(n);s&&In.setDataAttribute(t,n,s)}_resetElementAttributes(t,n){const s=r=>{const i=In.getDataAttribute(r,n);if(i===null){r.style.removeProperty(n);return}In.removeDataAttribute(r,n),r.style.setProperty(n,i)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,n){if(bn(t)){n(t);return}for(const s of ot.find(t,this._element))n(s)}}const nP="modal",sP="bs.modal",ze=`.${sP}`,rP=".data-api",iP="Escape",oP=`hide${ze}`,aP=`hidePrevented${ze}`,My=`hidden${ze}`,Ly=`show${ze}`,lP=`shown${ze}`,cP=`resize${ze}`,uP=`click.dismiss${ze}`,hP=`mousedown.dismiss${ze}`,fP=`keydown.dismiss${ze}`,dP=`click${ze}${rP}`,pp="modal-open",pP="fade",mp="show",Gl="modal-static",mP=".modal.show",gP=".modal-dialog",_P=".modal-body",yP='[data-bs-toggle="modal"]',vP={backdrop:!0,focus:!0,keyboard:!0},EP={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Dr extends Xe{constructor(t,n){super(t,n),this._dialog=ot.findOne(gP,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Hc,this._addEventListeners()}static get Default(){return vP}static get DefaultType(){return EP}static get NAME(){return nP}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||$.trigger(this._element,Ly,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(pp),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||$.trigger(this._element,oP).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(mp),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){$.off(window,ze),$.off(this._dialog,ze),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Vy({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new xy({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=ot.findOne(_P,this._dialog);n&&(n.scrollTop=0),ji(this._element),this._element.classList.add(mp);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,lP,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,fP,t=>{if(t.key===iP){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),$.on(window,cP,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,hP,t=>{$.one(this._element,uP,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(pp),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,My)})}_isAnimated(){return this._element.classList.contains(pP)}_triggerBackdropTransition(){if($.trigger(this._element,aP).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Gl)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Gl),this._queueCallback(()=>{this._element.classList.remove(Gl),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!t){const r=We()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!s&&t){const r=We()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const s=Dr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](n)}})}}$.on(document,dP,yP,function(e){const t=ot.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),$.one(t,Ly,r=>{r.defaultPrevented||$.one(t,My,()=>{Lr(this)&&this.focus()})});const n=ot.findOne(mP);n&&Dr.getInstance(n).hide(),Dr.getOrCreateInstance(t).toggle(this)});tl(Dr);Ge(Dr);const TP="offcanvas",wP="bs.offcanvas",Nn=`.${wP}`,ky=".data-api",AP=`load${Nn}${ky}`,bP="Escape",gp="show",_p="showing",yp="hiding",IP="offcanvas-backdrop",$y=".offcanvas.show",SP=`show${Nn}`,CP=`shown${Nn}`,RP=`hide${Nn}`,vp=`hidePrevented${Nn}`,Fy=`hidden${Nn}`,DP=`resize${Nn}`,PP=`click${Nn}${ky}`,OP=`keydown.dismiss${Nn}`,NP='[data-bs-toggle="offcanvas"]',VP={backdrop:!0,keyboard:!0,scroll:!1},xP={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class os extends Xe{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return VP}static get DefaultType(){return xP}static get NAME(){return TP}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||$.trigger(this._element,SP,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Hc().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(_p);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(gp),this._element.classList.remove(_p),$.trigger(this._element,CP,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||$.trigger(this._element,RP).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(yp),this._backdrop.hide();const n=()=>{this._element.classList.remove(gp,yp),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Hc().reset(),$.trigger(this._element,Fy)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){$.trigger(this._element,vp);return}this.hide()},n=!!this._config.backdrop;return new Vy({className:IP,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new xy({trapElement:this._element})}_addEventListeners(){$.on(this._element,OP,t=>{if(t.key===bP){if(this._config.keyboard){this.hide();return}$.trigger(this._element,vp)}})}static jQueryInterface(t){return this.each(function(){const n=os.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}$.on(document,PP,NP,function(e){const t=ot.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),is(this))return;$.one(t,Fy,()=>{Lr(this)&&this.focus()});const n=ot.findOne($y);n&&n!==t&&os.getInstance(n).hide(),os.getOrCreateInstance(t).toggle(this)});$.on(window,AP,()=>{for(const e of ot.find($y))os.getOrCreateInstance(e).show()});$.on(window,DP,()=>{for(const e of ot.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&os.getOrCreateInstance(e).hide()});tl(os);Ge(os);const MP=/^aria-[\w-]*$/i,Uy={"*":["class","dir","id","lang","role",MP],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},LP=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),kP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,$P=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?LP.has(n)?!!kP.test(e.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function FP(e,t,n){if(!e.length)return e;if(n&&typeof n=="function")return n(e);const r=new window.DOMParser().parseFromString(e,"text/html"),i=[].concat(...r.body.querySelectorAll("*"));for(const a of i){const l=a.nodeName.toLowerCase();if(!Object.keys(t).includes(l)){a.remove();continue}const c=[].concat(...a.attributes),h=[].concat(t["*"]||[],t[l]||[]);for(const d of c)$P(d,h)||a.removeAttribute(d.nodeName)}return r.body.innerHTML}const UP="TemplateFactory",BP={allowList:Uy,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},jP={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},HP={entry:"(string|element|function|null)",selector:"(string|element)"};class KP extends Hi{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return BP}static get DefaultType(){return jP}static get NAME(){return UP}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(t,i,r);const n=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,s]of Object.entries(t))super._typeCheckConfig({selector:n,entry:s},HP)}_setContent(t,n,s){const r=ot.findOne(s,t);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(bn(n)){this._putElementInTemplate(rs(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(t){return this._config.sanitize?FP(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Se(t,[void 0,this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const qP="tooltip",WP=new Set(["sanitize","allowList","sanitizeFn"]),Ql="fade",zP="modal",bo="show",GP=".tooltip-inner",Ep=`.${zP}`,Tp="hide.bs.modal",ei="hover",Yl="focus",Xl="click",QP="manual",YP="hide",XP="hidden",JP="show",ZP="shown",tO="inserted",eO="click",nO="focusin",sO="focusout",rO="mouseenter",iO="mouseleave",oO={AUTO:"auto",TOP:"top",RIGHT:We()?"left":"right",BOTTOM:"bottom",LEFT:We()?"right":"left"},aO={allowList:Uy,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},lO={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class $r extends Xe{constructor(t,n){if(typeof dy>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return aO}static get DefaultType(){return lO}static get NAME(){return qP}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(Ep),Tp,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=$.trigger(this._element,this.constructor.eventName(JP)),s=(gy(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(r),$.trigger(this._element,this.constructor.eventName(tO))),this._popper=this._createPopper(r),r.classList.add(bo),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))$.on(l,"mouseover",pa);const a=()=>{$.trigger(this._element,this.constructor.eventName(ZP)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||$.trigger(this._element,this.constructor.eventName(YP)).defaultPrevented)return;if(this._getTipElement().classList.remove(bo),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))$.off(r,"mouseover",pa);this._activeTrigger[Xl]=!1,this._activeTrigger[Yl]=!1,this._activeTrigger[ei]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName(XP)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(Ql,bo),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=QC(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(Ql),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new KP({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[GP]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ql)}_isShown(){return this.tip&&this.tip.classList.contains(bo)}_createPopper(t){const n=Se(this._config.placement,[this,t,this._element]),s=oO[n.toUpperCase()];return eh(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Se(t,[this._element,this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...Se(this._config.popperConfig,[void 0,n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")$.on(this._element,this.constructor.eventName(eO),this._config.selector,s=>{const r=this._initializeOnDelegatedTarget(s);r._activeTrigger[Xl]=!(r._isShown()&&r._activeTrigger[Xl]),r.toggle()});else if(n!==QP){const s=n===ei?this.constructor.eventName(rO):this.constructor.eventName(nO),r=n===ei?this.constructor.eventName(iO):this.constructor.eventName(sO);$.on(this._element,s,this._config.selector,i=>{const a=this._initializeOnDelegatedTarget(i);a._activeTrigger[i.type==="focusin"?Yl:ei]=!0,a._enter()}),$.on(this._element,r,this._config.selector,i=>{const a=this._initializeOnDelegatedTarget(i);a._activeTrigger[i.type==="focusout"?Yl:ei]=a._element.contains(i.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(Ep),Tp,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=In.getDataAttributes(this._element);for(const s of Object.keys(n))WP.has(s)&&delete n[s];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:rs(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(t[n]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=$r.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Ge($r);const cO="popover",uO=".popover-header",hO=".popover-body",fO={...$r.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},dO={...$r.DefaultType,content:"(null|string|element|function)"};class ih extends $r{static get Default(){return fO}static get DefaultType(){return dO}static get NAME(){return cO}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[uO]:this._getTitle(),[hO]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=ih.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Ge(ih);const pO="scrollspy",mO="bs.scrollspy",oh=`.${mO}`,gO=".data-api",_O=`activate${oh}`,wp=`click${oh}`,yO=`load${oh}${gO}`,vO="dropdown-item",Xs="active",EO='[data-bs-spy="scroll"]',Jl="[href]",TO=".nav, .list-group",Ap=".nav-link",wO=".nav-item",AO=".list-group-item",bO=`${Ap}, ${wO} > ${Ap}, ${AO}`,IO=".dropdown",SO=".dropdown-toggle",CO={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},RO={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class sl extends Xe{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return CO}static get DefaultType(){return RO}static get NAME(){return pO}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=rs(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,wp),$.on(this._config.target,wp,Jl,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const s=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:r,behavior:"smooth"});return}s.scrollTop=r}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=a=>this._targetLinks.get(`#${a.target.id}`),s=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(n(a))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const a of t){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(a));continue}const l=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&l){if(s(a),!r)return;continue}!i&&!l&&s(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=ot.find(Jl,this._config.target);for(const n of t){if(!n.hash||is(n))continue;const s=ot.findOne(decodeURI(n.hash),this._element);Lr(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Xs),this._activateParents(t),$.trigger(this._element,_O,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(vO)){ot.findOne(SO,t.closest(IO)).classList.add(Xs);return}for(const n of ot.parents(t,TO))for(const s of ot.prev(n,bO))s.classList.add(Xs)}_clearActiveClass(t){t.classList.remove(Xs);const n=ot.find(`${Jl}.${Xs}`,t);for(const s of n)s.classList.remove(Xs)}static jQueryInterface(t){return this.each(function(){const n=sl.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}$.on(window,yO,()=>{for(const e of ot.find(EO))sl.getOrCreateInstance(e)});Ge(sl);const DO="tab",PO="bs.tab",Ks=`.${PO}`,OO=`hide${Ks}`,NO=`hidden${Ks}`,VO=`show${Ks}`,xO=`shown${Ks}`,MO=`click${Ks}`,LO=`keydown${Ks}`,kO=`load${Ks}`,$O="ArrowLeft",bp="ArrowRight",FO="ArrowUp",Ip="ArrowDown",Zl="Home",Sp="End",Ds="active",Cp="fade",tc="show",UO="dropdown",By=".dropdown-toggle",BO=".dropdown-menu",ec=`:not(${By})`,jO='.list-group, .nav, [role="tablist"]',HO=".nav-item, .list-group-item",KO=`.nav-link${ec}, .list-group-item${ec}, [role="tab"]${ec}`,jy='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',nc=`${KO}, ${jy}`,qO=`.${Ds}[data-bs-toggle="tab"], .${Ds}[data-bs-toggle="pill"], .${Ds}[data-bs-toggle="list"]`;class Pr extends Xe{constructor(t){super(t),this._parent=this._element.closest(jO),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,LO,n=>this._keydown(n)))}static get NAME(){return DO}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),s=n?$.trigger(n,OO,{relatedTarget:t}):null;$.trigger(t,VO,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(Ds),this._activate(ot.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(tc);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),$.trigger(t,xO,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Cp))}_deactivate(t,n){if(!t)return;t.classList.remove(Ds),t.blur(),this._deactivate(ot.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(tc);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),$.trigger(t,NO,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Cp))}_keydown(t){if(![$O,bp,FO,Ip,Zl,Sp].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(r=>!is(r));let s;if([Zl,Sp].includes(t.key))s=n[t.key===Zl?0:n.length-1];else{const r=[bp,Ip].includes(t.key);s=nh(n,t.target,r,!0)}s&&(s.focus({preventScroll:!0}),Pr.getOrCreateInstance(s).show())}_getChildren(){return ot.find(nc,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",n),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=ot.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const s=this._getOuterElement(t);if(!s.classList.contains(UO))return;const r=(i,a)=>{const l=ot.findOne(i,s);l&&l.classList.toggle(a,n)};r(By,Ds),r(BO,tc),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,s){t.hasAttribute(n)||t.setAttribute(n,s)}_elemIsActive(t){return t.classList.contains(Ds)}_getInnerElement(t){return t.matches(nc)?t:ot.findOne(nc,t)}_getOuterElement(t){return t.closest(HO)||t}static jQueryInterface(t){return this.each(function(){const n=Pr.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}$.on(document,MO,jy,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!is(this)&&Pr.getOrCreateInstance(this).show()});$.on(window,kO,()=>{for(const e of ot.find(qO))Pr.getOrCreateInstance(e)});Ge(Pr);const WO="toast",zO="bs.toast",ms=`.${zO}`,GO=`mouseover${ms}`,QO=`mouseout${ms}`,YO=`focusin${ms}`,XO=`focusout${ms}`,JO=`hide${ms}`,ZO=`hidden${ms}`,tN=`show${ms}`,eN=`shown${ms}`,nN="fade",Rp="hide",Io="show",So="showing",sN={animation:"boolean",autohide:"boolean",delay:"number"},rN={animation:!0,autohide:!0,delay:5e3};class rl extends Xe{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return rN}static get DefaultType(){return sN}static get NAME(){return WO}show(){if($.trigger(this._element,tN).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(nN);const n=()=>{this._element.classList.remove(So),$.trigger(this._element,eN),this._maybeScheduleHide()};this._element.classList.remove(Rp),ji(this._element),this._element.classList.add(Io,So),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||$.trigger(this._element,JO).defaultPrevented)return;const n=()=>{this._element.classList.add(Rp),this._element.classList.remove(So,Io),$.trigger(this._element,ZO)};this._element.classList.add(So),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Io),super.dispose()}isShown(){return this._element.classList.contains(Io)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,GO,t=>this._onInteraction(t,!0)),$.on(this._element,QO,t=>this._onInteraction(t,!1)),$.on(this._element,YO,t=>this._onInteraction(t,!0)),$.on(this._element,XO,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=rl.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}tl(rl);Ge(rl);const iN=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},oN={class:"gantt-application rounded"},aN={class:"gantt-container"},lN={class:"chart-wrapper"},cN={class:"chart-scroll-container"},uN=["width","height"],hN=["width"],fN=["x","width","height"],dN=["x1","x2","y2"],pN=["x","y","transform"],mN=["y","height"],gN=["y"],_N=["y1","x2","y2"],yN=["x","y","width","fill","onMouseenter"],vN=["x","y","fill"],EN={key:0,class:"auth-section"},TN={class:"auth-card"},wN={class:"auth-form"},AN={key:0,class:"error-message"},bN={key:1,class:"management-dashboard"},IN={class:"dashboard-card"},SN={class:"card-content"},CN={class:"form-row"},RN={class:"form-group"},DN=["value"],PN={class:"form-group"},ON={class:"form-row"},NN={class:"form-group"},VN={class:"form-group"},xN={class:"form-group"},MN={class:"form-group"},LN={class:"dashboard-card"},kN={class:"card-content"},$N={class:"form-row"},FN={class:"form-group flex-grow"},UN={key:0,class:"error-message"},BN={class:"tooltip-header"},jN={class:"tooltip-content"},HN={class:"tooltip-row"},KN={class:"tooltip-row"},qN={class:"tooltip-row"},WN={key:0,class:"tooltip-notes"},sc=60,Co=35,zN={__name:"App",setup(e){const t=Je([]),n=async()=>{try{const H=await $d(xd(vo,"config"));return H.empty?"default-secure-password-2025":H.docs[0].data().adminPasswordHash||"default-secure-password-2025"}catch(H){return console.error("Error loading admin password:",H),"default-secure-password-2025"}},s=Je("");lm(async()=>{s.value=await n(),await r()});const r=async()=>{const H=await $d(xd(vo,"tasks"));t.value=H.docs.map(x=>({name:x.data().name,tasks:x.data().tasks||[]}))},i=async()=>{for(const H of t.value)await L0(Md(vo,"tasks",H.name),{tasks:k0(...H.tasks)})},a=Je(""),l=Je(!1),c=Je(""),h=Je(""),d=Je(""),m=async()=>{if(!h.value.trim()){d.value="Member name cannot be empty";return}const H=h.value.trim(),x=Md(vo,"tasks",H);try{await M0(x,{name:H,tasks:[]}),t.value.push({name:H,tasks:[]}),h.value="",d.value=""}catch(X){console.error("Error adding team member:",X),d.value="Failed to add member. Try again."}},v=()=>{a.value===s.value?(l.value=!0,c.value=""):c.value="Incorrect password. Please contact your administrator."},E=Je({member:"",name:"",startDate:"",endDate:"",priority:1,notes:""}),P=async()=>{const H=t.value.find(x=>x.name===E.value.member);H?(H.tasks.push({id:O(),name:E.value.name,startDate:E.value.startDate,endDate:E.value.endDate,priority:E.value.priority,notes:E.value.notes}),await i(),E.value={member:"",name:"",startDate:"",endDate:"",priority:1,notes:""}):console.error("Selected team member not found")};function O(){const H=Date.now(),x=Math.floor(Math.random()*1e3);return`${H}-${x}`}const N=Un(()=>{const H=t.value.flatMap(Vt=>Vt.tasks.flatMap(re=>[re.startDate,re.endDate]));if(H.length===0){const Vt=new Date,re=new Date(Vt.getFullYear(),Vt.getMonth(),1),T=new Date(Vt.getFullYear(),Vt.getMonth()+1,0);return Rt(re,T)}const x=new Date(Math.min(...H.map(Vt=>new Date(Vt)))),X=new Date(Math.max(...H.map(Vt=>new Date(Vt)))),gt=new Date(x);gt.setDate(gt.getDate()-2);const Nt=new Date(X);return Nt.setDate(Nt.getDate()+2),Rt(gt,Nt)}),K=Un(()=>N.value.length>30),W=Un(()=>{const X=N.value.length;return X===0?40:X<=14?80:X<=30?60:X<=90?40:30}),G=Un(()=>N.value.length===0?1200:200+N.value.length*W.value),L=Un(()=>{const H=N.value.length;return H>90?7:H>30?5:H>14?3:1}),tt=H=>H===0||H===N.value.length-1?!0:H%L.value===0,nt=H=>{const x=new Date(H),X=x.toLocaleDateString("en-US",{weekday:"short"});return N.value.length>30?` ${X} ${x.getDate()}/${x.getMonth()+1} `:x.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},A=H=>new Date(H).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=Un(()=>{let H=100;return t.value.forEach(x=>{H+=x.tasks.length>0?x.tasks.length*Co:sc}),H}),_=Je(null),w=Je({left:"0px",top:"0px"}),b=Un(()=>{const H=N.value;return H.length===0?{start:new Date,end:new Date}:{start:H[0],end:H[H.length-1]}}),S=H=>{const x=new Date(H).getDay();return x===0||x===6},y=H=>({1:"#28a745",2:"#32d74b",3:"#66d366",4:"#99d699",5:"#ffc107",6:"#ffb347",7:"#ff8c42",8:"#fd7e14",9:"#dc3545",10:"#b02a37"})[H]||"#6c757d",$t=(H,x)=>x>=7?"white":"#2c3e50",Qt=(H,x)=>{const gt=Math.floor(x*.1);return H.length<=gt?H:H.substring(0,gt-3)+"..."},_t=H=>{const x=new Date(H),X=b.value.start;return 200+Math.floor((x-X)/(1e3*3600*24))*W.value},ct=(H,x=0)=>{let X=70;for(let gt=0;gt<H;gt++){const Nt=t.value[gt];X+=Nt.tasks.length>0?Nt.tasks.length*Co+10:sc}return X+=x*Co,X},yt=H=>H.tasks.length>0?H.tasks.length*Co+10:sc,Ut=H=>{const x=new Date(H.startDate),X=new Date(H.endDate);return(Math.ceil((X-x)/(1e3*3600*24))+1)*W.value},Ae=H=>{const x=new Date(H.startDate),X=new Date(H.endDate);return Math.ceil((X-x)/(1e3*3600*24))+1},me=H=>[...H].sort((x,X)=>new Date(x.startDate)-new Date(X.startDate)),Rt=(H,x)=>{const X=[];let gt=new Date(H);for(;gt<=x;)X.push(new Date(gt)),gt.setDate(gt.getDate()+1);return X},Ot=(H,x)=>{_.value=H,w.value={left:x.pageX+15+"px",top:x.pageY-10+"px"}},Ue=()=>{_.value=null};return(H,x)=>(qt(),Yt("div",oN,[x[23]||(x[23]=df('<header class="app-header" data-v-781a0d14><div class="header-content" data-v-781a0d14><h1 class="app-title" data-v-781a0d14><span class="title-icon" data-v-781a0d14></span> Project Timeline Management </h1><p class="app-subtitle" data-v-781a0d14>Track team progress and manage project deadlines</p></div></header>',1)),J("div",aN,[J("div",lN,[J("div",cN,[(qt(),Yt("svg",{width:G.value,height:g.value,class:"gantt-chart"},[x[8]||(x[8]=df('<defs data-v-781a0d14><filter id="task-shadow" x="-20%" y="-20%" width="140%" height="140%" data-v-781a0d14><feDropShadow dx="3" dy="3" stdDeviation="3" flood-color="rgba(0, 0, 0, 0.15)" data-v-781a0d14></feDropShadow></filter><linearGradient id="headerGradient" x1="0%" y1="0%" x2="0%" y2="100%" data-v-781a0d14><stop offset="0%" style="stop-color:#f8f9fa;stop-opacity:1;" data-v-781a0d14></stop><stop offset="100%" style="stop-color:#e9ecef;stop-opacity:1;" data-v-781a0d14></stop></linearGradient></defs><rect width="100%" height="100%" fill="url(#headerGradient)" data-v-781a0d14></rect>',2)),J("rect",{x:"0",y:"0",width:G.value,height:"50",fill:"#2c3e50"},null,8,hN),(qt(!0),Yt(Ne,null,ho(N.value,(X,gt)=>(qt(),Yt("g",{key:X.getTime()},[S(X)?(qt(),Yt("rect",{key:0,x:_t(X),y:"50",width:W.value,height:g.value-50,fill:"rgba(108, 117, 125, 0.1)",class:"weekend-shade"},null,8,fN)):$n("",!0),J("line",{x1:_t(X),y1:"50",x2:_t(X),y2:g.value,stroke:"#dee2e6","stroke-width":"1"},null,8,dN),tt(gt)?(qt(),Yt("text",{key:1,x:_t(X)+W.value/2,y:K.value?45:30,class:Ta(["axis-label",{rotated:K.value}]),fill:"white","text-anchor":"middle",transform:K.value?`rotate(-45, ${_t(X)+W.value/2}, 45)`:""},De(nt(X)),11,pN)):$n("",!0)]))),128)),(qt(!0),Yt(Ne,null,ho(t.value,(X,gt)=>(qt(),Yt("g",{key:X.name},[J("rect",{x:"0",y:ct(gt)-10,width:"200",height:yt(X),fill:"#34495e",class:"member-background"},null,8,mN),J("text",{x:"15",y:ct(gt)+15,class:"member-name",fill:"white"},De(X.name),9,gN),J("line",{x1:"0",y1:ct(gt)-10,x2:G.value,y2:ct(gt)-10,stroke:"#495057","stroke-width":"2"},null,8,_N),(qt(!0),Yt(Ne,null,ho(me(X.tasks),(Nt,Vt)=>(qt(),Yt("g",{key:Nt.id},[J("rect",{x:_t(Nt.startDate),y:ct(gt,Vt),width:Math.max(Ut(Nt),80),height:"30",fill:y(Nt.priority),rx:"6",class:"task-bar",filter:"url(#task-shadow)",stroke:"#fff","stroke-width":"2",onMouseenter:re=>Ot(Nt,re),onMouseleave:Ue},null,40,yN),J("text",{x:_t(Nt.startDate)+8,y:ct(gt,Vt)+20,class:"task-label",fill:$t(y(Nt.priority),Nt.priority)},De(Qt(Nt.name,Ut(Nt))),9,vN)]))),128))]))),128))],8,uN))])]),l.value?$n("",!0):(qt(),Yt("div",EN,[J("div",TN,[x[9]||(x[9]=J("div",{class:"auth-header"},[J("h3",null," Admin Access Required"),J("p",null,"Enter your credentials to manage tasks and team members")],-1)),J("div",wN,[kn(J("input",{type:"password","onUpdate:modelValue":x[0]||(x[0]=X=>a.value=X),placeholder:"Enter admin password",onKeyup:OT(v,["enter"]),class:"auth-input"},null,544),[[ws,a.value]]),J("button",{onClick:v,class:"auth-button"}," Access Dashboard "),c.value?(qt(),Yt("p",AN,De(c.value),1)):$n("",!0)])])])),l.value?(qt(),Yt("div",bN,[J("div",IN,[x[17]||(x[17]=J("div",{class:"card-header"},[J("h3",null," Add New Task")],-1)),J("div",SN,[J("div",CN,[J("div",RN,[x[11]||(x[11]=J("label",{for:"member"},"Team Member",-1)),kn(J("select",{"onUpdate:modelValue":x[1]||(x[1]=X=>E.value.member=X),id:"member",class:"form-control"},[x[10]||(x[10]=J("option",{value:""},"Select team member",-1)),(qt(!0),Yt(Ne,null,ho(t.value,X=>(qt(),Yt("option",{key:X.name,value:X.name},De(X.name),9,DN))),128))],512),[[DT,E.value.member]])]),J("div",PN,[x[12]||(x[12]=J("label",{for:"taskName"},"Task Name",-1)),kn(J("input",{"onUpdate:modelValue":x[2]||(x[2]=X=>E.value.name=X),id:"taskName",placeholder:"Enter task name",class:"form-control"},null,512),[[ws,E.value.name]])])]),J("div",ON,[J("div",NN,[x[13]||(x[13]=J("label",{for:"startDate"},"Start Date",-1)),kn(J("input",{"onUpdate:modelValue":x[3]||(x[3]=X=>E.value.startDate=X),type:"date",id:"startDate",class:"form-control"},null,512),[[ws,E.value.startDate]])]),J("div",VN,[x[14]||(x[14]=J("label",{for:"endDate"},"End Date",-1)),kn(J("input",{"onUpdate:modelValue":x[4]||(x[4]=X=>E.value.endDate=X),type:"date",id:"endDate",class:"form-control"},null,512),[[ws,E.value.endDate]])]),J("div",xN,[x[15]||(x[15]=J("label",{for:"priority"},"Priority (1-10)",-1)),kn(J("input",{"onUpdate:modelValue":x[5]||(x[5]=X=>E.value.priority=X),type:"number",min:"1",max:"10",id:"priority",class:"form-control"},null,512),[[ws,E.value.priority]])])]),J("div",MN,[x[16]||(x[16]=J("label",{for:"notes"},"Notes",-1)),kn(J("textarea",{"onUpdate:modelValue":x[6]||(x[6]=X=>E.value.notes=X),id:"notes",placeholder:"Additional notes (optional)",class:"form-control"},null,512),[[ws,E.value.notes]])]),J("button",{onClick:P,class:"btn-primary mt-2"},"Add Task")])]),J("div",LN,[x[18]||(x[18]=J("div",{class:"card-header"},[J("h3",null," Add Team Member")],-1)),J("div",kN,[J("div",$N,[J("div",FN,[kn(J("input",{"onUpdate:modelValue":x[7]||(x[7]=X=>h.value=X),placeholder:"Enter team member name",class:"form-control"},null,512),[[ws,h.value]])]),J("button",{onClick:m,class:"btn-secondary"},"Add Member")]),d.value?(qt(),Yt("p",UN,De(d.value),1)):$n("",!0)])])])):$n("",!0),_.value?(qt(),Yt("div",{key:2,class:"tooltip-enhanced",style:vi(w.value)},[J("div",BN,[J("h4",null,De(_.value.name),1),J("span",{class:"priority-badge",style:vi({backgroundColor:y(_.value.priority)})}," P"+De(_.value.priority),5)]),J("div",jN,[J("div",HN,[x[19]||(x[19]=J("span",{class:"tooltip-label"}," Start:",-1)),J("span",null,De(A(_.value.startDate)),1)]),J("div",KN,[x[20]||(x[20]=J("span",{class:"tooltip-label"}," End:",-1)),J("span",null,De(A(_.value.endDate)),1)]),J("div",qN,[x[21]||(x[21]=J("span",{class:"tooltip-label"}," Duration:",-1)),J("span",null,De(Ae(_.value))+" days",1)]),_.value.notes?(qt(),Yt("div",WN,[x[22]||(x[22]=J("span",{class:"tooltip-label"}," Notes:",-1)),J("p",null,De(_.value.notes),1)])):$n("",!0)])],4)):$n("",!0)])]))}},GN=iN(zN,[["__scopeId","data-v-781a0d14"]]);xT(GN).mount("#app");
